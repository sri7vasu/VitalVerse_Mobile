!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("aws_amplify",[],t):"object"==typeof exports?exports.aws_amplify=t():e.aws_amplify=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=135)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return f})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return m})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return E})),n.d(t,"__classPrivateFieldGet",(function(){return O})),n.d(t,"__classPrivateFieldSet",(function(){return A}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function m(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(194),t),r.__exportStar(n(196),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(164),t),r.__exportStar(n(166),t),r.__exportStar(n(167),t),r.__exportStar(n(168),t),r.__exportStar(n(169),t),r.__exportStar(n(170),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(153),t),r.__exportStar(n(154),t),r.__exportStar(n(155),t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(17),i={userAgent:n(35).a.userAgent};t.b=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(100),t),r.__exportStar(n(101),t),r.__exportStar(n(185),t)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(141),i=n(142),o=n(143);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){f=!1;break}if(f)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function b(e,t,n,r){return q(z(t,e.length-n),e,n,r)}function w(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return w(e,t,n,r)}function E(e,t,n,r){return q(F(t),e,n,r)}function O(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function x(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,o){return o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:z(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(52))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(172),i=n(173);t.fromUtf8=function(e){return"function"==typeof TextEncoder?i.fromUtf8(e):r.fromUtf8(e)},t.toUtf8=function(e){return"function"==typeof TextDecoder?i.toUtf8(e):r.toUtf8(e)}},function(e,t,n){"use strict";var r=n(145),i=n(146);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=_,t.resolve=function(e,t){return _(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?_(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=_(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(147);function _(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var _=e=c.join(a);if(_=_.trim(),!n&&1===e.split("#").length){var b=u.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?m.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=s.exec(_);if(w){var S=(w=w[0]).toLowerCase();this.protocol=S,_=_.substr(w.length)}if(n||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||w&&v[w]||(_=_.substr(2),this.slashes=!0)}if(!v[w]&&(E||w&&!y[w])){for(var O,A,I=-1,C=0;C<d.length;C++){-1!==(P=_.indexOf(d[C]))&&(-1===I||P<I)&&(I=P)}-1!==(A=-1===I?_.lastIndexOf("@"):_.lastIndexOf("@",I))&&(O=_.slice(0,A),_=_.slice(A+1),this.auth=decodeURIComponent(O)),I=-1;for(C=0;C<f.length;C++){var P;-1!==(P=_.indexOf(f[C]))&&(-1===I||P<I)&&(I=P)}-1===I&&(I=_.length),this.host=_.slice(0,I),_=_.slice(I),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var x=this.hostname.split(/\./),k=(C=0,x.length);C<k;C++){var j=x[C];if(j&&!j.match(h)){for(var N="",R=0,M=j.length;R<M;R++)j.charCodeAt(R)>127?N+="x":N+=j[R];if(!N.match(h)){var U=x.slice(0,C),D=x.slice(C+1),L=j.match(p);L&&(U.push(L[1]),D.unshift(L[2])),D.length&&(_="/"+D.join(".")+_),this.hostname=U.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+B,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[S])for(C=0,k=l.length;C<k;C++){var F=l[C];if(-1!==_.indexOf(F)){var q=encodeURIComponent(F);q===F&&(q=escape(F)),_=_.split(F).join(q)}}var K=_.indexOf("#");-1!==K&&(this.hash=_.substr(K),_=_.slice(0,K));var H=_.indexOf("?");if(-1!==H?(this.search=_.substr(H),this.query=_.substr(H+1),t&&(this.query=m.parse(this.query)),_=_.slice(0,H)):t&&(this.search="",this.query={}),_&&(this.pathname=_),y[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var V=this.search||"";this.path=B+V}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=m.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var h=f[d];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||_||n.host&&e.pathname,S=w,E=n.pathname&&n.pathname.split("/")||[],O=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(O&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),w=w&&(""===p[0]||""===E[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(O)n.hostname=n.host=E.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=E.slice(-1)[0],I=(n.host||e.host||E.length>1)&&("."===A||".."===A)||""===A,C=0,P=E.length;P>=0;P--)"."===(A=E[P])?E.splice(P,1):".."===A?(E.splice(P,1),C++):C&&(E.splice(P,1),C--);if(!w&&!S)for(;C--;C)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),I&&"/"!==E.join("/").substr(-1)&&E.push("");var T,x=""===E[0]||E[0]&&"/"===E[0].charAt(0);O&&(n.hostname=n.host=x?"":E.length?E.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift()));return(w=w||n.host&&E.length)&&!x&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(150),t),r.__exportStar(n(151),t),r.__exportStar(n(152),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3);t.resolveHostHeaderConfig=function(e){return e},t.hostHeaderMiddleware=function(e){return function(t){return function(n){return r.__awaiter(void 0,void 0,void 0,(function(){var o,s;return r.__generator(this,(function(r){return i.HttpRequest.isInstance(n.request)?(o=n.request,s=(e.requestHandler.metadata||{}).handlerProtocol,(void 0===s?"":s).indexOf("h2")>=0&&!o.headers[":authority"]?(delete o.headers.host,o.headers[":authority"]=""):o.headers.host||(o.headers.host=o.hostname),[2,t(n)]):[2,t(n)]}))}))}}},t.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",tags:["HOST"]},t.getHostHeaderPlugin=function(e){return{applyToStack:function(n){n.add(t.hostHeaderMiddleware(e),t.hostHeaderMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(156),t),r.__exportStar(n(87),t),r.__exportStar(n(158),t),r.__exportStar(n(88),t),r.__exportStar(n(89),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(162),t),r.__exportStar(n(163),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r={},i=new Array(64),o=0,s="A".charCodeAt(0),a="Z".charCodeAt(0);o+s<=a;o++){var u=String.fromCharCode(o+s);r[u]=o,i[o]=u}for(o=0,s="a".charCodeAt(0),a="z".charCodeAt(0);o+s<=a;o++){u=String.fromCharCode(o+s);var c=o+26;r[u]=c,i[c]=u}for(o=0;o<10;o++){r[o.toString(10)]=o+52;u=o.toString(10),c=o+52;r[u]=c,i[c]=u}r["+"]=62,i[62]="+",r["/"]=63,i[63]="/";t.fromBase64=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),i=new DataView(n),o=0;o<e.length;o+=4){for(var s=0,a=0,u=o,c=o+3;u<=c;u++)"="!==e[u]?(s|=r[e[u]]<<6*(c-u),a+=6):s>>=6;var l=o/4*3;s>>=a%8;for(var f=Math.floor(a/8),d=0;d<f;d++){var h=8*(f-d-1);i.setUint8(l+d,(s&255<<h)>>h)}}return new Uint8Array(n)},t.toBase64=function(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,o=0,s=n,a=Math.min(n+3,e.length);s<a;s++)r|=e[s]<<8*(a-s-1),o+=8;var u=Math.ceil(o/6);r<<=6*u-o;for(var c=1;c<=u;c++){var l=6*(u-c);t+=i[(r&63<<l)>>l]}t+="==".slice(0,4-u)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(192),t),r.__exportStar(n(107),t),r.__exportStar(n(193),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(159),t),r.__exportStar(n(161),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invalidFunction=function(e){return function(){throw new Error(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(32),i=new r.a("Amplify"),o=function(){function e(){}return e.register=function(t){i.debug("component registered in amplify",t),this._components.push(t),"function"==typeof t.getModuleName?e[t.getModuleName()]=t:i.debug("no getModuleName method for component",t)},e.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),i.debug("amplify config",this._config),this._components.map((function(e){e.configure(t._config)})),this._config):this._config},e.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map((function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)}))},e._components=[],e._config={},e.Auth=null,e.Analytics=null,e.API=null,e.Storage=null,e.I18n=null,e.Cache=null,e.PubSub=null,e.Interactions=null,e.Pushnotification=null,e.UI=null,e.XR=null,e.Predictions=null,e.DataStore=null,e.Logger=r.a,e.ServiceWorker=null,e}()},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",s="__lodash_placeholder__",a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",v="[object Number]",y="[object Object]",m="[object RegExp]",_="[object Set]",b="[object String]",w="[object Symbol]",S="[object WeakMap]",E="[object ArrayBuffer]",O="[object DataView]",A="[object Float32Array]",I="[object Float64Array]",C="[object Int8Array]",P="[object Int16Array]",T="[object Int32Array]",x="[object Uint8Array]",k="[object Uint16Array]",j="[object Uint32Array]",N=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,D=/[&<>"']/g,L=RegExp(U.source),B=RegExp(D.source),z=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,$=RegExp(G.source),W=/^\s+|\s+$/g,Y=/^\s+/,J=/\s+$/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Q=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,se=/^\[object .+?Constructor\]$/,ae=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",he="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",ge="["+he+"]",ve="["+de+"]",ye="\\d+",me="[\\u2700-\\u27bf]",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",be="[^\\ud800-\\udfff"+he+ye+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",we="\\ud83c[\\udffb-\\udfff]",Se="[^\\ud800-\\udfff]",Ee="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ae="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ie="(?:"+_e+"|"+be+")",Ce="(?:"+Ae+"|"+be+")",Pe="(?:"+ve+"|"+we+")"+"?",Te="[\\ufe0e\\ufe0f]?"+Pe+("(?:\\u200d(?:"+[Se,Ee,Oe].join("|")+")[\\ufe0e\\ufe0f]?"+Pe+")*"),xe="(?:"+[me,Ee,Oe].join("|")+")"+Te,ke="(?:"+[Se+ve+"?",ve,Ee,Oe,pe].join("|")+")",je=RegExp("['’]","g"),Ne=RegExp(ve,"g"),Re=RegExp(we+"(?="+we+")|"+ke+Te,"g"),Me=RegExp([Ae+"?"+_e+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ge,Ae,"$"].join("|")+")",Ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ge,Ae+Ie,"$"].join("|")+")",Ae+"?"+Ie+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Ae+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ye,xe].join("|"),"g"),Ue=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),De=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Le=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Be=-1,ze={};ze[A]=ze[I]=ze[C]=ze[P]=ze[T]=ze[x]=ze["[object Uint8ClampedArray]"]=ze[k]=ze[j]=!0,ze[u]=ze[c]=ze[E]=ze[l]=ze[O]=ze[f]=ze[d]=ze[h]=ze[g]=ze[v]=ze[y]=ze[m]=ze[_]=ze[b]=ze[S]=!1;var Fe={};Fe[u]=Fe[c]=Fe[E]=Fe[O]=Fe[l]=Fe[f]=Fe[A]=Fe[I]=Fe[C]=Fe[P]=Fe[T]=Fe[g]=Fe[v]=Fe[y]=Fe[m]=Fe[_]=Fe[b]=Fe[w]=Fe[x]=Fe["[object Uint8ClampedArray]"]=Fe[k]=Fe[j]=!0,Fe[d]=Fe[h]=Fe[S]=!1;var qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ke=parseFloat,He=parseInt,Ve="object"==typeof e&&e&&e.Object===Object&&e,Ge="object"==typeof self&&self&&self.Object===Object&&self,$e=Ve||Ge||Function("return this")(),We=t&&!t.nodeType&&t,Ye=We&&"object"==typeof r&&r&&!r.nodeType&&r,Je=Ye&&Ye.exports===We,Xe=Je&&Ve.process,Qe=function(){try{var e=Ye&&Ye.require&&Ye.require("util").types;return e||Xe&&Xe.binding&&Xe.binding("util")}catch(e){}}(),Ze=Qe&&Qe.isArrayBuffer,et=Qe&&Qe.isDate,tt=Qe&&Qe.isMap,nt=Qe&&Qe.isRegExp,rt=Qe&&Qe.isSet,it=Qe&&Qe.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function st(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function at(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function ft(e,t){return!!(null==e?0:e.length)&&wt(e,t,0)>-1}function dt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ht(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function gt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function vt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function yt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var mt=At("length");function _t(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function wt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):bt(e,Et,n)}function St(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Et(e){return e!=e}function Ot(e,t){var n=null==e?0:e.length;return n?Pt(e,t)/n:NaN}function At(e){return function(t){return null==t?void 0:t[e]}}function It(e){return function(t){return null==e?void 0:e[t]}}function Ct(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Pt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Tt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function xt(e){return function(t){return e(t)}}function kt(e,t){return ht(t,(function(t){return e[t]}))}function jt(e,t){return e.has(t)}function Nt(e,t){for(var n=-1,r=e.length;++n<r&&wt(t,e[n],0)>-1;);return n}function Rt(e,t){for(var n=e.length;n--&&wt(t,e[n],0)>-1;);return n}function Mt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Ut=It({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Dt=It({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Lt(e){return"\\"+qe[e]}function Bt(e){return Ue.test(e)}function zt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ft(e,t){return function(n){return e(t(n))}}function qt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function Kt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Vt(e){return Bt(e)?function(e){var t=Re.lastIndex=0;for(;Re.test(e);)++t;return t}(e):mt(e)}function Gt(e){return Bt(e)?function(e){return e.match(Re)||[]}(e):function(e){return e.split("")}(e)}var $t=It({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Wt=function e(t){var n,r=(t=null==t?$e:Wt.defaults($e.Object(),t,Wt.pick($e,Le))).Array,i=t.Date,de=t.Error,he=t.Function,pe=t.Math,ge=t.Object,ve=t.RegExp,ye=t.String,me=t.TypeError,_e=r.prototype,be=he.prototype,we=ge.prototype,Se=t["__core-js_shared__"],Ee=be.toString,Oe=we.hasOwnProperty,Ae=0,Ie=(n=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ce=we.toString,Pe=Ee.call(ge),Te=$e._,xe=ve("^"+Ee.call(Oe).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=Je?t.Buffer:void 0,Re=t.Symbol,Ue=t.Uint8Array,qe=ke?ke.allocUnsafe:void 0,Ve=Ft(ge.getPrototypeOf,ge),Ge=ge.create,We=we.propertyIsEnumerable,Ye=_e.splice,Xe=Re?Re.isConcatSpreadable:void 0,Qe=Re?Re.iterator:void 0,mt=Re?Re.toStringTag:void 0,It=function(){try{var e=Zi(ge,"defineProperty");return e({},"",{}),e}catch(e){}}(),Yt=t.clearTimeout!==$e.clearTimeout&&t.clearTimeout,Jt=i&&i.now!==$e.Date.now&&i.now,Xt=t.setTimeout!==$e.setTimeout&&t.setTimeout,Qt=pe.ceil,Zt=pe.floor,en=ge.getOwnPropertySymbols,tn=ke?ke.isBuffer:void 0,nn=t.isFinite,rn=_e.join,on=Ft(ge.keys,ge),sn=pe.max,an=pe.min,un=i.now,cn=t.parseInt,ln=pe.random,fn=_e.reverse,dn=Zi(t,"DataView"),hn=Zi(t,"Map"),pn=Zi(t,"Promise"),gn=Zi(t,"Set"),vn=Zi(t,"WeakMap"),yn=Zi(ge,"create"),mn=vn&&new vn,_n={},bn=Co(dn),wn=Co(hn),Sn=Co(pn),En=Co(gn),On=Co(vn),An=Re?Re.prototype:void 0,In=An?An.valueOf:void 0,Cn=An?An.toString:void 0;function Pn(e){if(Hs(e)&&!Ns(e)&&!(e instanceof jn)){if(e instanceof kn)return e;if(Oe.call(e,"__wrapped__"))return Po(e)}return new kn(e)}var Tn=function(){function e(){}return function(t){if(!Ks(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function xn(){}function kn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function jn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Un(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Mn;++t<n;)this.add(e[t])}function Dn(e){var t=this.__data__=new Rn(e);this.size=t.size}function Ln(e,t){var n=Ns(e),r=!n&&js(e),i=!n&&!r&&Ds(e),o=!n&&!r&&!i&&Qs(e),s=n||r||i||o,a=s?Tt(e.length,ye):[],u=a.length;for(var c in e)!t&&!Oe.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||so(c,u))||a.push(c);return a}function Bn(e){var t=e.length;return t?e[Ur(0,t-1)]:void 0}function zn(e,t){return Oo(yi(e),Yn(t,0,e.length))}function Fn(e){return Oo(yi(e))}function qn(e,t,n){(void 0!==n&&!Ts(e[t],n)||void 0===n&&!(t in e))&&$n(e,t,n)}function Kn(e,t,n){var r=e[t];Oe.call(e,t)&&Ts(r,n)&&(void 0!==n||t in e)||$n(e,t,n)}function Hn(e,t){for(var n=e.length;n--;)if(Ts(e[n][0],t))return n;return-1}function Vn(e,t,n,r){return er(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Gn(e,t){return e&&mi(t,ba(t),e)}function $n(e,t,n){"__proto__"==t&&It?It(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Wn(e,t){for(var n=-1,i=t.length,o=r(i),s=null==e;++n<i;)o[n]=s?void 0:ga(e,t[n]);return o}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Jn(e,t,n,r,i,o){var s,a=1&t,c=2&t,d=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),void 0!==s)return s;if(!Ks(e))return e;var S=Ns(e);if(S){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Oe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!a)return yi(e,s)}else{var N=no(e),R=N==h||N==p;if(Ds(e))return fi(e,a);if(N==y||N==u||R&&!i){if(s=c||R?{}:io(e),!a)return c?function(e,t){return mi(e,to(e),t)}(e,function(e,t){return e&&mi(t,wa(t),e)}(s,e)):function(e,t){return mi(e,eo(e),t)}(e,Gn(s,e))}else{if(!Fe[N])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case E:return di(e);case l:case f:return new r(+e);case O:return function(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case A:case I:case C:case P:case T:case x:case"[object Uint8ClampedArray]":case k:case j:return hi(e,n);case g:return new r;case v:case b:return new r(e);case m:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new r;case w:return i=e,In?ge(In.call(i)):{}}var i}(e,N,a)}}o||(o=new Dn);var M=o.get(e);if(M)return M;o.set(e,s),Ys(e)?e.forEach((function(r){s.add(Jn(r,t,n,r,e,o))})):Vs(e)&&e.forEach((function(r,i){s.set(i,Jn(r,t,n,i,e,o))}));var U=S?void 0:(d?c?Gi:Vi:c?wa:ba)(e);return at(U||e,(function(r,i){U&&(r=e[i=r]),Kn(s,i,Jn(r,t,n,i,e,o))})),s}function Xn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ge(e);r--;){var i=n[r],o=t[i],s=e[i];if(void 0===s&&!(i in e)||!o(s))return!1}return!0}function Qn(e,t,n){if("function"!=typeof e)throw new me(o);return bo((function(){e.apply(void 0,n)}),t)}function Zn(e,t,n,r){var i=-1,o=ft,s=!0,a=e.length,u=[],c=t.length;if(!a)return u;n&&(t=ht(t,xt(n))),r?(o=dt,s=!1):t.length>=200&&(o=jt,s=!1,t=new Un(t));e:for(;++i<a;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,s&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}Pn.templateSettings={escape:z,evaluate:F,interpolate:q,variable:"",imports:{_:Pn}},Pn.prototype=xn.prototype,Pn.prototype.constructor=Pn,kn.prototype=Tn(xn.prototype),kn.prototype.constructor=kn,jn.prototype=Tn(xn.prototype),jn.prototype.constructor=jn,Nn.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},Nn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Nn.prototype.get=function(e){var t=this.__data__;if(yn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Oe.call(t,e)?t[e]:void 0},Nn.prototype.has=function(e){var t=this.__data__;return yn?void 0!==t[e]:Oe.call(t,e)},Nn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yn&&void 0===t?"__lodash_hash_undefined__":t,this},Rn.prototype.clear=function(){this.__data__=[],this.size=0},Rn.prototype.delete=function(e){var t=this.__data__,n=Hn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Rn.prototype.get=function(e){var t=this.__data__,n=Hn(t,e);return n<0?void 0:t[n][1]},Rn.prototype.has=function(e){return Hn(this.__data__,e)>-1},Rn.prototype.set=function(e,t){var n=this.__data__,r=Hn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Mn.prototype.clear=function(){this.size=0,this.__data__={hash:new Nn,map:new(hn||Rn),string:new Nn}},Mn.prototype.delete=function(e){var t=Xi(this,e).delete(e);return this.size-=t?1:0,t},Mn.prototype.get=function(e){return Xi(this,e).get(e)},Mn.prototype.has=function(e){return Xi(this,e).has(e)},Mn.prototype.set=function(e,t){var n=Xi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Un.prototype.add=Un.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Un.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.clear=function(){this.__data__=new Rn,this.size=0},Dn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Dn.prototype.get=function(e){return this.__data__.get(e)},Dn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Rn){var r=n.__data__;if(!hn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mn(r)}return n.set(e,t),this.size=n.size,this};var er=wi(ur),tr=wi(cr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(void 0===a?s==s&&!Xs(s):n(s,a)))var a=s,u=o}return u}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function or(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=oo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?or(a,t-1,n,r,i):pt(i,a):r||(i[i.length]=a)}return i}var sr=Si(),ar=Si(!0);function ur(e,t){return e&&sr(e,t,ba)}function cr(e,t){return e&&ar(e,t,ba)}function lr(e,t){return lt(t,(function(t){return zs(e[t])}))}function fr(e,t){for(var n=0,r=(t=ai(t,e)).length;null!=e&&n<r;)e=e[Io(t[n++])];return n&&n==r?e:void 0}function dr(e,t,n){var r=t(e);return Ns(e)?r:pt(r,n(e))}function hr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":mt&&mt in ge(e)?function(e){var t=Oe.call(e,mt),n=e[mt];try{e[mt]=void 0;var r=!0}catch(e){}var i=Ce.call(e);r&&(t?e[mt]=n:delete e[mt]);return i}(e):function(e){return Ce.call(e)}(e)}function pr(e,t){return e>t}function gr(e,t){return null!=e&&Oe.call(e,t)}function vr(e,t){return null!=e&&t in ge(e)}function yr(e,t,n){for(var i=n?dt:ft,o=e[0].length,s=e.length,a=s,u=r(s),c=1/0,l=[];a--;){var f=e[a];a&&t&&(f=ht(f,xt(t))),c=an(f.length,c),u[a]=!n&&(t||o>=120&&f.length>=120)?new Un(a&&f):void 0}f=e[0];var d=-1,h=u[0];e:for(;++d<o&&l.length<c;){var p=f[d],g=t?t(p):p;if(p=n||0!==p?p:0,!(h?jt(h,g):i(l,g,n))){for(a=s;--a;){var v=u[a];if(!(v?jt(v,g):i(e[a],g,n)))continue e}h&&h.push(g),l.push(p)}}return l}function mr(e,t,n){var r=null==(e=vo(e,t=ai(t,e)))?e:e[Io(Bo(t))];return null==r?void 0:ot(r,e,n)}function _r(e){return Hs(e)&&hr(e)==u}function br(e,t,n,r,i){return e===t||(null==e||null==t||!Hs(e)&&!Hs(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var s=Ns(e),a=Ns(t),h=s?c:no(e),p=a?c:no(t),S=(h=h==u?y:h)==y,A=(p=p==u?y:p)==y,I=h==p;if(I&&Ds(e)){if(!Ds(t))return!1;s=!0,S=!1}if(I&&!S)return o||(o=new Dn),s||Qs(e)?Ki(e,t,n,r,i,o):function(e,t,n,r,i,o,s){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!o(new Ue(e),new Ue(t)));case l:case f:case v:return Ts(+e,+t);case d:return e.name==t.name&&e.message==t.message;case m:case b:return e==t+"";case g:var a=zt;case _:var u=1&r;if(a||(a=Kt),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var h=Ki(a(e),a(t),r,i,o,s);return s.delete(e),h;case w:if(In)return In.call(e)==In.call(t)}return!1}(e,t,h,n,r,i,o);if(!(1&n)){var C=S&&Oe.call(e,"__wrapped__"),P=A&&Oe.call(t,"__wrapped__");if(C||P){var T=C?e.value():e,x=P?t.value():t;return o||(o=new Dn),i(T,x,n,r,o)}}if(!I)return!1;return o||(o=new Dn),function(e,t,n,r,i,o){var s=1&n,a=Vi(e),u=a.length,c=Vi(t).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var f=a[l];if(!(s?f in t:Oe.call(t,f)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var h=!0;o.set(e,t),o.set(t,e);var p=s;for(;++l<u;){f=a[l];var g=e[f],v=t[f];if(r)var y=s?r(v,g,f,t,e,o):r(g,v,f,e,t,o);if(!(void 0===y?g===v||i(g,v,n,r,o):y)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var m=e.constructor,_=t.constructor;m==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,o)}(e,t,n,r,br,i))}function wr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=ge(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var u=(a=n[i])[0],c=e[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in e))return!1}else{var f=new Dn;if(r)var d=r(c,l,u,e,t,f);if(!(void 0===d?br(l,c,3,r,f):d))return!1}}return!0}function Sr(e){return!(!Ks(e)||(t=e,Ie&&Ie in t))&&(zs(e)?xe:se).test(Co(e));var t}function Er(e){return"function"==typeof e?e:null==e?Ga:"object"==typeof e?Ns(e)?Tr(e[0],e[1]):Pr(e):tu(e)}function Or(e){if(!fo(e))return on(e);var t=[];for(var n in ge(e))Oe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ar(e){if(!Ks(e))return function(e){var t=[];if(null!=e)for(var n in ge(e))t.push(n);return t}(e);var t=fo(e),n=[];for(var r in e)("constructor"!=r||!t&&Oe.call(e,r))&&n.push(r);return n}function Ir(e,t){return e<t}function Cr(e,t){var n=-1,i=Ms(e)?r(e.length):[];return er(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Pr(e){var t=Qi(e);return 1==t.length&&t[0][2]?po(t[0][0],t[0][1]):function(n){return n===e||wr(n,e,t)}}function Tr(e,t){return uo(e)&&ho(t)?po(Io(e),t):function(n){var r=ga(n,e);return void 0===r&&r===t?va(n,e):br(t,r,3)}}function xr(e,t,n,r,i){e!==t&&sr(t,(function(o,s){if(i||(i=new Dn),Ks(o))!function(e,t,n,r,i,o,s){var a=mo(e,n),u=mo(t,n),c=s.get(u);if(c)return void qn(e,n,c);var l=o?o(a,u,n+"",e,t,s):void 0,f=void 0===l;if(f){var d=Ns(u),h=!d&&Ds(u),p=!d&&!h&&Qs(u);l=u,d||h||p?Ns(a)?l=a:Us(a)?l=yi(a):h?(f=!1,l=fi(u,!0)):p?(f=!1,l=hi(u,!0)):l=[]:$s(u)||js(u)?(l=a,js(a)?l=sa(a):Ks(a)&&!zs(a)||(l=io(u))):f=!1}f&&(s.set(u,l),i(l,u,r,o,s),s.delete(u));qn(e,n,l)}(e,t,s,n,xr,r,i);else{var a=r?r(mo(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),qn(e,s,a)}}),wa)}function kr(e,t){var n=e.length;if(n)return so(t+=t<0?n:0,n)?e[t]:void 0}function jr(e,t,n){var r=-1;return t=ht(t.length?t:[Ga],xt(Ji())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Cr(e,(function(e,n,i){return{criteria:ht(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var u=pi(i[r],o[r]);if(u){if(r>=a)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function Nr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=fr(e,s);n(a,s)&&Fr(o,ai(s,e),a)}return o}function Rr(e,t,n,r){var i=r?St:wt,o=-1,s=t.length,a=e;for(e===t&&(t=yi(t)),n&&(a=ht(e,xt(n)));++o<s;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==e&&Ye.call(a,u,1),Ye.call(e,u,1);return e}function Mr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;so(i)?Ye.call(e,i,1):Zr(e,i)}}return e}function Ur(e,t){return e+Zt(ln()*(t-e+1))}function Dr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function Lr(e,t){return wo(go(e,t,Ga),e+"")}function Br(e){return Bn(Ta(e))}function zr(e,t){var n=Ta(e);return Oo(n,Yn(t,0,n.length))}function Fr(e,t,n,r){if(!Ks(e))return e;for(var i=-1,o=(t=ai(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var u=Io(t[i]),c=n;if(i!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=Ks(l)?l:so(t[i+1])?[]:{})}Kn(a,u,c),a=a[u]}return e}var qr=mn?function(e,t){return mn.set(e,t),e}:Ga,Kr=It?function(e,t){return It(e,"toString",{configurable:!0,enumerable:!1,value:Ka(t),writable:!0})}:Ga;function Hr(e){return Oo(Ta(e))}function Vr(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=r(o);++i<o;)s[i]=e[i+t];return s}function Gr(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function $r(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!Xs(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return Wr(e,t,Ga,n)}function Wr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,s=t!=t,a=null===t,u=Xs(t),c=void 0===t;i<o;){var l=Zt((i+o)/2),f=n(e[l]),d=void 0!==f,h=null===f,p=f==f,g=Xs(f);if(s)var v=r||p;else v=c?p&&(r||d):a?p&&d&&(r||!h):u?p&&d&&!h&&(r||!g):!h&&!g&&(r?f<=t:f<t);v?i=l+1:o=l}return an(o,4294967294)}function Yr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!Ts(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Jr(e){return"number"==typeof e?e:Xs(e)?NaN:+e}function Xr(e){if("string"==typeof e)return e;if(Ns(e))return ht(e,Xr)+"";if(Xs(e))return Cn?Cn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qr(e,t,n){var r=-1,i=ft,o=e.length,s=!0,a=[],u=a;if(n)s=!1,i=dt;else if(o>=200){var c=t?null:Di(e);if(c)return Kt(c);s=!1,i=jt,u=new Un}else u=t?[]:a;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,s&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),a.push(l)}else i(u,f,n)||(u!==a&&u.push(f),a.push(l))}return a}function Zr(e,t){return null==(e=vo(e,t=ai(t,e)))||delete e[Io(Bo(t))]}function ei(e,t,n,r){return Fr(e,t,n(fr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Vr(e,r?0:o,r?o+1:i):Vr(e,r?o+1:0,r?i:o)}function ni(e,t){var n=e;return n instanceof jn&&(n=n.value()),gt(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),n)}function ri(e,t,n){var i=e.length;if(i<2)return i?Qr(e[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=e[o],u=-1;++u<i;)u!=o&&(s[o]=Zn(s[o]||a,e[u],t,n));return Qr(or(s,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var a=r<o?t[r]:void 0;n(s,e[r],a)}return s}function oi(e){return Us(e)?e:[]}function si(e){return"function"==typeof e?e:Ga}function ai(e,t){return Ns(e)?e:uo(e,t)?[e]:Ao(aa(e))}var ui=Lr;function ci(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Vr(e,t,n)}var li=Yt||function(e){return $e.clearTimeout(e)};function fi(e,t){if(t)return e.slice();var n=e.length,r=qe?qe(n):new e.constructor(n);return e.copy(r),r}function di(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function hi(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Xs(e),s=void 0!==t,a=null===t,u=t==t,c=Xs(t);if(!a&&!c&&!o&&e>t||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}function gi(e,t,n,i){for(var o=-1,s=e.length,a=n.length,u=-1,c=t.length,l=sn(s-a,0),f=r(c+l),d=!i;++u<c;)f[u]=t[u];for(;++o<a;)(d||o<s)&&(f[n[o]]=e[o]);for(;l--;)f[u++]=e[o++];return f}function vi(e,t,n,i){for(var o=-1,s=e.length,a=-1,u=n.length,c=-1,l=t.length,f=sn(s-u,0),d=r(f+l),h=!i;++o<f;)d[o]=e[o];for(var p=o;++c<l;)d[p+c]=t[c];for(;++a<u;)(h||o<s)&&(d[p+n[a]]=e[o++]);return d}function yi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function mi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],u=r?r(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),i?$n(n,a,u):Kn(n,a,u)}return n}function _i(e,t){return function(n,r){var i=Ns(n)?st:Vn,o=t?t():{};return i(n,e,Ji(r,2),o)}}function bi(e){return Lr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&ao(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=ge(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t}))}function wi(e,t){return function(n,r){if(null==n)return n;if(!Ms(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=ge(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Si(e){return function(t,n,r){for(var i=-1,o=ge(t),s=r(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===n(o[u],u,o))break}return t}}function Ei(e){return function(t){var n=Bt(t=aa(t))?Gt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ci(n,1).join(""):t.slice(1);return r[e]()+i}}function Oi(e){return function(t){return gt(za(ja(t).replace(je,"")),e,"")}}function Ai(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Tn(e.prototype),r=e.apply(n,t);return Ks(r)?r:n}}function Ii(e){return function(t,n,r){var i=ge(t);if(!Ms(t)){var o=Ji(n,3);t=ba(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}}function Ci(e){return Hi((function(t){var n=t.length,r=n,i=kn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new me(o);if(i&&!a&&"wrapper"==Wi(s))var a=new kn([],!0)}for(r=a?r:n;++r<n;){var u=Wi(s=t[r]),c="wrapper"==u?$i(s):void 0;a=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[Wi(c[0])].apply(a,c[3]):1==s.length&&co(s)?a[u]():a.thru(s)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Ns(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Pi(e,t,n,i,o,s,a,u,c,l){var f=128&t,d=1&t,h=2&t,p=24&t,g=512&t,v=h?void 0:Ai(e);return function y(){for(var m=arguments.length,_=r(m),b=m;b--;)_[b]=arguments[b];if(p)var w=Yi(y),S=Mt(_,w);if(i&&(_=gi(_,i,o,p)),s&&(_=vi(_,s,a,p)),m-=S,p&&m<l){var E=qt(_,w);return Mi(e,t,Pi,y.placeholder,n,_,E,u,c,l-m)}var O=d?n:this,A=h?O[e]:e;return m=_.length,u?_=yo(_,u):g&&m>1&&_.reverse(),f&&c<m&&(_.length=c),this&&this!==$e&&this instanceof y&&(A=v||Ai(A)),A.apply(O,_)}}function Ti(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function xi(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Jr(n),r=Jr(r)),i=e(n,r)}return i}}function ki(e){return Hi((function(t){return t=ht(t,xt(Ji())),Lr((function(n){var r=this;return e(t,(function(e){return ot(e,r,n)}))}))}))}function ji(e,t){var n=(t=void 0===t?" ":Xr(t)).length;if(n<2)return n?Dr(t,e):t;var r=Dr(t,Qt(e/Vt(t)));return Bt(t)?ci(Gt(r),0,e).join(""):r.slice(0,e)}function Ni(e){return function(t,n,i){return i&&"number"!=typeof i&&ao(t,n,i)&&(n=i=void 0),t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n,i){for(var o=-1,s=sn(Qt((t-e)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=e,e+=n;return a}(t,n,i=void 0===i?t<n?1:-1:na(i),e)}}function Ri(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=oa(t),n=oa(n)),e(t,n)}}function Mi(e,t,n,r,i,o,s,a,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?s:void 0,l?void 0:o,l?void 0:s,a,u,c],d=n.apply(void 0,f);return co(e)&&_o(d,f),d.placeholder=r,So(d,e,t)}function Ui(e){var t=pe[e];return function(e,n){if(e=oa(e),(n=null==n?0:an(ra(n),292))&&nn(e)){var r=(aa(e)+"e").split("e");return+((r=(aa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Di=gn&&1/Kt(new gn([,-0]))[1]==1/0?function(e){return new gn(e)}:Xa;function Li(e){return function(t){var n=no(t);return n==g?zt(t):n==_?Ht(t):function(e,t){return ht(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Bi(e,t,n,i,a,u,c,l){var f=2&t;if(!f&&"function"!=typeof e)throw new me(o);var d=i?i.length:0;if(d||(t&=-97,i=a=void 0),c=void 0===c?c:sn(ra(c),0),l=void 0===l?l:ra(l),d-=a?a.length:0,64&t){var h=i,p=a;i=a=void 0}var g=f?void 0:$i(e),v=[e,t,n,i,a,h,p,u,c,l];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?gi(c,u,t[4]):u,e[4]=c?qt(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?vi(c,u,t[6]):u,e[6]=c?qt(e[5],s):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:an(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(v,g),e=v[0],t=v[1],n=v[2],i=v[3],a=v[4],!(l=v[9]=void 0===v[9]?f?0:e.length:sn(v[9]-d,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?function(e,t,n){var i=Ai(e);return function o(){for(var s=arguments.length,a=r(s),u=s,c=Yi(o);u--;)a[u]=arguments[u];var l=s<3&&a[0]!==c&&a[s-1]!==c?[]:qt(a,c);if((s-=l.length)<n)return Mi(e,t,Pi,o.placeholder,void 0,a,l,void 0,void 0,n-s);var f=this&&this!==$e&&this instanceof o?i:e;return ot(f,this,a)}}(e,t,l):32!=t&&33!=t||a.length?Pi.apply(void 0,v):function(e,t,n,i){var o=1&t,s=Ai(e);return function t(){for(var a=-1,u=arguments.length,c=-1,l=i.length,f=r(l+u),d=this&&this!==$e&&this instanceof t?s:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++a];return ot(d,o?n:this,f)}}(e,t,n,i);else var y=function(e,t,n){var r=1&t,i=Ai(e);return function t(){var o=this&&this!==$e&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return So((g?qr:_o)(y,v),e,t)}function zi(e,t,n,r){return void 0===e||Ts(e,we[n])&&!Oe.call(r,n)?t:e}function Fi(e,t,n,r,i,o){return Ks(e)&&Ks(t)&&(o.set(t,e),xr(e,t,void 0,Fi,o),o.delete(t)),e}function qi(e){return $s(e)?void 0:e}function Ki(e,t,n,r,i,o){var s=1&n,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,d=2&n?new Un:void 0;for(o.set(e,t),o.set(t,e);++l<a;){var h=e[l],p=t[l];if(r)var g=s?r(p,h,l,t,e,o):r(h,p,l,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(d){if(!yt(t,(function(e,t){if(!jt(d,t)&&(h===e||i(h,e,n,r,o)))return d.push(t)}))){f=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Hi(e){return wo(go(e,void 0,Ro),e+"")}function Vi(e){return dr(e,ba,eo)}function Gi(e){return dr(e,wa,to)}var $i=mn?function(e){return mn.get(e)}:Xa;function Wi(e){for(var t=e.name+"",n=_n[t],r=Oe.call(_n,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Yi(e){return(Oe.call(Pn,"placeholder")?Pn:e).placeholder}function Ji(){var e=Pn.iteratee||$a;return e=e===$a?Er:e,arguments.length?e(arguments[0],arguments[1]):e}function Xi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Qi(e){for(var t=ba(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ho(i)]}return t}function Zi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Sr(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=ge(e),lt(en(e),(function(t){return We.call(e,t)})))}:iu,to=en?function(e){for(var t=[];e;)pt(t,eo(e)),e=Ve(e);return t}:iu,no=hr;function ro(e,t,n){for(var r=-1,i=(t=ai(t,e)).length,o=!1;++r<i;){var s=Io(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&qs(i)&&so(s,i)&&(Ns(e)||js(e))}function io(e){return"function"!=typeof e.constructor||fo(e)?{}:Tn(Ve(e))}function oo(e){return Ns(e)||js(e)||!!(Xe&&e&&e[Xe])}function so(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ue.test(e))&&e>-1&&e%1==0&&e<t}function ao(e,t,n){if(!Ks(n))return!1;var r=typeof t;return!!("number"==r?Ms(n)&&so(t,n.length):"string"==r&&t in n)&&Ts(n[t],e)}function uo(e,t){if(Ns(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xs(e))||(H.test(e)||!K.test(e)||null!=t&&e in ge(t))}function co(e){var t=Wi(e),n=Pn[t];if("function"!=typeof n||!(t in jn.prototype))return!1;if(e===n)return!0;var r=$i(n);return!!r&&e===r[0]}(dn&&no(new dn(new ArrayBuffer(1)))!=O||hn&&no(new hn)!=g||pn&&"[object Promise]"!=no(pn.resolve())||gn&&no(new gn)!=_||vn&&no(new vn)!=S)&&(no=function(e){var t=hr(e),n=t==y?e.constructor:void 0,r=n?Co(n):"";if(r)switch(r){case bn:return O;case wn:return g;case Sn:return"[object Promise]";case En:return _;case On:return S}return t});var lo=Se?zs:ou;function fo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function ho(e){return e==e&&!Ks(e)}function po(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ge(n)))}}function go(e,t,n){return t=sn(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=sn(i.length-t,0),a=r(s);++o<s;)a[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(a),ot(e,this,u)}}function vo(e,t){return t.length<2?e:fr(e,Vr(t,0,-1))}function yo(e,t){for(var n=e.length,r=an(t.length,n),i=yi(e);r--;){var o=t[r];e[r]=so(o,n)?i[o]:void 0}return e}function mo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _o=Eo(qr),bo=Xt||function(e,t){return $e.setTimeout(e,t)},wo=Eo(Kr);function So(e,t,n){var r=t+"";return wo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(X,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return at(a,(function(n){var r="_."+n[0];t&n[1]&&!ft(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Q);return t?t[1].split(Z):[]}(r),n)))}function Eo(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Oo(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Ur(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ao=function(e){var t=Es(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(V,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function Io(e){if("string"==typeof e||Xs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Co(e){if(null!=e){try{return Ee.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Po(e){if(e instanceof jn)return e.clone();var t=new kn(e.__wrapped__,e.__chain__);return t.__actions__=yi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var To=Lr((function(e,t){return Us(e)?Zn(e,or(t,1,Us,!0)):[]})),xo=Lr((function(e,t){var n=Bo(t);return Us(n)&&(n=void 0),Us(e)?Zn(e,or(t,1,Us,!0),Ji(n,2)):[]})),ko=Lr((function(e,t){var n=Bo(t);return Us(n)&&(n=void 0),Us(e)?Zn(e,or(t,1,Us,!0),void 0,n):[]}));function jo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=sn(r+i,0)),bt(e,Ji(t,3),i)}function No(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ra(n),i=n<0?sn(r+i,0):an(i,r-1)),bt(e,Ji(t,3),i,!0)}function Ro(e){return(null==e?0:e.length)?or(e,1):[]}function Mo(e){return e&&e.length?e[0]:void 0}var Uo=Lr((function(e){var t=ht(e,oi);return t.length&&t[0]===e[0]?yr(t):[]})),Do=Lr((function(e){var t=Bo(e),n=ht(e,oi);return t===Bo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?yr(n,Ji(t,2)):[]})),Lo=Lr((function(e){var t=Bo(e),n=ht(e,oi);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?yr(n,void 0,t):[]}));function Bo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var zo=Lr(Fo);function Fo(e,t){return e&&e.length&&t&&t.length?Rr(e,t):e}var qo=Hi((function(e,t){var n=null==e?0:e.length,r=Wn(e,t);return Mr(e,ht(t,(function(e){return so(e,n)?+e:e})).sort(pi)),r}));function Ko(e){return null==e?e:fn.call(e)}var Ho=Lr((function(e){return Qr(or(e,1,Us,!0))})),Vo=Lr((function(e){var t=Bo(e);return Us(t)&&(t=void 0),Qr(or(e,1,Us,!0),Ji(t,2))})),Go=Lr((function(e){var t=Bo(e);return t="function"==typeof t?t:void 0,Qr(or(e,1,Us,!0),void 0,t)}));function $o(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(Us(e))return t=sn(e.length,t),!0})),Tt(t,(function(t){return ht(e,At(t))}))}function Wo(e,t){if(!e||!e.length)return[];var n=$o(e);return null==t?n:ht(n,(function(e){return ot(t,void 0,e)}))}var Yo=Lr((function(e,t){return Us(e)?Zn(e,t):[]})),Jo=Lr((function(e){return ri(lt(e,Us))})),Xo=Lr((function(e){var t=Bo(e);return Us(t)&&(t=void 0),ri(lt(e,Us),Ji(t,2))})),Qo=Lr((function(e){var t=Bo(e);return t="function"==typeof t?t:void 0,ri(lt(e,Us),void 0,t)})),Zo=Lr($o);var es=Lr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Wo(e,n)}));function ts(e){var t=Pn(e);return t.__chain__=!0,t}function ns(e,t){return t(e)}var rs=Hi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Wn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof jn&&so(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ns,args:[i],thisArg:void 0}),new kn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var is=_i((function(e,t,n){Oe.call(e,n)?++e[n]:$n(e,n,1)}));var os=Ii(jo),ss=Ii(No);function as(e,t){return(Ns(e)?at:er)(e,Ji(t,3))}function us(e,t){return(Ns(e)?ut:tr)(e,Ji(t,3))}var cs=_i((function(e,t,n){Oe.call(e,n)?e[n].push(t):$n(e,n,[t])}));var ls=Lr((function(e,t,n){var i=-1,o="function"==typeof t,s=Ms(e)?r(e.length):[];return er(e,(function(e){s[++i]=o?ot(t,e,n):mr(e,t,n)})),s})),fs=_i((function(e,t,n){$n(e,n,t)}));function ds(e,t){return(Ns(e)?ht:Cr)(e,Ji(t,3))}var hs=_i((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ps=Lr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ao(e,t[0],t[1])?t=[]:n>2&&ao(t[0],t[1],t[2])&&(t=[t[0]]),jr(e,or(t,1),[])})),gs=Jt||function(){return $e.Date.now()};function vs(e,t,n){return t=n?void 0:t,Bi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ys(e,t){var n;if("function"!=typeof t)throw new me(o);return e=ra(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ms=Lr((function(e,t,n){var r=1;if(n.length){var i=qt(n,Yi(ms));r|=32}return Bi(e,r,t,n,i)})),_s=Lr((function(e,t,n){var r=3;if(n.length){var i=qt(n,Yi(_s));r|=32}return Bi(t,r,e,n,i)}));function bs(e,t,n){var r,i,s,a,u,c,l=0,f=!1,d=!1,h=!0;if("function"!=typeof e)throw new me(o);function p(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function g(e){return l=e,u=bo(y,t),f?p(e):a}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=s}function y(){var e=gs();if(v(e))return m(e);u=bo(y,function(e){var n=t-(e-c);return d?an(n,s-(e-l)):n}(e))}function m(e){return u=void 0,h&&r?p(e):(r=i=void 0,a)}function _(){var e=gs(),n=v(e);if(r=arguments,i=this,c=e,n){if(void 0===u)return g(c);if(d)return li(u),u=bo(y,t),p(c)}return void 0===u&&(u=bo(y,t)),a}return t=oa(t)||0,Ks(n)&&(f=!!n.leading,s=(d="maxWait"in n)?sn(oa(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==u&&li(u),l=0,r=c=i=u=void 0},_.flush=function(){return void 0===u?a:m(gs())},_}var ws=Lr((function(e,t){return Qn(e,1,t)})),Ss=Lr((function(e,t,n){return Qn(e,oa(t)||0,n)}));function Es(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new me(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Es.Cache||Mn),n}function Os(e){if("function"!=typeof e)throw new me(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Es.Cache=Mn;var As=ui((function(e,t){var n=(t=1==t.length&&Ns(t[0])?ht(t[0],xt(Ji())):ht(or(t,1),xt(Ji()))).length;return Lr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ot(e,this,r)}))})),Is=Lr((function(e,t){return Bi(e,32,void 0,t,qt(t,Yi(Is)))})),Cs=Lr((function(e,t){return Bi(e,64,void 0,t,qt(t,Yi(Cs)))})),Ps=Hi((function(e,t){return Bi(e,256,void 0,void 0,void 0,t)}));function Ts(e,t){return e===t||e!=e&&t!=t}var xs=Ri(pr),ks=Ri((function(e,t){return e>=t})),js=_r(function(){return arguments}())?_r:function(e){return Hs(e)&&Oe.call(e,"callee")&&!We.call(e,"callee")},Ns=r.isArray,Rs=Ze?xt(Ze):function(e){return Hs(e)&&hr(e)==E};function Ms(e){return null!=e&&qs(e.length)&&!zs(e)}function Us(e){return Hs(e)&&Ms(e)}var Ds=tn||ou,Ls=et?xt(et):function(e){return Hs(e)&&hr(e)==f};function Bs(e){if(!Hs(e))return!1;var t=hr(e);return t==d||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!$s(e)}function zs(e){if(!Ks(e))return!1;var t=hr(e);return t==h||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Fs(e){return"number"==typeof e&&e==ra(e)}function qs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ks(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Hs(e){return null!=e&&"object"==typeof e}var Vs=tt?xt(tt):function(e){return Hs(e)&&no(e)==g};function Gs(e){return"number"==typeof e||Hs(e)&&hr(e)==v}function $s(e){if(!Hs(e)||hr(e)!=y)return!1;var t=Ve(e);if(null===t)return!0;var n=Oe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ee.call(n)==Pe}var Ws=nt?xt(nt):function(e){return Hs(e)&&hr(e)==m};var Ys=rt?xt(rt):function(e){return Hs(e)&&no(e)==_};function Js(e){return"string"==typeof e||!Ns(e)&&Hs(e)&&hr(e)==b}function Xs(e){return"symbol"==typeof e||Hs(e)&&hr(e)==w}var Qs=it?xt(it):function(e){return Hs(e)&&qs(e.length)&&!!ze[hr(e)]};var Zs=Ri(Ir),ea=Ri((function(e,t){return e<=t}));function ta(e){if(!e)return[];if(Ms(e))return Js(e)?Gt(e):yi(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=no(e);return(t==g?zt:t==_?Kt:Ta)(e)}function na(e){return e?(e=oa(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ra(e){var t=na(e),n=t%1;return t==t?n?t-n:t:0}function ia(e){return e?Yn(ra(e),0,4294967295):0}function oa(e){if("number"==typeof e)return e;if(Xs(e))return NaN;if(Ks(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ks(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(W,"");var n=oe.test(e);return n||ae.test(e)?He(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function sa(e){return mi(e,wa(e))}function aa(e){return null==e?"":Xr(e)}var ua=bi((function(e,t){if(fo(t)||Ms(t))mi(t,ba(t),e);else for(var n in t)Oe.call(t,n)&&Kn(e,n,t[n])})),ca=bi((function(e,t){mi(t,wa(t),e)})),la=bi((function(e,t,n,r){mi(t,wa(t),e,r)})),fa=bi((function(e,t,n,r){mi(t,ba(t),e,r)})),da=Hi(Wn);var ha=Lr((function(e,t){e=ge(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&ao(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=wa(o),a=-1,u=s.length;++a<u;){var c=s[a],l=e[c];(void 0===l||Ts(l,we[c])&&!Oe.call(e,c))&&(e[c]=o[c])}return e})),pa=Lr((function(e){return e.push(void 0,Fi),ot(Ea,void 0,e)}));function ga(e,t,n){var r=null==e?void 0:fr(e,t);return void 0===r?n:r}function va(e,t){return null!=e&&ro(e,t,vr)}var ya=Ti((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),e[t]=n}),Ka(Ga)),ma=Ti((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),Oe.call(e,t)?e[t].push(n):e[t]=[n]}),Ji),_a=Lr(mr);function ba(e){return Ms(e)?Ln(e):Or(e)}function wa(e){return Ms(e)?Ln(e,!0):Ar(e)}var Sa=bi((function(e,t,n){xr(e,t,n)})),Ea=bi((function(e,t,n,r){xr(e,t,n,r)})),Oa=Hi((function(e,t){var n={};if(null==e)return n;var r=!1;t=ht(t,(function(t){return t=ai(t,e),r||(r=t.length>1),t})),mi(e,Gi(e),n),r&&(n=Jn(n,7,qi));for(var i=t.length;i--;)Zr(n,t[i]);return n}));var Aa=Hi((function(e,t){return null==e?{}:function(e,t){return Nr(e,t,(function(t,n){return va(e,n)}))}(e,t)}));function Ia(e,t){if(null==e)return{};var n=ht(Gi(e),(function(e){return[e]}));return t=Ji(t),Nr(e,n,(function(e,n){return t(e,n[0])}))}var Ca=Li(ba),Pa=Li(wa);function Ta(e){return null==e?[]:kt(e,ba(e))}var xa=Oi((function(e,t,n){return t=t.toLowerCase(),e+(n?ka(t):t)}));function ka(e){return Ba(aa(e).toLowerCase())}function ja(e){return(e=aa(e))&&e.replace(ce,Ut).replace(Ne,"")}var Na=Oi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ra=Oi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ma=Ei("toLowerCase");var Ua=Oi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Da=Oi((function(e,t,n){return e+(n?" ":"")+Ba(t)}));var La=Oi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ba=Ei("toUpperCase");function za(e,t,n){return e=aa(e),void 0===(t=n?void 0:t)?function(e){return De.test(e)}(e)?function(e){return e.match(Me)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Fa=Lr((function(e,t){try{return ot(e,void 0,t)}catch(e){return Bs(e)?e:new de(e)}})),qa=Hi((function(e,t){return at(t,(function(t){t=Io(t),$n(e,t,ms(e[t],e))})),e}));function Ka(e){return function(){return e}}var Ha=Ci(),Va=Ci(!0);function Ga(e){return e}function $a(e){return Er("function"==typeof e?e:Jn(e,1))}var Wa=Lr((function(e,t){return function(n){return mr(n,e,t)}})),Ya=Lr((function(e,t){return function(n){return mr(e,n,t)}}));function Ja(e,t,n){var r=ba(t),i=lr(t,r);null!=n||Ks(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=lr(t,ba(t)));var o=!(Ks(n)&&"chain"in n&&!n.chain),s=zs(e);return at(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=yi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,pt([this.value()],arguments))})})),e}function Xa(){}var Qa=ki(ht),Za=ki(ct),eu=ki(yt);function tu(e){return uo(e)?At(Io(e)):function(e){return function(t){return fr(t,e)}}(e)}var nu=Ni(),ru=Ni(!0);function iu(){return[]}function ou(){return!1}var su=xi((function(e,t){return e+t}),0),au=Ui("ceil"),uu=xi((function(e,t){return e/t}),1),cu=Ui("floor");var lu,fu=xi((function(e,t){return e*t}),1),du=Ui("round"),hu=xi((function(e,t){return e-t}),0);return Pn.after=function(e,t){if("function"!=typeof t)throw new me(o);return e=ra(e),function(){if(--e<1)return t.apply(this,arguments)}},Pn.ary=vs,Pn.assign=ua,Pn.assignIn=ca,Pn.assignInWith=la,Pn.assignWith=fa,Pn.at=da,Pn.before=ys,Pn.bind=ms,Pn.bindAll=qa,Pn.bindKey=_s,Pn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ns(e)?e:[e]},Pn.chain=ts,Pn.chunk=function(e,t,n){t=(n?ao(e,t,n):void 0===t)?1:sn(ra(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=r(Qt(i/t));o<i;)a[s++]=Vr(e,o,o+=t);return a},Pn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Pn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return pt(Ns(n)?yi(n):[n],or(t,1))},Pn.cond=function(e){var t=null==e?0:e.length,n=Ji();return e=t?ht(e,(function(e){if("function"!=typeof e[1])throw new me(o);return[n(e[0]),e[1]]})):[],Lr((function(n){for(var r=-1;++r<t;){var i=e[r];if(ot(i[0],this,n))return ot(i[1],this,n)}}))},Pn.conforms=function(e){return function(e){var t=ba(e);return function(n){return Xn(n,e,t)}}(Jn(e,1))},Pn.constant=Ka,Pn.countBy=is,Pn.create=function(e,t){var n=Tn(e);return null==t?n:Gn(n,t)},Pn.curry=function e(t,n,r){var i=Bi(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Pn.curryRight=function e(t,n,r){var i=Bi(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Pn.debounce=bs,Pn.defaults=ha,Pn.defaultsDeep=pa,Pn.defer=ws,Pn.delay=Ss,Pn.difference=To,Pn.differenceBy=xo,Pn.differenceWith=ko,Pn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Vr(e,(t=n||void 0===t?1:ra(t))<0?0:t,r):[]},Pn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Vr(e,0,(t=r-(t=n||void 0===t?1:ra(t)))<0?0:t):[]},Pn.dropRightWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!0,!0):[]},Pn.dropWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!0):[]},Pn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ao(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ra(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ra(r))<0&&(r+=i),r=n>r?0:ia(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Pn.filter=function(e,t){return(Ns(e)?lt:ir)(e,Ji(t,3))},Pn.flatMap=function(e,t){return or(ds(e,t),1)},Pn.flatMapDeep=function(e,t){return or(ds(e,t),1/0)},Pn.flatMapDepth=function(e,t,n){return n=void 0===n?1:ra(n),or(ds(e,t),n)},Pn.flatten=Ro,Pn.flattenDeep=function(e){return(null==e?0:e.length)?or(e,1/0):[]},Pn.flattenDepth=function(e,t){return(null==e?0:e.length)?or(e,t=void 0===t?1:ra(t)):[]},Pn.flip=function(e){return Bi(e,512)},Pn.flow=Ha,Pn.flowRight=Va,Pn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Pn.functions=function(e){return null==e?[]:lr(e,ba(e))},Pn.functionsIn=function(e){return null==e?[]:lr(e,wa(e))},Pn.groupBy=cs,Pn.initial=function(e){return(null==e?0:e.length)?Vr(e,0,-1):[]},Pn.intersection=Uo,Pn.intersectionBy=Do,Pn.intersectionWith=Lo,Pn.invert=ya,Pn.invertBy=ma,Pn.invokeMap=ls,Pn.iteratee=$a,Pn.keyBy=fs,Pn.keys=ba,Pn.keysIn=wa,Pn.map=ds,Pn.mapKeys=function(e,t){var n={};return t=Ji(t,3),ur(e,(function(e,r,i){$n(n,t(e,r,i),e)})),n},Pn.mapValues=function(e,t){var n={};return t=Ji(t,3),ur(e,(function(e,r,i){$n(n,r,t(e,r,i))})),n},Pn.matches=function(e){return Pr(Jn(e,1))},Pn.matchesProperty=function(e,t){return Tr(e,Jn(t,1))},Pn.memoize=Es,Pn.merge=Sa,Pn.mergeWith=Ea,Pn.method=Wa,Pn.methodOf=Ya,Pn.mixin=Ja,Pn.negate=Os,Pn.nthArg=function(e){return e=ra(e),Lr((function(t){return kr(t,e)}))},Pn.omit=Oa,Pn.omitBy=function(e,t){return Ia(e,Os(Ji(t)))},Pn.once=function(e){return ys(2,e)},Pn.orderBy=function(e,t,n,r){return null==e?[]:(Ns(t)||(t=null==t?[]:[t]),Ns(n=r?void 0:n)||(n=null==n?[]:[n]),jr(e,t,n))},Pn.over=Qa,Pn.overArgs=As,Pn.overEvery=Za,Pn.overSome=eu,Pn.partial=Is,Pn.partialRight=Cs,Pn.partition=hs,Pn.pick=Aa,Pn.pickBy=Ia,Pn.property=tu,Pn.propertyOf=function(e){return function(t){return null==e?void 0:fr(e,t)}},Pn.pull=zo,Pn.pullAll=Fo,Pn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,Ji(n,2)):e},Pn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,void 0,n):e},Pn.pullAt=qo,Pn.range=nu,Pn.rangeRight=ru,Pn.rearg=Ps,Pn.reject=function(e,t){return(Ns(e)?lt:ir)(e,Os(Ji(t,3)))},Pn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ji(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Mr(e,i),n},Pn.rest=function(e,t){if("function"!=typeof e)throw new me(o);return Lr(e,t=void 0===t?t:ra(t))},Pn.reverse=Ko,Pn.sampleSize=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ra(t),(Ns(e)?zn:zr)(e,t)},Pn.set=function(e,t,n){return null==e?e:Fr(e,t,n)},Pn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Fr(e,t,n,r)},Pn.shuffle=function(e){return(Ns(e)?Fn:Hr)(e)},Pn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ao(e,t,n)?(t=0,n=r):(t=null==t?0:ra(t),n=void 0===n?r:ra(n)),Vr(e,t,n)):[]},Pn.sortBy=ps,Pn.sortedUniq=function(e){return e&&e.length?Yr(e):[]},Pn.sortedUniqBy=function(e,t){return e&&e.length?Yr(e,Ji(t,2)):[]},Pn.split=function(e,t,n){return n&&"number"!=typeof n&&ao(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=aa(e))&&("string"==typeof t||null!=t&&!Ws(t))&&!(t=Xr(t))&&Bt(e)?ci(Gt(e),0,n):e.split(t,n):[]},Pn.spread=function(e,t){if("function"!=typeof e)throw new me(o);return t=null==t?0:sn(ra(t),0),Lr((function(n){var r=n[t],i=ci(n,0,t);return r&&pt(i,r),ot(e,this,i)}))},Pn.tail=function(e){var t=null==e?0:e.length;return t?Vr(e,1,t):[]},Pn.take=function(e,t,n){return e&&e.length?Vr(e,0,(t=n||void 0===t?1:ra(t))<0?0:t):[]},Pn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Vr(e,(t=r-(t=n||void 0===t?1:ra(t)))<0?0:t,r):[]},Pn.takeRightWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!1,!0):[]},Pn.takeWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3)):[]},Pn.tap=function(e,t){return t(e),e},Pn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new me(o);return Ks(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),bs(e,t,{leading:r,maxWait:t,trailing:i})},Pn.thru=ns,Pn.toArray=ta,Pn.toPairs=Ca,Pn.toPairsIn=Pa,Pn.toPath=function(e){return Ns(e)?ht(e,Io):Xs(e)?[e]:yi(Ao(aa(e)))},Pn.toPlainObject=sa,Pn.transform=function(e,t,n){var r=Ns(e),i=r||Ds(e)||Qs(e);if(t=Ji(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ks(e)&&zs(o)?Tn(Ve(e)):{}}return(i?at:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},Pn.unary=function(e){return vs(e,1)},Pn.union=Ho,Pn.unionBy=Vo,Pn.unionWith=Go,Pn.uniq=function(e){return e&&e.length?Qr(e):[]},Pn.uniqBy=function(e,t){return e&&e.length?Qr(e,Ji(t,2)):[]},Pn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qr(e,void 0,t):[]},Pn.unset=function(e,t){return null==e||Zr(e,t)},Pn.unzip=$o,Pn.unzipWith=Wo,Pn.update=function(e,t,n){return null==e?e:ei(e,t,si(n))},Pn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,si(n),r)},Pn.values=Ta,Pn.valuesIn=function(e){return null==e?[]:kt(e,wa(e))},Pn.without=Yo,Pn.words=za,Pn.wrap=function(e,t){return Is(si(t),e)},Pn.xor=Jo,Pn.xorBy=Xo,Pn.xorWith=Qo,Pn.zip=Zo,Pn.zipObject=function(e,t){return ii(e||[],t||[],Kn)},Pn.zipObjectDeep=function(e,t){return ii(e||[],t||[],Fr)},Pn.zipWith=es,Pn.entries=Ca,Pn.entriesIn=Pa,Pn.extend=ca,Pn.extendWith=la,Ja(Pn,Pn),Pn.add=su,Pn.attempt=Fa,Pn.camelCase=xa,Pn.capitalize=ka,Pn.ceil=au,Pn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=oa(n))==n?n:0),void 0!==t&&(t=(t=oa(t))==t?t:0),Yn(oa(e),t,n)},Pn.clone=function(e){return Jn(e,4)},Pn.cloneDeep=function(e){return Jn(e,5)},Pn.cloneDeepWith=function(e,t){return Jn(e,5,t="function"==typeof t?t:void 0)},Pn.cloneWith=function(e,t){return Jn(e,4,t="function"==typeof t?t:void 0)},Pn.conformsTo=function(e,t){return null==t||Xn(e,t,ba(t))},Pn.deburr=ja,Pn.defaultTo=function(e,t){return null==e||e!=e?t:e},Pn.divide=uu,Pn.endsWith=function(e,t,n){e=aa(e),t=Xr(t);var r=e.length,i=n=void 0===n?r:Yn(ra(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Pn.eq=Ts,Pn.escape=function(e){return(e=aa(e))&&B.test(e)?e.replace(D,Dt):e},Pn.escapeRegExp=function(e){return(e=aa(e))&&$.test(e)?e.replace(G,"\\$&"):e},Pn.every=function(e,t,n){var r=Ns(e)?ct:nr;return n&&ao(e,t,n)&&(t=void 0),r(e,Ji(t,3))},Pn.find=os,Pn.findIndex=jo,Pn.findKey=function(e,t){return _t(e,Ji(t,3),ur)},Pn.findLast=ss,Pn.findLastIndex=No,Pn.findLastKey=function(e,t){return _t(e,Ji(t,3),cr)},Pn.floor=cu,Pn.forEach=as,Pn.forEachRight=us,Pn.forIn=function(e,t){return null==e?e:sr(e,Ji(t,3),wa)},Pn.forInRight=function(e,t){return null==e?e:ar(e,Ji(t,3),wa)},Pn.forOwn=function(e,t){return e&&ur(e,Ji(t,3))},Pn.forOwnRight=function(e,t){return e&&cr(e,Ji(t,3))},Pn.get=ga,Pn.gt=xs,Pn.gte=ks,Pn.has=function(e,t){return null!=e&&ro(e,t,gr)},Pn.hasIn=va,Pn.head=Mo,Pn.identity=Ga,Pn.includes=function(e,t,n,r){e=Ms(e)?e:Ta(e),n=n&&!r?ra(n):0;var i=e.length;return n<0&&(n=sn(i+n,0)),Js(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&wt(e,t,n)>-1},Pn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=sn(r+i,0)),wt(e,t,i)},Pn.inRange=function(e,t,n){return t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n){return e>=an(t,n)&&e<sn(t,n)}(e=oa(e),t,n)},Pn.invoke=_a,Pn.isArguments=js,Pn.isArray=Ns,Pn.isArrayBuffer=Rs,Pn.isArrayLike=Ms,Pn.isArrayLikeObject=Us,Pn.isBoolean=function(e){return!0===e||!1===e||Hs(e)&&hr(e)==l},Pn.isBuffer=Ds,Pn.isDate=Ls,Pn.isElement=function(e){return Hs(e)&&1===e.nodeType&&!$s(e)},Pn.isEmpty=function(e){if(null==e)return!0;if(Ms(e)&&(Ns(e)||"string"==typeof e||"function"==typeof e.splice||Ds(e)||Qs(e)||js(e)))return!e.length;var t=no(e);if(t==g||t==_)return!e.size;if(fo(e))return!Or(e).length;for(var n in e)if(Oe.call(e,n))return!1;return!0},Pn.isEqual=function(e,t){return br(e,t)},Pn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?br(e,t,void 0,n):!!r},Pn.isError=Bs,Pn.isFinite=function(e){return"number"==typeof e&&nn(e)},Pn.isFunction=zs,Pn.isInteger=Fs,Pn.isLength=qs,Pn.isMap=Vs,Pn.isMatch=function(e,t){return e===t||wr(e,t,Qi(t))},Pn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,wr(e,t,Qi(t),n)},Pn.isNaN=function(e){return Gs(e)&&e!=+e},Pn.isNative=function(e){if(lo(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Sr(e)},Pn.isNil=function(e){return null==e},Pn.isNull=function(e){return null===e},Pn.isNumber=Gs,Pn.isObject=Ks,Pn.isObjectLike=Hs,Pn.isPlainObject=$s,Pn.isRegExp=Ws,Pn.isSafeInteger=function(e){return Fs(e)&&e>=-9007199254740991&&e<=9007199254740991},Pn.isSet=Ys,Pn.isString=Js,Pn.isSymbol=Xs,Pn.isTypedArray=Qs,Pn.isUndefined=function(e){return void 0===e},Pn.isWeakMap=function(e){return Hs(e)&&no(e)==S},Pn.isWeakSet=function(e){return Hs(e)&&"[object WeakSet]"==hr(e)},Pn.join=function(e,t){return null==e?"":rn.call(e,t)},Pn.kebabCase=Na,Pn.last=Bo,Pn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ra(n))<0?sn(r+i,0):an(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):bt(e,Et,i,!0)},Pn.lowerCase=Ra,Pn.lowerFirst=Ma,Pn.lt=Zs,Pn.lte=ea,Pn.max=function(e){return e&&e.length?rr(e,Ga,pr):void 0},Pn.maxBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),pr):void 0},Pn.mean=function(e){return Ot(e,Ga)},Pn.meanBy=function(e,t){return Ot(e,Ji(t,2))},Pn.min=function(e){return e&&e.length?rr(e,Ga,Ir):void 0},Pn.minBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),Ir):void 0},Pn.stubArray=iu,Pn.stubFalse=ou,Pn.stubObject=function(){return{}},Pn.stubString=function(){return""},Pn.stubTrue=function(){return!0},Pn.multiply=fu,Pn.nth=function(e,t){return e&&e.length?kr(e,ra(t)):void 0},Pn.noConflict=function(){return $e._===this&&($e._=Te),this},Pn.noop=Xa,Pn.now=gs,Pn.pad=function(e,t,n){e=aa(e);var r=(t=ra(t))?Vt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ji(Zt(i),n)+e+ji(Qt(i),n)},Pn.padEnd=function(e,t,n){e=aa(e);var r=(t=ra(t))?Vt(e):0;return t&&r<t?e+ji(t-r,n):e},Pn.padStart=function(e,t,n){e=aa(e);var r=(t=ra(t))?Vt(e):0;return t&&r<t?ji(t-r,n)+e:e},Pn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(aa(e).replace(Y,""),t||0)},Pn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ao(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=na(e),void 0===t?(t=e,e=0):t=na(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ln();return an(e+i*(t-e+Ke("1e-"+((i+"").length-1))),t)}return Ur(e,t)},Pn.reduce=function(e,t,n){var r=Ns(e)?gt:Ct,i=arguments.length<3;return r(e,Ji(t,4),n,i,er)},Pn.reduceRight=function(e,t,n){var r=Ns(e)?vt:Ct,i=arguments.length<3;return r(e,Ji(t,4),n,i,tr)},Pn.repeat=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ra(t),Dr(aa(e),t)},Pn.replace=function(){var e=arguments,t=aa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Pn.result=function(e,t,n){var r=-1,i=(t=ai(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Io(t[r])];void 0===o&&(r=i,o=n),e=zs(o)?o.call(e):o}return e},Pn.round=du,Pn.runInContext=e,Pn.sample=function(e){return(Ns(e)?Bn:Br)(e)},Pn.size=function(e){if(null==e)return 0;if(Ms(e))return Js(e)?Vt(e):e.length;var t=no(e);return t==g||t==_?e.size:Or(e).length},Pn.snakeCase=Ua,Pn.some=function(e,t,n){var r=Ns(e)?yt:Gr;return n&&ao(e,t,n)&&(t=void 0),r(e,Ji(t,3))},Pn.sortedIndex=function(e,t){return $r(e,t)},Pn.sortedIndexBy=function(e,t,n){return Wr(e,t,Ji(n,2))},Pn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=$r(e,t);if(r<n&&Ts(e[r],t))return r}return-1},Pn.sortedLastIndex=function(e,t){return $r(e,t,!0)},Pn.sortedLastIndexBy=function(e,t,n){return Wr(e,t,Ji(n,2),!0)},Pn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=$r(e,t,!0)-1;if(Ts(e[n],t))return n}return-1},Pn.startCase=Da,Pn.startsWith=function(e,t,n){return e=aa(e),n=null==n?0:Yn(ra(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},Pn.subtract=hu,Pn.sum=function(e){return e&&e.length?Pt(e,Ga):0},Pn.sumBy=function(e,t){return e&&e.length?Pt(e,Ji(t,2)):0},Pn.template=function(e,t,n){var r=Pn.templateSettings;n&&ao(e,t,n)&&(t=void 0),e=aa(e),t=la({},t,r,zi);var i,o,s=la({},t.imports,r.imports,zi),a=ba(s),u=kt(s,a),c=0,l=t.interpolate||le,f="__p += '",d=ve((t.escape||le).source+"|"+l.source+"|"+(l===q?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),h="//# sourceURL="+(Oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Be+"]")+"\n";e.replace(d,(function(t,n,r,s,a,u){return r||(r=s),f+=e.slice(c,u).replace(fe,Lt),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var p=Oe.call(t,"variable")&&t.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(N,""):f).replace(R,"$1").replace(M,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Fa((function(){return he(a,h+"return "+f).apply(void 0,u)}));if(g.source=f,Bs(g))throw g;return g},Pn.times=function(e,t){if((e=ra(e))<1||e>9007199254740991)return[];var n=4294967295,r=an(e,4294967295);e-=4294967295;for(var i=Tt(r,t=Ji(t));++n<e;)t(n);return i},Pn.toFinite=na,Pn.toInteger=ra,Pn.toLength=ia,Pn.toLower=function(e){return aa(e).toLowerCase()},Pn.toNumber=oa,Pn.toSafeInteger=function(e){return e?Yn(ra(e),-9007199254740991,9007199254740991):0===e?e:0},Pn.toString=aa,Pn.toUpper=function(e){return aa(e).toUpperCase()},Pn.trim=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(W,"");if(!e||!(t=Xr(t)))return e;var r=Gt(e),i=Gt(t);return ci(r,Nt(r,i),Rt(r,i)+1).join("")},Pn.trimEnd=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(J,"");if(!e||!(t=Xr(t)))return e;var r=Gt(e);return ci(r,0,Rt(r,Gt(t))+1).join("")},Pn.trimStart=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Xr(t)))return e;var r=Gt(e);return ci(r,Nt(r,Gt(t))).join("")},Pn.truncate=function(e,t){var n=30,r="...";if(Ks(t)){var i="separator"in t?t.separator:i;n="length"in t?ra(t.length):n,r="omission"in t?Xr(t.omission):r}var o=(e=aa(e)).length;if(Bt(e)){var s=Gt(e);o=s.length}if(n>=o)return e;var a=n-Vt(r);if(a<1)return r;var u=s?ci(s,0,a).join(""):e.slice(0,a);if(void 0===i)return u+r;if(s&&(a+=u.length-a),Ws(i)){if(e.slice(a).search(i)){var c,l=u;for(i.global||(i=ve(i.source,aa(re.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,void 0===f?a:f)}}else if(e.indexOf(Xr(i),a)!=a){var d=u.lastIndexOf(i);d>-1&&(u=u.slice(0,d))}return u+r},Pn.unescape=function(e){return(e=aa(e))&&L.test(e)?e.replace(U,$t):e},Pn.uniqueId=function(e){var t=++Ae;return aa(e)+t},Pn.upperCase=La,Pn.upperFirst=Ba,Pn.each=as,Pn.eachRight=us,Pn.first=Mo,Ja(Pn,(lu={},ur(Pn,(function(e,t){Oe.call(Pn.prototype,t)||(lu[t]=e)})),lu),{chain:!1}),Pn.VERSION="4.17.15",at(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Pn[e].placeholder=Pn})),at(["drop","take"],(function(e,t){jn.prototype[e]=function(n){n=void 0===n?1:sn(ra(n),0);var r=this.__filtered__&&!t?new jn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},jn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),at(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;jn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ji(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),at(["head","last"],(function(e,t){var n="take"+(t?"Right":"");jn.prototype[e]=function(){return this[n](1).value()[0]}})),at(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");jn.prototype[e]=function(){return this.__filtered__?new jn(this):this[n](1)}})),jn.prototype.compact=function(){return this.filter(Ga)},jn.prototype.find=function(e){return this.filter(e).head()},jn.prototype.findLast=function(e){return this.reverse().find(e)},jn.prototype.invokeMap=Lr((function(e,t){return"function"==typeof e?new jn(this):this.map((function(n){return mr(n,e,t)}))})),jn.prototype.reject=function(e){return this.filter(Os(Ji(e)))},jn.prototype.slice=function(e,t){e=ra(e);var n=this;return n.__filtered__&&(e>0||t<0)?new jn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ra(t))<0?n.dropRight(-t):n.take(t-e)),n)},jn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},jn.prototype.toArray=function(){return this.take(4294967295)},ur(jn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Pn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Pn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,a=t instanceof jn,u=s[0],c=a||Ns(t),l=function(e){var t=i.apply(Pn,pt([e],s));return r&&f?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(a=c=!1);var f=this.__chain__,d=!!this.__actions__.length,h=o&&!f,p=a&&!d;if(!o&&c){t=p?t:new jn(this);var g=e.apply(t,s);return g.__actions__.push({func:ns,args:[l],thisArg:void 0}),new kn(g,f)}return h&&p?e.apply(this,s):(g=this.thru(l),h?r?g.value()[0]:g.value():g)})})),at(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Pn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ns(i)?i:[],e)}return this[n]((function(n){return t.apply(Ns(n)?n:[],e)}))}})),ur(jn.prototype,(function(e,t){var n=Pn[t];if(n){var r=n.name+"";Oe.call(_n,r)||(_n[r]=[]),_n[r].push({name:t,func:n})}})),_n[Pi(void 0,2).name]=[{name:"wrapper",func:void 0}],jn.prototype.clone=function(){var e=new jn(this.__wrapped__);return e.__actions__=yi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=yi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=yi(this.__views__),e},jn.prototype.reverse=function(){if(this.__filtered__){var e=new jn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},jn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ns(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=an(t,e+s);break;case"takeRight":e=sn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,f=l.length,d=0,h=an(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return ni(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var g=-1,v=e[c+=t];++g<f;){var y=l[g],m=y.iteratee,_=y.type,b=m(v);if(2==_)v=b;else if(!b){if(1==_)continue e;break e}}p[d++]=v}return p},Pn.prototype.at=rs,Pn.prototype.chain=function(){return ts(this)},Pn.prototype.commit=function(){return new kn(this.value(),this.__chain__)},Pn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Pn.prototype.plant=function(e){for(var t,n=this;n instanceof xn;){var r=Po(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Pn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof jn){var t=e;return this.__actions__.length&&(t=new jn(this)),(t=t.reverse()).__actions__.push({func:ns,args:[Ko],thisArg:void 0}),new kn(t,this.__chain__)}return this.thru(Ko)},Pn.prototype.toJSON=Pn.prototype.valueOf=Pn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Pn.prototype.first=Pn.prototype.head,Qe&&(Pn.prototype[Qe]=function(){return this}),Pn}();$e._=Wt,void 0===(i=function(){return Wt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(52),n(62)(e))},function(e,t,n){var r=n(186),i=n(187),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r;e.exports=(r=r||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,c=e.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var f=r.splice(0,u);n.sigBytes-=c}return new s.init(f,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3);function o(e){var t=this;return function(n){return function(o){return r.__awaiter(t,void 0,void 0,(function(){var t,s,a,u,c;return r.__generator(this,(function(l){return t=o.request,i.HttpRequest.isInstance(t)&&(s=t.body,a=t.headers,s&&-1===Object.keys(a).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(u=e(s))&&(t.headers=r.__assign(r.__assign({},t.headers),((c={})["content-length"]=String(u),c)))),[2,n(r.__assign(r.__assign({},o),{request:t}))]}))}))}}}t.contentLengthMiddleware=o,t.contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"},t.getContentLengthPlugin=function(e){return{applyToStack:function(n){n.add(o(e.bodyLengthChecker),t.contentLengthMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(171),t);var r=n(93);t.Ie11Sha256=r.Sha256;var i=n(96);t.WebCryptoSha256=i.Sha256},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(180),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98);t.parseUrl=function(e){var t,n=new URL(e),i=n.hostname,o=n.pathname,s=n.port,a=n.protocol,u=n.search;return u&&(t=r.parseQueryString(u)),{hostname:i,port:s?parseInt(s):void 0,protocol:a,path:o,query:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBodyLength=function(e){return"string"==typeof e?e.length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamCollector=function(e){return new Response(e).arrayBuffer().then((function(e){return new Uint8Array(e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUserAgent=function(e,t){return"aws-sdk-js-v3-"+e+"/"+t+" "+("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}},function(e,t,n){"use strict";var r=n(17),i={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new(n(46).a)).getStorage()};function o(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function s(){return(new Date).getTime()}function a(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var u={},c=(function(){function e(){}e.clear=function(){u={}},e.getItem=function(e){return u[e]||null},e.setItem=function(e,t){u[e]=t},e.removeItem=function(e){delete u[e]}}(),n(32));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f,d=new c.a("StorageCache"),h=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){a(this.config.capacityInBytes)||(d.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=i.capacityInBytes),a(this.config.itemMaxSize)||(d.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=i.itemMaxSize),a(this.config.defaultTTL)||(d.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=i.defaultTTL),a(this.config.defaultPriority)||(d.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=i.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(d.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=i.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(d.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=i.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(d.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=i.warningThreshold);this.config.capacityInBytes>5242880&&(d.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=i.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:s(),visitedTime:s(),priority:n.priority,expires:n.expires,type:l(t),byteSize:0};return r.byteSize=o(JSON.stringify(r)),r.byteSize=o(JSON.stringify(r)),r},e.prototype.configure=function(e){return e?(e.keyPrefix&&d.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},e}(),p=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=new c.a("Cache"),v=new(function(e){function t(t){var n=this,r=t?Object.assign({},i,t):i;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return p(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=s(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return s()>=n.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),g.error("Failed to set item "+e)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}n.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1}));for(i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){g.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+s()};if(i.priority<1||i.priority>5)g.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize)g.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var a=this.config.storage.getItem(r);if(a&&this._removeItem(r,JSON.parse(a).byteSize),this._isCacheFull(o.byteSize)){var u=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var c=this._sizeToPop(o.byteSize);this._popOutItems(u,c)}}this._setItem(r,o)}catch(e){g.warn("setItem failed! "+e)}}}else g.warn("The value of item should not be undefined!");else g.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,t){g.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return g.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(e){return g.warn("getItem failed! "+e),null}},t.prototype.removeItem=function(e){g.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){g.warn("removeItem failed! "+e)}},t.prototype.clear=function(){g.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){g.warn("clear failed! "+e)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==i.keyPrefix||(g.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=s.toString()),new t(e)},t}(h));t.a=v;r.a.register(v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return T})),n.d(t,"e",(function(){return F})),n.d(t,"f",(function(){return U})),n.d(t,"g",(function(){return V})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return $}));
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var r,i=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,o=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=o||{},this.clientMetadata=s||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),o=n(6),s=n(20),a=n.n(s),u=(n(85),n(47)),c=n.n(u),l=n(43),f=n.n(l),d=h;function h(e,t){null!=e&&this.fromString(e,t)}function p(){return new h(null)}var g="undefined"!=typeof navigator;g&&"Microsoft Internet Explorer"==navigator.appName?(h.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},r=30):g&&"Netscape"!=navigator.appName?(h.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},r=26):(h.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},r=28),h.prototype.DB=r,h.prototype.DM=(1<<r)-1,h.prototype.DV=1<<r;h.prototype.FV=Math.pow(2,52),h.prototype.F1=52-r,h.prototype.F2=2*r-52;var v,y,m=new Array;for(v="0".charCodeAt(0),y=0;y<=9;++y)m[v++]=y;for(v="a".charCodeAt(0),y=10;y<36;++y)m[v++]=y;for(v="A".charCodeAt(0),y=10;y<36;++y)m[v++]=y;function _(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function b(e,t){var n=m[e.charCodeAt(t)];return null==n?-1:n}function w(e){var t=p();return t.fromInt(e),t}function S(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function E(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}E.prototype.convert=function(e){var t=p();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(h.ZERO)>0&&this.m.subTo(t,t),t},E.prototype.revert=function(e){var t=p();return e.copyTo(t),this.reduce(t),t},E.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},E.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},h.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},h.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},h.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=b(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&h.ZERO.subTo(this,this)},h.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},h.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},h.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},h.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},h.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},h.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},h.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&h.ZERO.subTo(t,t)},h.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},h.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=p());var o=p(),s=this.s,a=e.s,u=this.DB-S(r[r.t-1]);u>0?(r.lShiftTo(u,o),i.lShiftTo(u,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,l=o[c-1];if(0!=l){var f=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),d=this.FV/f,g=(1<<this.F1)/f,v=1<<this.F2,y=n.t,m=y-c,_=null==t?p():t;for(o.dlShiftTo(m,_),n.compareTo(_)>=0&&(n[n.t++]=1,n.subTo(_,n)),h.ONE.dlShiftTo(c,_),_.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--m>=0;){var b=n[--y]==l?this.DM:Math.floor(n[y]*d+(n[y-1]+v)*g);if((n[y]+=o.am(0,b,n,m,0,c))<b)for(o.dlShiftTo(m,_),n.subTo(_,n);n[y]<--b;)n.subTo(_,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&h.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&h.ZERO.subTo(n,n)}}},h.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},h.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},h.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=_(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=_(n));return i?o:"0"},h.prototype.negate=function(){var e=p();return h.ZERO.subTo(this,e),e},h.prototype.abs=function(){return this.s<0?this.negate():this},h.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},h.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+S(this[this.t-1]^this.s&this.DM)},h.prototype.mod=function(e){var t=p();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(h.ZERO)>0&&e.subTo(t,t),t},h.prototype.equals=function(e){return 0==this.compareTo(e)},h.prototype.add=function(e){var t=p();return this.addTo(e,t),t},h.prototype.subtract=function(e){var t=p();return this.subTo(e,t),t},h.prototype.multiply=function(e){var t=p();return this.multiplyTo(e,t),t},h.prototype.divide=function(e){var t=p();return this.divRemTo(e,t,null),t},h.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=w(1),s=new E(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),r>1){var f=p();for(s.sqrTo(a[1],f);u<=l;)a[u]=p(),s.mulTo(f,a[u-2],a[u]),u+=2}var d,h,g=e.t-1,v=!0,y=p();for(i=S(e[g])-1;g>=0;){for(i>=c?d=e[g]>>i-c&l:(d=(e[g]&(1<<i+1)-1)<<c-i,g>0&&(d|=e[g-1]>>this.DB+i-c)),u=r;0==(1&d);)d>>=1,--u;if((i-=u)<0&&(i+=this.DB,--g),v)a[d].copyTo(o),v=!1;else{for(;u>1;)s.sqrTo(o,y),s.sqrTo(y,o),u-=2;u>0?s.sqrTo(o,y):(h=o,o=y,y=h),s.mulTo(y,a[d],o)}for(;g>=0&&0==(e[g]&1<<i);)s.sqrTo(o,y),h=o,o=y,y=h,--i<0&&(i=this.DB-1,--g)}var m=s.revert(o);return n(null,m),m},h.ZERO=w(0),h.ONE=w(1);
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var O=function(e){return o.Buffer.from(a.a.lib.WordArray.random(e).toString(),"hex")},A=function(){function e(e){this.N=new d("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new d("2",16),this.k=new d(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=o.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){var e=O(128).toString("hex");return new d(e,16).mod(this.N)},t.generateRandomString=function(){return O(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,o=this.hash(i),s=O(16).toString("hex");this.SaltToHashDevices=this.padHex(new d(s,16)),this.g.modPow(new d(this.hexHash(this.SaltToHashDevices+o),16),this.N,(function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,r){e&&t(e,null),r.mod(n.N).equals(d.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new d(this.UHexHash,16)},t.hash=function(e){var t=e instanceof o.Buffer?a.a.lib.WordArray.create(e):e,n=c()(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(o.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=a.a.lib.WordArray.create(o.Buffer.concat([this.infoBits,o.Buffer.from(String.fromCharCode(1),"utf8")])),r=e instanceof o.Buffer?a.a.lib.WordArray.create(e):e,i=t instanceof o.Buffer?a.a.lib.WordArray.create(t):t,s=f()(r,i),u=f()(n,s);return o.Buffer.from(u.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var s=this;if(n.mod(this.N).equals(d.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(d.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+e+":"+t,u=this.hash(a),c=new d(this.hexHash(this.padHex(r)+u),16);this.calculateS(c,n,(function(e,t){e&&i(e,null);var n=s.computehkdf(o.Buffer.from(s.padHex(t),"hex"),o.Buffer.from(s.padHex(s.UValue.toString(16)),"hex"));i(null,n)}))},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,(function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,(function(e,t){e&&n(e,null),n(null,t.mod(r.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},e}(),I=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(o.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();var C=function(e){var t,n;n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r;r=i;function i(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return i}(I);
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var P=function(e){var t,n;n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r;r=i;function i(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return i}(I),T=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),x=n(49),k=n.n(x),j=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],R=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=R[e.getUTCDay()],n=N[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),U=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),D={},L=function(){function e(){}return e.setItem=function(e,t){return D[e]=t,D[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(D,e)?D[e]:void 0},e.removeItem=function(e){return delete D[e]},e.clear=function(){return D={}},e}(),B=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=L}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),z="undefined"!=typeof navigator?navigator.userAgent:"nodejs",F=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new B).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,(function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeName,o=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,t.customChallenge(o)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,s=new A(this.pool.getUserPoolId().split("_")[1]),u=new M,c={};null!=this.deviceKey&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,s.getLargeAValue((function(l,h){l&&t.onFailure(l),c.SRP_A=h.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(c.CHALLENGE_NAME="SRP_A");var p=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),g={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:c,ClientMetadata:p};i.getUserContextData(i.username)&&(g.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",g,(function(c,l){if(c)return t.onFailure(c);var h=l.ChallengeParameters;i.username=h.USER_ID_FOR_SRP,n=new d(h.SRP_B,16),r=new d(h.SALT,16),i.getCachedDeviceKeyAndPassword(),s.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,(function(e,n){e&&t.onFailure(e);var r=u.getNowString(),c=a.a.lib.WordArray.create(o.Buffer.concat([o.Buffer.from(i.pool.getUserPoolId().split("_")[1],"utf8"),o.Buffer.from(i.username,"utf8"),o.Buffer.from(h.SECRET_BLOCK,"base64"),o.Buffer.from(r,"utf8")])),d=a.a.lib.WordArray.create(n),g=k.a.stringify(f()(c,d)),v={};v.USERNAME=i.username,v.PASSWORD_CLAIM_SECRET_BLOCK=h.SECRET_BLOCK,v.TIMESTAMP=r,v.PASSWORD_CLAIM_SIGNATURE=g,null!=i.deviceKey&&(v.DEVICE_KEY=i.deviceKey);var y={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:v,Session:l.Session,ClientMetadata:p};i.getUserContextData()&&(y.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,(function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(v.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)}))}(y,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,s,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),r.PASSWORD){var i=new A(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,(function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,s=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,s);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,s);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,s);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,s);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(s);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var a=null,u=null,c=[],l=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(s&&(a=JSON.parse(e.ChallengeParameters.userAttributes),u=JSON.parse(e.ChallengeParameters.requiredAttributes)),u)for(var f=0;f<u.length;f++)c[f]=u[f].substr(l.length);return n.newPasswordRequired(a,c)}if("DEVICE_SRP_AUTH"!==i){this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var d=e.AuthenticationResult.NewDeviceMetadata;if(null==d)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var s={Salt:o.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:o.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=s.PasswordVerifier,r.deviceGroupKey=d.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:d.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:s,DeviceName:z},(function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))}else this.getDeviceResponse(n)},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new A(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach((function(e){a[s+e]=t[e]})),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)}))},t.getDeviceResponse=function(e,t){var n=this,r=new A(this.deviceGroupKey),i=new M,s={};s.USERNAME=this.username,s.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(u,c){u&&e.onFailure(u),s.SRP_A=c.toString(16);var l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:s,ClientMetadata:t};n.getUserContextData()&&(l.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",l,(function(t,s){if(t)return e.onFailure(t);var u=s.ChallengeParameters,c=new d(u.SRP_B,16),l=new d(u.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,c,l,(function(t,r){if(t)return e.onFailure(t);var c=i.getNowString(),l=a.a.lib.WordArray.create(o.Buffer.concat([o.Buffer.from(n.deviceGroupKey,"utf8"),o.Buffer.from(n.deviceKey,"utf8"),o.Buffer.from(u.SECRET_BLOCK,"base64"),o.Buffer.from(c,"utf8")])),d=a.a.lib.WordArray.create(r),h=k.a.stringify(f()(l,d)),p={};p.USERNAME=n.username,p.PASSWORD_CLAIM_SECRET_BLOCK=u.SECRET_BLOCK,p.TIMESTAMP=c,p.PASSWORD_CLAIM_SIGNATURE=h,p.DEVICE_KEY=n.deviceKey;var g={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:p,Session:s.Session};n.getUserContextData()&&(g.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",g,(function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new A(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,(function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)}))},t.sendMFACode=function(e,t,n,r){var i=this,s={};s.USERNAME=this.username,s.SMS_MFA_CODE=e;var a=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===a&&(s.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var u={ChallengeName:a,ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new A(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var s={Salt:o.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:o.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=s.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:s,DeviceName:z},(function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},s=new U(o);r.push(s)}return e(null,r)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var r=!!t&&t.bypassCache,i=this.storage.getItem(this.userDataKey);if(!i||r)this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,r){if(t)return e(t,null);n.cacheUserData(r);var i=n.signInUserSession.getRefreshToken();if(!i||!i.getToken())return e(null,r);n.refreshSession(i,(function(t,n){return t?e(t,null):e(null,r)}))}));else try{return e(null,JSON.parse(i))}catch(t){return this.clearCachedUserData(),e(t,null)}},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",r=t+".accessToken",i=t+".refreshToken",o=t+".clockDrift";if(this.storage.getItem(n)){var s=new P({IdToken:this.storage.getItem(n)}),a=new C({AccessToken:this.storage.getItem(r)}),u=new T({RefreshToken:this.storage.getItem(i)}),c=parseInt(this.storage.getItem(o),0)||0,l=new j({IdToken:s,AccessToken:a,RefreshToken:u,ClockDrift:c});if(l.isValid())return this.signInUserSession=l,e(null,this.signInUserSession);if(!u.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(u,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i={};i.REFRESH_TOKEN=e.getToken();var o="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=o+".LastAuthUser";if(this.storage.getItem(s)){this.username=this.storage.getItem(s);var a=o+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(a),i.DEVICE_KEY=this.deviceKey}var u={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:i,ClientMetadata:n};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",u,(function(n,i){if(n)return"NotAuthorizedException"===n.code&&r.clearCachedUser(),t(n,null);if(i){var o=i.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),t(null,r.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",o=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",o=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(o)},t.getCognitoUserSession=function(e){var t=new P(e),n=new C(e),r=new T(e);return new j({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess()}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess()}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("ListDevices",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e,PaginationToken:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.challengeName,i.challengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.challengeName,i.challengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,(function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},e}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */function q(){}q.prototype.userAgent="aws-amplify/0.1.x js";var K=q,H=function(){function e(e,t){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/"}return e.prototype.request=function(e,t,n){var r,i={headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":K.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)};fetch(this.endpoint,i).then((function(e){return r=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(r.ok)return n(null,e);e;var t=(e.__type||e.code).split("#").pop(),i={code:t,name:t,message:e.message||e.Message||null};return n(i)})).catch((function(e){if(!(r&&r.headers&&r.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return n(t)}return n(e)}try{var i=r.headers.get("x-amzn-errortype").split(":")[0],o={code:i,name:i,statusCode:r.status,message:r.status?r.status.toString():null};return n(o)}catch(t){return n(e)}}))},e}(),V=function(){function e(e){var t=e||{},n=t.UserPoolId,r=t.ClientId,i=t.endpoint,o=t.AdvancedSecurityDataCollectionFlag;if(!n||!r)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(n))throw new Error("Invalid UserPoolId format.");var s=n.split("_")[0];this.userPoolId=n,this.clientId=r,this.client=new H(s,i),this.advancedSecurityDataCollectionFlag=!1!==o,this.storage=e.Storage||(new B).getStorage()}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var s=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,(function(t,n){if(t)return i(t,null);var r={Username:e,Pool:s,Storage:s.storage},o={user:new F(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,o)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new F(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),G=n(39),$=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0}var t=e.prototype;return t.setItem=function(e,t){return G.set(e,t,{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure}),G.get(e)},t.getItem=function(e){return G.get(e)},t.removeItem=function(e){return G.remove(e,{path:this.path,domain:this.domain,secure:this.secure})},t.clear=function(){var e,t=G.get();for(e=0;e<t.length;++e)G.remove(t[e]);return{}},e}()},function(e,t,n){"use strict";var r=n(108),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var r=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/png",ext:"png"},{type:"image/gif",ext:"gif"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/bmp",ext:"bmp"},{type:"image/x-icon",ext:"ico"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/svg+xml",ext:"svg"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],i=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},o=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort((function(e,n){var i=e[t],o=n[t];return void 0===o?void 0===i?0:1*r:void 0===i||i<o?-1*r:i>o?1*r:0})),!0},s=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach((function(e){delete n[e]}))),n},a=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),i=r.filter((function(e){return n.endsWith("."+e.ext)}));return i.length>0?i[0].type:t},u=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||("application/json"===t||"application/xml"===t||"application/sh"===t)},c=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},l=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then((function(e){return r=!0,t=!1,e}),(function(e){throw n=!0,t=!1,e}));return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},f=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:void 0!==e&&null!=e.versions&&null!=e.versions.node}},d=function e(t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),!p(t))return t;var i={};for(var o in t){if(t.hasOwnProperty(o))i[n.includes(o)?o:o[0].toLowerCase()+o.slice(1)]=r.includes(o)?t[o]:e(t[o],n,r)}return i},h=function e(t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),!p(t))return t;var i={};for(var o in t){if(t.hasOwnProperty(o))i[n.includes(o)?o:o[0].toUpperCase()+o.slice(1)]=r.includes(o)?t[o]:e(t[o],n,r)}return i},p=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},g=function(){function e(){}return e.isEmpty=i,e.sortByField=o,e.objectLessAttributes=s,e.filenameToContentType=a,e.isTextFile=u,e.generateRandomString=c,e.makeQuerablePromise=l,e.browserOrNode=f,e.transferKeyToLowerCase=d,e.transferKeyToUpperCase=h,e.isStrictObject=p,e}()}).call(this,n(64))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},s=function(){function e(e,t){void 0===t&&(t="WARN"),this.name=e,this.level=t}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype._log=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.level;e.LOG_LEVEL&&(i=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(i=window.LOG_LEVEL);var s=o[i],a=o[t];if(a>=s){var u=console.log.bind(console);"ERROR"===t&&console.error&&(u=console.error.bind(console)),"WARN"===t&&console.warn&&(u=console.warn.bind(console));var c="["+t+"] "+this._ts()+" "+this.name;if(1===n.length&&"string"==typeof n[0])u(c+" - "+n[0]);else if(1===n.length)u(c,n[0]);else if("string"==typeof n[0]){var l=n.slice(1);1===l.length&&(l=l[0]),u(c+" - "+n[0],l)}else u(c,n)}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["INFO"],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["INFO"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["WARN"],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["ERROR"],e))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["DEBUG"],e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["VERBOSE"],e))},e.LOG_LEVEL=null,e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r={},i={},o=0;o<256;o++){var s=o.toString(16).toLowerCase();1===s.length&&(s="0"+s),r[o]=s,i[s]=o}t.fromHex=function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in i))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=i[r]}return t},t.toHex=function(e){for(var t="",n=0;n<e.byteLength;n++)t+=r[e[n]];return t}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={userAgent:"aws-amplify/3.2.0 js",product:"",navigator:null,isReactNative:!1};if("undefined"!=typeof navigator&&navigator.product)switch(r.product=navigator.product||"",r.navigator=navigator||null,navigator.product){case"ReactNative":r.userAgent="aws-amplify/3.2.0 react-native",r.isReactNative=!0;break;default:r.userAgent="aws-amplify/3.2.0 js",r.isReactNative=!1}var i=function(){return r.userAgent}},function(e,t,n){"use strict";const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+i+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){var r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isName=function(e){const t=o.exec(e);return!(null==t)},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[],o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e){var t=this;return function(n){return function(i){return r.__awaiter(t,void 0,void 0,(function(){var t,o,s,a,u,c,l,f,d,h,p,g,v,y,m,_,b;return r.__generator(this,(function(w){switch(w.label){case 0:t=r.__assign({},i.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),s=r.__values(o),a=s.next(),w.label=2;case 2:return a.done?[3,5]:(u=a.value,(c=t[u.target])?(l=ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):"string"==typeof c?e.utf8Decoder(c):new Uint8Array(c),f=e.base64Encoder(l),(d=new e.md5).update(l),h=[r.__assign({},t)],(b={})[u.target]=f,p=u.hash,v=(g=e).base64Encoder,[4,d.digest()]):[3,4]);case 3:t=r.__assign.apply(void 0,h.concat([(b[p]=v.apply(g,[w.sent()]),b)])),w.label=4;case 4:return a=s.next(),[3,2];case 5:return[3,8];case 6:return y=w.sent(),m={error:y},[3,8];case 7:try{a&&!a.done&&(_=s.return)&&_.call(s)}finally{if(m)throw m.error}return[7];case 8:return[2,n(r.__assign(r.__assign({},i),{input:t}))]}}))}))}}}t.ssecMiddleware=i,t.ssecMiddlewareOptions={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},t.getSsecPlugin=function(e){return{applyToStack:function(n){n.add(i(e),t.ssecMiddlewareOptions)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,i=n(56);!function(e){e.CONNECTION_CLOSED="Connection closed",e.TIMEOUT_DISCONNECT="Timeout disconnect"}(r||(r={})),t.b=i.a},function(e,t,n){var r,i;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var s=window.Cookies,a=window.Cookies=o();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(a[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},function(e,t,n){"use strict";var r=n(41);n(29);t.a=r.a},function(e,t,n){"use strict";var r,i;function o(e){return e&&!!["provider","customState"].find((function(t){return e.hasOwnProperty(t)}))}function s(e){return void 0!==e.redirectSignIn}n.d(t,"a",(function(){return K})),function(e){e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon"}(r||(r={})),function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default"}(i||(i={}));var a,u=n(32),c=n(63),l=n(17),f=n(86),d=n(46),h=n(71),p=n(31),g=n(29),v=n(8),y=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},m=n(47),_=n.n(m),b=n(49),w=n.n(b),S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},E=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},A=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},I="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",C=function(e,t,n){c.a.dispatch("auth",{event:e,data:t,message:n},"Auth",I)},P=new u.a("OAuth"),T=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;this._urlOpener=t.urlOpener||y,this._config=t,this._cognitoClientId=n,this._scopes=i}return e.prototype.oauthSignIn=function(e,t,n,i,o,s){void 0===e&&(e="code"),void 0===o&&(o=r.Cognito);var a=this._generateState(32),u=s?a+"-"+s:a;!function(e){window.sessionStorage.setItem("oauth_state",e)}(encodeURIComponent(u));var c,l=this._generateRandom(128);c=l,window.sessionStorage.setItem("ouath_pkce_key",c);var f=this._generateChallenge(l),d="https://"+t+"/oauth2/authorize?"+Object.entries(S(S({redirect_uri:n,response_type:e,client_id:i,identity_provider:o,scopes:this._scopes,state:u},"code"===e?{code_challenge:f}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map((function(e){var t=A(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&");P.debug("Redirecting to "+d),this._urlOpener(d,n)},e.prototype._handleCodeFlow=function(e){return E(this,void 0,void 0,(function(){var t,n,r,i,o,a,u,c,l,f,d,h;return O(this,(function(p){switch(p.label){case 0:return(t=(Object(v.parse)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=A(t,2),i=r[0],o=r[1];return S(S({},e),((n={})[i]=o,n))}),{code:void 0}).code)?(n="https://"+this._config.domain+"/oauth2/token",C("codeFlow",{},"Retrieving tokens from "+n),r=s(this._config)?this._cognitoClientId:this._config.clientID,i=s(this._config)?this._config.redirectSignIn:this._config.redirectUri,g=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),a=S({grant_type:"authorization_code",code:t,client_id:r,redirect_uri:i},(o=g)?{code_verifier:o}:{}),P.debug("Calling token endpoint: "+n+" with",a),u=Object.entries(a).map((function(e){var t=A(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&"),[4,fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})]):[2];case 1:return[4,p.sent().json()];case 2:if(c=p.sent(),l=c.access_token,f=c.refresh_token,d=c.id_token,h=c.error)throw new Error(h);return[2,{accessToken:l,refreshToken:f,idToken:d}]}var g}))}))},e.prototype._handleImplicitFlow=function(e){return E(this,void 0,void 0,(function(){var t,n,r;return O(this,(function(i){return t=Object(v.parse)(e).hash.substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=A(t,2),i=r[0],o=r[1];return S(S({},e),((n={})[i]=o,n))}),{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,C("implicitFlow",{},"Got tokens from "+e),P.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]}))}))},e.prototype.handleAuthResponse=function(e){return E(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return O(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),t=e?S(S({},(Object(v.parse)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=A(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})),(Object(v.parse)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=A(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return i=this._validateState(t),P.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(o=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,S.apply(void 0,[S.apply(void 0,o.concat([u.sent()])),{state:i}])];case 2:return s=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,S.apply(void 0,[S.apply(void 0,s.concat([u.sent()])),{state:i}])];case 4:return[3,6];case 5:throw a=u.sent(),P.error("Error handling auth response.",a),a;case 6:return[2]}}))}))},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return E(this,void 0,void 0,(function(){var e,t,n;return O(this,(function(r){return e="https://"+this._config.domain+"/logout?",t=s(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=s(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map((function(e){var t=A(e,2);return t[0]+"="+t[1]})).join("&"),C("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),P.debug("Signing out from "+e),[2,this._urlOpener(e)]}))}))},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){return this._base64URL(_()(e))},e.prototype._base64URL=function(e){return e.toString(w.a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},e}(),x=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),k=new u.a("AuthError"),j=function(e){function t(n){var r=this,i=R[n],o=i.message,s=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||o,k.error(r.log),r}return x(t,e),t}(Error),N=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return x(t,e),t}(j),R={noConfig:{message:"Authentication Error",log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:"Authentication Error",log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:"Username cannot be empty"},invalidUsername:{message:"The username should either be a string or one of the sign in types"},emptyPassword:{message:"Password cannot be empty"},emptyCode:{message:"Confirmation code cannot be empty"},signUpError:{message:"Error creating account",log:"The first parameter should either be non-null string or object"},noMFA:{message:"No valid MFA method provided"},invalidMFA:{message:"Invalid MFA type"},emptyChallengeResponse:{message:"Challenge response cannot be empty"},noUserSession:{message:"Failed to get the session because the user is empty"},default:{message:"Authentication Error"}};function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var U,D=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},B=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},z=new u.a("AuthClass"),F="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",q=function(e,t,n){c.a.dispatch("auth",{event:e,data:t,message:n},"Auth",F)};!function(e){e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon"}(U||(U={}));var K=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.configure(e),this.currentUserCredentials=this.currentUserCredentials.bind(this),c.a.listen("auth",(function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})),l.a.register(this)}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};z.debug("configure Auth");var n=Object.assign({},this._config,f.a.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,a=r.cookieStorage,u=r.oauth,c=r.region,l=r.identityPoolId,v=r.mandatorySignIn,y=r.refreshHandlers,m=r.identityPoolRegion,_=r.clientMetadata;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw z.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=a?new g.i(a):(new d.a).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var b={UserPoolId:i,ClientId:o};b.Storage=this._storage,this.userPool=new g.g(b)}h.a.configure({mandatorySignIn:v,region:m||c,userPoolId:i,identityPoolId:l,refreshHandlers:y,storage:this._storage});var w=u?s(this._config.oauth)?u:u.awsCognito:void 0;if(w){var S=Object.assign({cognitoClientId:o,UserPoolId:i,domain:w.domain,scopes:w.scope,redirectSignIn:w.redirectSignIn,redirectSignOut:w.redirectSignOut,responseType:w.responseType,Storage:this._storage,urlOpener:w.urlOpener,clientMetadata:_},w.options);this._oAuthHandler=new T({scopes:S.scopes,config:S,cognitoClientId:S.cognitoClientId});var E={};!function(e){if(p.a.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!p.a.browserOrNode().isNode)throw new Error("Not supported")}((function(e){var n=e.url;E[n]||(E[n]=!0,t._handleAuthResponse(n))}))}return q("configured",null,"The Auth category has been configured successfully"),this._config},e.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var o,s=null,a=null,u=[],c=null;if(e&&"string"==typeof e){s=e,a=n?n[0]:null;var l=n?n[1]:null,f=n?n[2]:null;l&&u.push({Name:"email",Value:l}),f&&u.push({Name:"phone_number",Value:f})}else{if(!e||"object"!==M(e))return this.rejectAuthError(i.SignUpError);s=e.username,a=e.password,e&&e.clientMetadata?o=e.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata);var d=e.attributes;d&&Object.keys(d).map((function(e){var t={Name:e,Value:d[e]};u.push(t)})),c=e.validationData||null}return s?a?(z.debug("signUp attrs:",u),z.debug("signUp validation data:",c),new Promise((function(e,n){t.userPool.signUp(s,a,u,c,(function(t,r){t?("InvalidParameterException"===t.code&&(t.message="Username could not be created. Please make sure that the username you have entered is between 1 and 128 characters."),q("signUp_failure",t,s+" failed to signup"),n(t)):(q("signUp",r,s+" has signed up successfully"),e(r))}),o)}))):this.rejectAuthError(i.EmptyPassword):this.rejectAuthError(i.EmptyUsername)},e.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.EmptyUsername);if(!t)return this.rejectAuthError(i.EmptyCode);var r,o=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?r=n.clientMetadata:this._config.clientMetadata&&(r=this._config.clientMetadata),new Promise((function(e,n){o.confirmRegistration(t,s,(function(t,r){t?n(t):e(r)}),r)}))},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(e,r){n.resendConfirmationCode((function(t,n){t?r(t):e(n)}),t)}))},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,s={};if("string"==typeof e)r=e,o=t;else{if(!e.username)return this.rejectAuthError(i.InvalidUsername);void 0!==t&&z.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,s=e.validationData}if(!r)return this.rejectAuthError(i.EmptyUsername);var a=new g.a({Username:r,Password:o,ValidationData:s,ClientMetadata:n});return o?this.signInWithPassword(a):this.signInWithoutPassword(a)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return D(r,void 0,void 0,(function(){var r,s,a,u;return L(this,(function(c){switch(c.label){case 0:z.debug(o),delete e.challengeName,delete e.challengeParam,c.label=1;case 1:return c.trys.push([1,4,5,9]),[4,h.a.clear()];case 2:return c.sent(),[4,h.a.set(o,"session")];case 3:return r=c.sent(),z.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=c.sent(),z.debug("cannot get cognito credentials",s),[3,9];case 5:return c.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=c.sent(),i.user=a,q("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return u=c.sent(),z.error("Failed to get the signed in user",u),n(u),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(t){z.debug("signIn failure",t),q("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){z.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){z.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){z.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){z.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){z.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){z.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return new Promise((function(r,i){n.authenticateUser(e,t.authCallbacks(n,r,i))}))},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))}))},e.prototype.getMFAOptions=function(e){return new Promise((function(t,n){e.getMFAOptions((function(e,r){if(e)return z.debug("get MFA Options failed",e),void n(e);z.debug("get MFA options success",r),t(r)}))}))},e.prototype.getPreferredMFA=function(e,t){var n=this;return new Promise((function(r,i){var o=!!t&&t.bypassCache;e.getUserData((function(e,t){if(e)return z.debug("getting preferred mfa failed",e),void i(e);var o=n._getMfaTypeFromUserData(t);return o?void r(o):void i("invalid MFA Type")}),{bypassCache:o})}))},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;if(r)0===r.length?t="NOMFA":z.debug("invalid case for getPreferredMFA",e);else t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){return new Promise((function(n,r){e.getUserData((function(e,t){return e?(z.debug("getting user data failed",e),void r(e)):void n(t)}),t)}))},e.prototype.setPreferredMFA=function(e,t){return D(this,void 0,void 0,(function(){var n,r,o,s,a;return L(this,(function(u){switch(u.label){case 0:return[4,this._getUserData(e,{bypassCache:!0})];case 1:switch(n=u.sent(),r=null,o=null,t){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return r={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return s=n.UserMFASettingList,[4,this._getMfaTypeFromUserData(n)];case 5:if("NOMFA"===(a=u.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===a)r={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==a)return[2,this.rejectAuthError(i.InvalidMFA)];o={PreferredMfa:!1,Enabled:!1}}return s&&0!==s.length&&s.forEach((function(e){"SMS_MFA"===e?r={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(o={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return z.debug("no validmfa method provided"),[2,this.rejectAuthError(i.NoMFA)];case 7:return this,[2,new Promise((function(t,n){e.setUserMfaPreference(r,o,(function(r,i){if(r)return z.debug("Set user mfa preference error",r),n(r);z.debug("Set user mfa success",i),z.debug("Caching the latest user data into local"),e.getUserData((function(e,r){return e?(z.debug("getting user data failed",e),n(e)):t(i)}),{bypassCache:!0})}))}))]}}))}))},e.prototype.disableSMS=function(e){return new Promise((function(t,n){e.disableMFA((function(e,r){if(e)return z.debug("disable mfa failed",e),void n(e);z.debug("disable mfa succeed",r),t(r)}))}))},e.prototype.enableSMS=function(e){return new Promise((function(t,n){e.enableMFA((function(e,r){if(e)return z.debug("enable mfa failed",e),void n(e);z.debug("enable mfa succeed",r),t(r)}))}))},e.prototype.setupTOTP=function(e){return new Promise((function(t,n){e.associateSoftwareToken({onFailure:function(e){z.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){z.debug("associateSoftwareToken sucess",e),t(e)}})}))},e.prototype.verifyTotpToken=function(e,t){return z.debug("verfication totp token",e,t),new Promise((function(n,r){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){z.debug("verifyTotpToken failed",e),r(e)},onSuccess:function(e){z.debug("verifyTotpToken success",e),n(e)}})}))},e.prototype.confirmSignIn=function(e,t,n,r){var o=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(i.EmptyCode);var s=this;return new Promise((function(i,a){e.sendMFACode(t,{onSuccess:function(t){return D(o,void 0,void 0,(function(){var n,r;return L(this,(function(o){switch(o.label){case 0:z.debug(t),o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,h.a.clear()];case 2:return o.sent(),[4,h.a.set(t,"session")];case 3:return n=o.sent(),z.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=o.sent(),z.debug("cannot get cognito credentials",r),[3,6];case 5:return s.user=e,q("signIn",e,e+" has signed in"),i(e),[7];case 6:return[2]}}))}))},onFailure:function(e){z.debug("confirm signIn failure",e),a(e)}},n,r)}))},e.prototype.completeNewPassword=function(e,t,n,r){var o=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(i.EmptyPassword);var s=this;return new Promise((function(i,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return D(o,void 0,void 0,(function(){var n,r;return L(this,(function(o){switch(o.label){case 0:z.debug(t),o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,h.a.clear()];case 2:return o.sent(),[4,h.a.set(t,"session")];case 3:return n=o.sent(),z.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=o.sent(),z.debug("cannot get cognito credentials",r),[3,6];case 5:return s.user=e,q("signIn",e,e+" has signed in"),i(e),[7];case 6:return[2]}}))}))},onFailure:function(e){z.debug("completeNewPassword failure",e),q("completeNewPassword_failure",e,o.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){z.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,i(e)},mfaSetup:function(t,n){z.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,i(e)}},r)}))},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!t)return this.rejectAuthError(i.EmptyChallengeResponse);return new Promise((function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)}))},e.prototype.updateUserAttributes=function(e,t,n){void 0===n&&(n=this._config.clientMetadata);var r=[],i=this;return new Promise((function(o,s){i.userSession(e).then((function(i){for(var a in t)if("sub"!==a&&a.indexOf("_verified")<0){var u={Name:a,Value:t[a]};r.push(u)}e.updateAttributes(r,(function(e,t){return e?s(e):o(t)}),n)}))}))},e.prototype.userAttributes=function(e){var t=this;return new Promise((function(n,r){t.userSession(e).then((function(t){e.getUserAttributes((function(e,t){e?r(e):n(t)}))}))}))},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then((function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}}))},e.prototype.currentUserPoolUser=function(e){var t=this;if(!this.userPool)return this.rejectNoUserPool();var n=this;return new Promise((function(r,i){t._storageSync.then((function(){var t=n.userPool.getCurrentUser();if(!t)return z.debug("Failed to get user from user pool"),void i("No current user");t.getSession((function(o,s){if(o)return z.debug("Failed to get the user session",o),void i(o);var a=!!e&&e.bypassCache,u=s.getAccessToken().decodePayload().scope;if(!(void 0===u?"":u).split(" ").includes("aws.cognito.signin.user.admin"))return z.debug("Unable to get the user data because the aws.cognito.signin.user.admin is not in the scopes of the access token"),r(t);t.getUserData((function(e,o){if(e)return z.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?i(e):r(t));for(var s=o.PreferredMfaSetting||"NOMFA",a=[],u=0;u<o.UserAttributes.length;u++){var c={Name:o.UserAttributes[u].Name,Value:o.UserAttributes[u].Value},l=new g.f(c);a.push(l)}var f=n.attributesToObject(a);return Object.assign(t,{attributes:f,preferredMFA:s}),r(t)}),{bypassCache:a})}))})).catch((function(e){return z.debug("Failed to sync cache info into memory",e),i(e)}))}))},e.prototype.currentAuthenticatedUser=function(e){return D(this,void 0,void 0,(function(){var t,n,r,i;return L(this,(function(o){switch(o.label){case 0:z.debug("getting current authenticated user"),t=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._storageSync];case 2:return o.sent(),[3,4];case 3:throw n=o.sent(),z.debug("Failed to sync cache info into memory",n),n;case 4:try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user}catch(e){z.debug("cannot load federated user from auth storage")}return t?(this.user=t,z.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:z.debug("get current authenticated userpool user"),r=null,o.label=6;case 6:return o.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return r=o.sent(),[3,9];case 8:throw"No userPool"===(i=o.sent())&&z.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),z.debug("The user is not authenticated by the error",i),"not authenticated";case 9:return this.user=r,[2,this.user]}}))}))},e.prototype.currentSession=function(){var e=this;return z.debug("Getting current session"),this.userPool?new Promise((function(t,n){e.currentUserPoolUser().then((function(r){e.userSession(r).then((function(e){t(e)})).catch((function(e){z.debug("Failed to get the current session",e),n(e)}))})).catch((function(e){z.debug("Failed to get the current user",e),n(e)}))})):Promise.reject()},e.prototype.userSession=function(e){return e?new Promise((function(t,n){z.debug("Getting the session from this user:",e),e.getSession((function(r,i){return r?(z.debug("Failed to get the session from user",e),void n(r)):(z.debug("Succeed to get the user session",i),void t(i))}))})):(z.debug("the user is null"),this.rejectAuthError(i.NoUserSession))},e.prototype.currentUserCredentials=function(){return D(this,void 0,void 0,(function(){var e,t;return L(this,(function(n){switch(n.label){case 0:this,z.debug("Getting current user credentials"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._storageSync];case 2:return n.sent(),[3,4];case 3:throw e=n.sent(),z.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){z.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,h.a.refreshFederatedToken(t)]:[2,this.currentSession().then((function(e){return z.debug("getting session success",e),h.a.set(e,"session")})).catch((function(e){return z.debug("getting session failed",e),h.a.set(null,"guest")}))]}}))}))},e.prototype.currentCredentials=function(){return z.debug("getting current credntials"),h.a.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise((function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(){return r()},onFailure:function(e){return i(e)},clientMetadata:n})}))},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise((function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})})):this.rejectAuthError(i.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then((function(n){return t.verifyUserAttribute(n,e)}))},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then((function(r){return n.verifyUserAttributeSubmit(r,e,t)}))},e.prototype.cognitoIdentitySignOut=function(e,t){return D(this,void 0,void 0,(function(){var n,r,i=this;return L(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),z.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(n,o){if(!e||!e.global)return z.debug("user sign out",t),t.signOut(),r?n(i._oAuthHandler.signOut()):n();z.debug("user global sign out",t),t.getSession((function(e,s){if(e)return z.debug("failed to get the user session",e),o(e);t.globalSignOut({onSuccess:function(e){return z.debug("global sign out success"),r?n(i._oAuthHandler.signOut()):n()},onFailure:function(e){return z.debug("global sign out failed",e),o(e)}})}))}))]}}))}))},e.prototype.signOut=function(e){return D(this,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),z.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:z.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:z.debug("no Congito User pool"),n.label=8;case 8:return q("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},e.prototype.cleanCachedItems=function(){return D(this,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return[4,h.a.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise((function(o,s){i.userSession(e).then((function(i){e.changePassword(t,n,(function(e,t){return e?(z.debug("change password failure",e),s(e)):o(t)}),r)}))}))},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){z.debug("forgot password failure",t),q("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){q("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)}))},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(i.EmptyUsername);if(!t)return this.rejectAuthError(i.EmptyCode);if(!n)return this.rejectAuthError(i.EmptyPassword);var o=this.createCognitoUser(e);return new Promise((function(i,s){o.confirmPassword(t,n,{onSuccess:function(){q("forgotPasswordSubmit",o,e+" forgotPasswordSubmit successful"),i()},onFailure:function(t){q("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},r)}))},e.prototype.currentUserInfo=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return L(this,(function(a){switch(a.label){case 0:return(e=h.a.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch((function(e){return z.debug(e)}))];case 1:if(!(s=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(s)];case 3:t=a.sent(),n=this.attributesToObject(t),r=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=a.sent(),[3,7];case 6:return i=a.sent(),z.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:s.getUsername(),attributes:n}];case 8:return o=a.sent(),z.debug("currentUserInfo error",o),[2,{}];case 9:return"federated"===e?[2,(s=this.user)||{}]:[2]}}))}))},e.prototype.federatedSignIn=function(e,t,n){return D(this,void 0,void 0,(function(){var r,i,a,u,c,l,f,d,p,g,v;return L(this,(function(y){switch(y.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return o(e)||(m=e)&&["customProvider","customState"].find((function(e){return m.hasOwnProperty(e)}))||void 0===e?(r=e||{provider:U.Cognito},c=o(r)?r.provider:r.customProvider,o(r),i=r.customState,this._config.userPoolId&&(a=s(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,u=s(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,u,a,c,i)),[3,4]):[3,1];case 1:c=e;try{(l=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&z.warn("There is already a signed in user: "+l+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return f=t.token,d=t.identity_id,p=t.expires_at,[4,h.a.set({provider:c,token:f,identity_id:d,user:n,expires_at:p},"federation")];case 2:return g=y.sent(),[4,this.currentAuthenticatedUser()];case 3:return v=y.sent(),q("signIn",v,"A user "+v.username+" has been signed in"),z.debug("federated sign in credentials",g),[2,g];case 4:return[2]}var m}))}))},e.prototype._handleAuthResponse=function(e){return D(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d,y,m;return L(this,(function(_){switch(_.label){case 0:if(!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(q("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(p.a.browserOrNode().isBrowser?window.location.href:""),n=!!(Object(v.parse)(t).query||"").split("&").map((function(e){return e.split("=")})).find((function(e){var t=B(e,1)[0];return"code"===t||"error"===t})),r=!!(Object(v.parse)(t).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){var t=B(e,1)[0];return"access_token"===t||"error"===t})),!n&&!r)return[3,6];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),_.label=1;case 1:return _.trys.push([1,5,,6]),[4,this._oAuthHandler.handleAuthResponse(t)];case 2:return i=_.sent(),o=i.accessToken,s=i.idToken,a=i.refreshToken,u=i.state,c=new g.h({IdToken:new g.c({IdToken:s}),RefreshToken:new g.d({RefreshToken:a}),AccessToken:new g.b({AccessToken:o})}),l=void 0,this._config.identityPoolId?[4,h.a.set(c,"session")]:[3,4];case 3:l=_.sent(),z.debug("AWS credentials",l),_.label=4;case 4:return f=/-/.test(u),d=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"]),q("signIn",d,"A user "+d.getUsername()+" has been signed in"),q("cognitoHostedUI",d,"A user "+d.getUsername()+" has been signed in via Cognito Hosted UI"),f&&(y=u.split("-").splice(1).join("-"),q("customOAuthState",y,"State for user "+d.getUsername())),d.setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),[2,l];case 5:return m=_.sent(),z.debug("Error in cognito hosted auth response",m),q("signIn_failure",m,"The OAuth response flow failed"),q("cognitoHostedUI_failure",m,"A failure occurred when returning to the Cognito Hosted UI"),q("customState_failure",m,"A failure occurred when returning state"),[3,6];case 6:return[2]}}))}))},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t={};return e&&e.map((function(e){"true"===e.Value?t[e.Name]=!0:"false"===e.Value?t[e.Name]=!1:t[e.Name]=e.Value})),t},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new g.e(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?i.NoConfig:i.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new j(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new N(e))},e}())(null)},function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v}));var r=n(32),i=n(31),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=new r.a("CognitoCredentials"),u=new Promise((function(e,t){return Object(i.b)().isBrowser?(window.gapi&&window.gapi.auth2?window.gapi.auth2:null)?(a.debug("google api already loaded"),e()):void setTimeout((function(){return e()}),2e3):(a.debug("not in the browser, directly resolved"),e())})),c=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(a.debug("need to wait for the Google SDK loaded"),[4,u]);case 1:e.sent(),this.initialized=!0,a.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))}))},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return Object(i.b)().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise((function(t,n){e.getAuthInstance().then((function(e){e||(console.log("google Auth undefiend"),n("google Auth undefiend"));var r=e.currentUser.get();r.isSignedIn()?(a.debug("refreshing the google access token"),r.reloadAuthResponse().then((function(e){var n=e.id_token,i=e.expires_at,o=r.getBasicProfile();o.getEmail(),o.getName();t({token:n,expires_at:i})}))):n("User is not signed in with Google")})).catch((function(e){a.debug("Failed to refresh google token",e),n("Failed to refresh google token")}))})):(a.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},d=new r.a("CognitoCredentials"),h=new Promise((function(e,t){return Object(i.b)().isBrowser?window.FB?(d.debug("FB SDK already loaded"),e()):void setTimeout((function(){return e()}),2e3):(d.debug("not in the browser, directly resolved"),e())})),p=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return l(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(d.debug("need to wait for the Facebook SDK loaded"),[4,h]);case 1:e.sent(),this.initialized=!0,d.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))}))},e.prototype._refreshFacebookTokenImpl=function(){var e=null;return Object(i.b)().isBrowser&&(e=window.FB),e?new Promise((function(t,n){e.getLoginStatus((function(e){e&&e.authResponse||(d.debug("no response from facebook when refreshing the jwt token"),n("no response from facebook when refreshing the jwt token"));var r=e.authResponse,i=r.accessToken,o=1e3*r.expiresIn+(new Date).getTime();i||(d.debug("the jwtToken is undefined"),n("the jwtToken is undefined")),t({token:i,expires_at:o})}),{scope:"public_profile,email"})})):(d.debug("no fb sdk available"),Promise.reject("no fb sdk available"))},e}(),g=new c,v=new p},function(e,t,n){var r;e.exports=(r=n(20),n(47),n(144),r.HmacSHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(91),t),r.__exportStar(n(160),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(182),t),r.__exportStar(n(183),t),r.__exportStar(n(184),t),r.__exportStar(n(99),t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r={},i=function(){function e(){}return e.setItem=function(e,t){return r[e]=t,r[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0},e.removeItem=function(e){return delete r[e]},e.clear=function(){return r={}},e}(),o=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=i}}return e.prototype.getStorage=function(){return this.storageWindow},e}()},function(e,t,n){var r;e.exports=(r=n(20),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=c[h-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[h]=g+c[h-7]+y+c[h-16]}var m=r&i^r&o^i&o,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&f)+u[h]+c[h];d=f,f=l,l=a,a=s+b|0,s=o,o=i,i=r,r=b+(_+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){"use strict";n.d(t,"a",(function(){return ot}));var r=n(32),i=n(17),o=n(86),s=n(63),a=n(71),u=n(35),c=n(0),l=n(3),f=n(2),d=n(1),h=n(123);function p(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,l;return Object(c.__generator)(this,(function(f){switch(f.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:switch(n=c.__assign.apply(void 0,r.concat([(i.body=f.sent(),i)])),s="UnknownError",s=D(e,n.body),s){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return a=[{}],[4,A(n,t)];case 3:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,a.concat([f.sent()])),{name:s,$metadata:R(e)}]),[3,5];case 4:u=n.body,s=u.code||u.Code||s,o=Object(c.__assign)(Object(c.__assign)({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:R(e)}),f.label=5;case 5:return l=o.message||o.Message||s,o.message=l,delete o.Message,[2,Promise.reject(Object.assign(new Error(l),o))]}}))}))}function g(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(c.__generator)(this,(function(l){switch(l.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:return n=c.__assign.apply(void 0,r.concat([(i.body=l.sent(),i)])),s="UnknownError",s=D(e,n.body),a=n.body,s=a.code||a.Code||s,o=Object(c.__assign)(Object(c.__assign)({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:R(e)}),u=o.message||o.Message||s,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}}))}))}function v(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(c.__generator)(this,(function(l){switch(l.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:return n=c.__assign.apply(void 0,r.concat([(i.body=l.sent(),i)])),s="UnknownError",s=D(e,n.body),a=n.body,s=a.code||a.Code||s,o=Object(c.__assign)(Object(c.__assign)({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:R(e)}),u=o.message||o.Message||s,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}}))}))}function y(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(c.__generator)(this,(function(l){switch(l.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:return n=c.__assign.apply(void 0,r.concat([(i.body=l.sent(),i)])),s="UnknownError",s=D(e,n.body),a=n.body,s=a.code||a.Code||s,o=Object(c.__assign)(Object(c.__assign)({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:R(e)}),u=o.message||o.Message||s,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}}))}))}function m(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,l;return Object(c.__generator)(this,(function(f){switch(f.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:switch(n=c.__assign.apply(void 0,r.concat([(i.body=f.sent(),i)])),s="UnknownError",s=D(e,n.body),s){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return a=[{}],[4,O(n,t)];case 3:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,a.concat([f.sent()])),{name:s,$metadata:R(e)}]),[3,5];case 4:u=n.body,s=u.code||u.Code||s,o=Object(c.__assign)(Object(c.__assign)({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:R(e)}),f.label=5;case 5:return l=o.message||o.Message||s,o.message=l,delete o.Message,[2,Promise.reject(Object.assign(new Error(l),o))]}}))}))}function _(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,l;return Object(c.__generator)(this,(function(f){switch(f.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:switch(n=c.__assign.apply(void 0,r.concat([(i.body=f.sent(),i)])),s="UnknownError",s=D(e,n.body),s){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,E(n,t)];case 3:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,a.concat([f.sent()])),{name:s,$metadata:R(e)}]),[3,5];case 4:u=n.body,s=u.code||u.Code||s,o=Object(c.__assign)(Object(c.__assign)({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:R(e)}),f.label=5;case 5:return l=o.message||o.Message||s,o.message=l,delete o.Message,[2,Promise.reject(Object.assign(new Error(l),o))]}}))}))}function b(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(c.__generator)(this,(function(l){switch(l.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:return n=c.__assign.apply(void 0,r.concat([(i.body=l.sent(),i)])),s="UnknownError",s=D(e,n.body),a=n.body,s=a.code||a.Code||s,o=Object(c.__assign)(Object(c.__assign)({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:R(e)}),u=o.message||o.Message||s,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}}))}))}function w(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(c.__generator)(this,(function(l){switch(l.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:return n=c.__assign.apply(void 0,r.concat([(i.body=l.sent(),i)])),s="UnknownError",s=D(e,n.body),a=n.body,s=a.code||a.Code||s,o=Object(c.__assign)(Object(c.__assign)({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:R(e)}),u=o.message||o.Message||s,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}}))}))}function S(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(c.__generator)(this,(function(l){switch(l.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,U(e.body,t)];case 1:return n=c.__assign.apply(void 0,r.concat([(i.body=l.sent(),i)])),s="UnknownError",s=D(e,n.body),a=n.body,s=a.code||a.Code||s,o=Object(c.__assign)(Object(c.__assign)({},a),{name:""+s,message:a.message||a.Message||s,$fault:"client",$metadata:R(e)}),u=o.message||o.Message||s,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}}))}))}var E=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var t;return Object(c.__generator)(this,(function(n){return t={name:"NoSuchBucket",$fault:"client",$metadata:R(e)},e.body,[2,t]}))}))},O=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var t;return Object(c.__generator)(this,(function(n){return t={name:"NoSuchKey",$fault:"client",$metadata:R(e)},e.body,[2,t]}))}))},A=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var t;return Object(c.__generator)(this,(function(n){return t={name:"NoSuchUpload",$fault:"client",$metadata:R(e)},e.body,[2,t]}))}))},I=function(e,t){var n=new d.XmlNode("CompletedMultipartUpload");void 0!==e.Parts&&P(e.Parts,t).map((function(e){e=e.withName("Part"),n.addChildNode(e)}));return n},C=function(e,t){var n=new d.XmlNode("CompletedPart");return void 0!==e.ETag&&n.addChildNode(new d.XmlNode("ETag").addChildNode(new d.XmlText(e.ETag)).withName("ETag")),void 0!==e.PartNumber&&n.addChildNode(new d.XmlNode("PartNumber").addChildNode(new d.XmlText(String(e.PartNumber))).withName("PartNumber")),n},P=function(e,t){var n,r,i=[];try{for(var o=Object(c.__values)(e),s=o.next();!s.done;s=o.next()){var a=s.value,u=C(a);i.push(u.withName("member"))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},T=function(e,t){var n=[];return(e||[]).map((function(e){n.push(function(e,t){var n={__type:"CommonPrefix",Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n}(e))})),n},x=function(e,t){var n={__type:"Initiator",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},k=function(e,t){var n=[];return(e||[]).map((function(e){n.push(function(e,t){var n={__type:"Object",ETag:void 0,Key:void 0,LastModified:void 0,Owner:void 0,Size:void 0,StorageClass:void 0};return void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.Owner&&(n.Owner=j(e.Owner,t)),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),n}(e,t))})),n},j=function(e,t){var n={__type:"Owner",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},N=function(e,t){var n=[];return(e||[]).map((function(e){n.push(function(e,t){var n={__type:"Part",ETag:void 0,LastModified:void 0,PartNumber:void 0,Size:void 0};return void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.Size&&(n.Size=parseInt(e.Size)),n}(e))})),n},R=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},M=function(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},U=function(e,t){return function(e,t){return M(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){if(e.length){var t=Object(h.parse)(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),r}return{}}))},D=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},L=n(14),B=n(5),z=n(37),F=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(z.getSsecPlugin)(t)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(c.__generator)(this,(function(s){if((n={})["Content-Type"]="",void 0!==e.IfMatch&&(n["If-Match"]=e.IfMatch),void 0!==e.IfModifiedSince&&(n["If-Modified-Since"]=Object(f.dateToUtcString)(e.IfModifiedSince).toString()),void 0!==e.IfNoneMatch&&(n["If-None-Match"]=e.IfNoneMatch),void 0!==e.IfUnmodifiedSince&&(n["If-Unmodified-Since"]=Object(f.dateToUtcString)(e.IfUnmodifiedSince).toString()),void 0!==e.Range&&(n.Range=e.Range),void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),void 0!==e.SSECustomerAlgorithm&&(n["x-amz-server-side-encryption-customer-algorithm"]=e.SSECustomerAlgorithm),void 0!==e.SSECustomerKey&&(n["x-amz-server-side-encryption-customer-key"]=e.SSECustomerKey),void 0!==e.SSECustomerKeyMD5&&(n["x-amz-server-side-encryption-customer-key-MD5"]=e.SSECustomerKeyMD5),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={"x-id":"GetObject"},void 0!==e.PartNumber&&(o.partNumber=e.PartNumber.toString()),void 0!==e.ResponseCacheControl&&(o["response-cache-control"]=e.ResponseCacheControl),void 0!==e.ResponseContentDisposition&&(o["response-content-disposition"]=e.ResponseContentDisposition),void 0!==e.ResponseContentEncoding&&(o["response-content-encoding"]=e.ResponseContentEncoding),void 0!==e.ResponseContentLanguage&&(o["response-content-language"]=e.ResponseContentLanguage),void 0!==e.ResponseContentType&&(o["response-content-type"]=e.ResponseContentType),void 0!==e.ResponseExpires&&(o["response-expires"]=(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()),void 0!==e.VersionId&&(o.versionId=e.VersionId),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"GET",headers:n,path:r,query:o,body:void 0}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return 200!==e.statusCode&&e.statusCode>=400?[2,m(e,t)]:(n={$metadata:R(e),__type:"GetObjectOutput",AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-length"]&&(n.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers["content-range"]&&(n.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-tagging-count"]&&(n.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(f.Command),q=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(c.__generator)(this,(function(s){if((n={})["Content-Type"]="",void 0!==e.BypassGovernanceRetention&&(n["x-amz-bypass-governance-retention"]=e.BypassGovernanceRetention.toString()),void 0!==e.MFA&&(n["x-amz-mfa"]=e.MFA),void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={"x-id":"DeleteObject"},void 0!==e.VersionId&&(o.versionId=e.VersionId),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"DELETE",headers:n,path:r,query:o,body:void 0}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=400?[2,y(e,t)]:(n={$metadata:R(e),__type:"DeleteObjectOutput",DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,M(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),K=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(c.__generator)(this,(function(s){if((n={})["Content-Type"]="",void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),o={},void 0!==e.Delimiter&&(o.delimiter=e.Delimiter),void 0!==e.EncodingType&&(o["encoding-type"]=e.EncodingType),void 0!==e.Marker&&(o.marker=e.Marker),void 0!==e.MaxKeys&&(o["max-keys"]=e.MaxKeys.toString()),void 0!==e.Prefix&&(o.prefix=e.Prefix),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"GET",headers:n,path:r,query:o,body:void 0}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(c.__generator)(this,(function(o){switch(o.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,_(e,t)]:(n={$metadata:R(e),__type:"ListObjectsOutput",CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,U(e.body,t)]);case 1:return""===(r=o.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(i=r.CommonPrefixes instanceof Array?r.CommonPrefixes:[r.CommonPrefixes],n.CommonPrefixes=T(i,t)),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(i=r.Contents instanceof Array?r.Contents:[r.Contents],n.Contents=k(i,t)),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Marker&&(n.Marker=r.Marker),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextMarker&&(n.NextMarker=r.NextMarker),void 0!==r.Prefix&&(n.Prefix=r.Prefix),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),H=n(61),V=n(127),G=n(16),$=n(128),W=n(22),Y=n(23),J=n(24),X=n(25),Q=n(26),Z=n(7),ee=n(13),te=n(27),ne=n(79),re=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ie=new Set(["cn-north-1","cn-northwest-1"]),oe=new Set(["us-iso-east-1"]),se=new Set(["us-isob-east-1"]),ae=new Set(["us-gov-west-1","us-gov-east-1"]),ue={apiVersion:"2006-03-01",disableHostPrefix:!1,signingName:"s3",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"s3.amazonaws.com"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com"};break;default:re.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e)}),ie.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e)}),oe.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e)}),se.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e)}),ae.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e)})}return Promise.resolve(n)},signingEscapePath:!1},ce=Object(c.__assign)(Object(c.__assign)({},ue),{requestHandler:new Y.FetchHttpHandler,sha256:W.Sha256,urlParser:J.parseUrl,bodyLengthChecker:X.calculateBodyLength,streamCollector:Q.streamCollector,base64Decoder:ee.fromBase64,base64Encoder:ee.toBase64,utf8Decoder:Z.fromUtf8,utf8Encoder:Z.toUtf8,defaultUserAgent:Object(te.defaultUserAgent)(ne.a,ne.b),runtime:"browser",credentialDefaultProvider:Object(G.invalidFunction)("Credential is missing"),regionDefaultProvider:Object(G.invalidFunction)("Region is missing"),md5:$.Md5,streamHasher:V.blobHasher,eventStreamSerdeProvider:H.a}),le=n(9),fe=n(59),de=n(21),he=n(125),pe=n(10),ge=n(11),ve=n(126),ye=n(15),me=n(12),_e=function(e){function t(t){var n=this,r=Object(c.__assign)(Object(c.__assign)({},ce),t),i=Object(le.resolveRegionConfig)(r),o=Object(le.resolveEndpointsConfig)(i),s=Object(ye.resolveAwsAuthConfig)(o),a=Object(ge.resolveRetryConfig)(s),u=Object(me.resolveUserAgentConfig)(a),l=Object(L.resolveBucketEndpointConfig)(u),f=Object(pe.resolveHostHeaderConfig)(l),d=Object(fe.resolveEventStreamSerdeConfig)(f);return(n=e.call(this,d)||this).config=d,n.middlewareStack.use(Object(ye.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(ge.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(me.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(de.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(ve.getValidateBucketNamePlugin)(n.config)),n.middlewareStack.use(Object(he.getAddExpectContinuePlugin)(n.config)),n.middlewareStack.use(Object(pe.getHostHeaderPlugin)(n.config)),n}return Object(c.__extends)(t,e),t.prototype.destroy=function(){},t}(f.Client),be=n(120),we=n(121),Se=n(122),Ee=n(55),Oe=n(50),Ae=n.n(Oe),Ie=new r.a("axios-http-handler"),Ce=function(){function e(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;if(e.query){var o=Object(Ee.buildQueryString)(e.query);o&&(i+="?"+o)}var s=e.port,a=e.protocol+"//"+e.hostname+(s?":"+s:"")+i,u={};u.url=a,u.method=e.method,u.headers=e.headers,u.data=e.body,r&&(u.onUploadProgress=function(e){r.emit("sendProgress",e),Ie.debug(e)}),this.httpOptions.bufferBody&&(u.responseType="blob");var c=[Ae()(u).then((function(e){return{response:new l.HttpResponse({headers:e.headers,statusCode:e.status,body:e.data})}})),Pe(n)];return Promise.race(c)},e}();function Pe(e){return void 0===e&&(e=0),new Promise((function(t,n){e&&setTimeout((function(){var t=new Error("Request did not complete within "+e+" ms");t.name="TimeoutError",n(t)}),e)}))}var Te=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(z.getSsecPlugin)(t)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(c.__generator)(this,(function(u){if((n={})["Content-Type"]="application/octet-stream",void 0!==e.ACL&&(n["x-amz-acl"]=e.ACL),void 0!==e.CacheControl&&(n["Cache-Control"]=e.CacheControl),void 0!==e.ContentDisposition&&(n["Content-Disposition"]=e.ContentDisposition),void 0!==e.ContentEncoding&&(n["Content-Encoding"]=e.ContentEncoding),void 0!==e.ContentLanguage&&(n["Content-Language"]=e.ContentLanguage),void 0!==e.ContentLength&&(n["Content-Length"]=e.ContentLength.toString()),void 0!==e.ContentMD5&&(n["Content-MD5"]=e.ContentMD5),void 0!==e.ContentType&&(n["Content-Type"]=e.ContentType),void 0!==e.Expires&&(n.Expires=Object(f.dateToUtcString)(e.Expires).toString()),void 0!==e.GrantFullControl&&(n["x-amz-grant-full-control"]=e.GrantFullControl),void 0!==e.GrantRead&&(n["x-amz-grant-read"]=e.GrantRead),void 0!==e.GrantReadACP&&(n["x-amz-grant-read-acp"]=e.GrantReadACP),void 0!==e.GrantWriteACP&&(n["x-amz-grant-write-acp"]=e.GrantWriteACP),void 0!==e.ObjectLockLegalHoldStatus&&(n["x-amz-object-lock-legal-hold"]=e.ObjectLockLegalHoldStatus),void 0!==e.ObjectLockMode&&(n["x-amz-object-lock-mode"]=e.ObjectLockMode),void 0!==e.ObjectLockRetainUntilDate&&(n["x-amz-object-lock-retain-until-date"]=(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()),void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),void 0!==e.SSECustomerAlgorithm&&(n["x-amz-server-side-encryption-customer-algorithm"]=e.SSECustomerAlgorithm),void 0!==e.SSECustomerKey&&(n["x-amz-server-side-encryption-customer-key"]=e.SSECustomerKey),void 0!==e.SSECustomerKeyMD5&&(n["x-amz-server-side-encryption-customer-key-MD5"]=e.SSECustomerKeyMD5),void 0!==e.SSEKMSEncryptionContext&&(n["x-amz-server-side-encryption-context"]=e.SSEKMSEncryptionContext),void 0!==e.SSEKMSKeyId&&(n["x-amz-server-side-encryption-aws-kms-key-id"]=e.SSEKMSKeyId),void 0!==e.ServerSideEncryption&&(n["x-amz-server-side-encryption"]=e.ServerSideEncryption),void 0!==e.StorageClass&&(n["x-amz-storage-class"]=e.StorageClass),void 0!==e.Tagging&&(n["x-amz-tagging"]=e.Tagging),void 0!==e.WebsiteRedirectLocation&&(n["x-amz-website-redirect-location"]=e.WebsiteRedirectLocation),void 0!==e.Metadata&&Object.keys(e.Metadata).forEach((function(t){n["x-amz-meta-"+t]=e.Metadata[t]})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={"x-id":"PutObject"},void 0!==e.Body&&(a=e.Body,s=a),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"PUT",headers:n,path:r,query:o,body:s}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,w(e,t)]:(n={$metadata:R(e),__type:"PutObjectOutput",ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,M(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),xe=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(z.getSsecPlugin)(t)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(c.__generator)(this,(function(s){if((n={})["Content-Type"]="",void 0!==e.ACL&&(n["x-amz-acl"]=e.ACL),void 0!==e.CacheControl&&(n["Cache-Control"]=e.CacheControl),void 0!==e.ContentDisposition&&(n["Content-Disposition"]=e.ContentDisposition),void 0!==e.ContentEncoding&&(n["Content-Encoding"]=e.ContentEncoding),void 0!==e.ContentLanguage&&(n["Content-Language"]=e.ContentLanguage),void 0!==e.ContentType&&(n["Content-Type"]=e.ContentType),void 0!==e.Expires&&(n.Expires=Object(f.dateToUtcString)(e.Expires).toString()),void 0!==e.GrantFullControl&&(n["x-amz-grant-full-control"]=e.GrantFullControl),void 0!==e.GrantRead&&(n["x-amz-grant-read"]=e.GrantRead),void 0!==e.GrantReadACP&&(n["x-amz-grant-read-acp"]=e.GrantReadACP),void 0!==e.GrantWriteACP&&(n["x-amz-grant-write-acp"]=e.GrantWriteACP),void 0!==e.ObjectLockLegalHoldStatus&&(n["x-amz-object-lock-legal-hold"]=e.ObjectLockLegalHoldStatus),void 0!==e.ObjectLockMode&&(n["x-amz-object-lock-mode"]=e.ObjectLockMode),void 0!==e.ObjectLockRetainUntilDate&&(n["x-amz-object-lock-retain-until-date"]=(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()),void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),void 0!==e.SSECustomerAlgorithm&&(n["x-amz-server-side-encryption-customer-algorithm"]=e.SSECustomerAlgorithm),void 0!==e.SSECustomerKey&&(n["x-amz-server-side-encryption-customer-key"]=e.SSECustomerKey),void 0!==e.SSECustomerKeyMD5&&(n["x-amz-server-side-encryption-customer-key-MD5"]=e.SSECustomerKeyMD5),void 0!==e.SSEKMSEncryptionContext&&(n["x-amz-server-side-encryption-context"]=e.SSEKMSEncryptionContext),void 0!==e.SSEKMSKeyId&&(n["x-amz-server-side-encryption-aws-kms-key-id"]=e.SSEKMSKeyId),void 0!==e.ServerSideEncryption&&(n["x-amz-server-side-encryption"]=e.ServerSideEncryption),void 0!==e.StorageClass&&(n["x-amz-storage-class"]=e.StorageClass),void 0!==e.Tagging&&(n["x-amz-tagging"]=e.Tagging),void 0!==e.WebsiteRedirectLocation&&(n["x-amz-website-redirect-location"]=e.WebsiteRedirectLocation),void 0!==e.Metadata&&Object.keys(e.Metadata).forEach((function(t){n["x-amz-meta-"+t]=e.Metadata[t]})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={uploads:""},[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"POST",headers:n,path:r,query:o,body:void 0}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,v(e,t)]:(n={$metadata:R(e),__type:"CreateMultipartUploadOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),[4,U(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),ke=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(z.getSsecPlugin)(t)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(c.__generator)(this,(function(u){if((n={})["Content-Type"]="application/octet-stream",void 0!==e.ContentLength&&(n["Content-Length"]=e.ContentLength.toString()),void 0!==e.ContentMD5&&(n["Content-MD5"]=e.ContentMD5),void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),void 0!==e.SSECustomerAlgorithm&&(n["x-amz-server-side-encryption-customer-algorithm"]=e.SSECustomerAlgorithm),void 0!==e.SSECustomerKey&&(n["x-amz-server-side-encryption-customer-key"]=e.SSECustomerKey),void 0!==e.SSECustomerKeyMD5&&(n["x-amz-server-side-encryption-customer-key-MD5"]=e.SSECustomerKeyMD5),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={"x-id":"UploadPart"},void 0!==e.PartNumber&&(o.partNumber=e.PartNumber.toString()),void 0!==e.UploadId&&(o.uploadId=e.UploadId),void 0!==e.Body&&(a=e.Body,s=a),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"PUT",headers:n,path:r,query:o,body:s}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,S(e,t)]:(n={$metadata:R(e),__type:"UploadPartOutput",ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),[4,M(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),je=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(c.__generator)(this,(function(u){if((n={})["Content-Type"]="application/xml",void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={},void 0!==e.UploadId&&(o.uploadId=e.UploadId),void 0!==e.MultipartUpload&&(a=I(e.MultipartUpload,t),s='<?xml version="1.0" encoding="UTF-8"?>',a.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=a.toString()),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"POST",headers:n,path:r,query:o,body:s}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,g(e,t)]:(n={$metadata:R(e),__type:"CompleteMultipartUploadOutput",Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,U(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.ETag&&(n.ETag=r.ETag),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.Location&&(n.Location=r.Location),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),Ne=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(c.__generator)(this,(function(s){if((n={})["Content-Type"]="",void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&(o.uploadId=e.UploadId),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"DELETE",headers:n,path:r,query:o,body:void 0}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n;return Object(c.__generator)(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=400?[2,p(e,t)]:(n={$metadata:R(e),__type:"AbortMultipartUploadOutput",RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,M(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),Re=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(B.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use(Object(L.getBucketEndpointPlugin)(t));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(c.__generator)(this,(function(s){if((n={})["Content-Type"]="",void 0!==e.RequestPayer&&(n["x-amz-request-payer"]=e.RequestPayer),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Object(f.extendedEncodeURIComponent)(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Object(f.extendedEncodeURIComponent)(e)})).join("/")),o={"x-id":"ListParts"},void 0!==e.MaxParts&&(o["max-parts"]=e.MaxParts.toString()),void 0!==e.PartNumberMarker&&(o["part-number-marker"]=e.PartNumberMarker.toString()),void 0!==e.UploadId&&(o.uploadId=e.UploadId),[2,new l.HttpRequest(Object(c.__assign)(Object(c.__assign)({},t.endpoint),{protocol:"https",method:"GET",headers:n,path:r,query:o,body:void 0}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(c.__generator)(this,(function(o){switch(o.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,b(e,t)]:(n={$metadata:R(e),__type:"ListPartsOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,U(e.body,t)]);case 1:return void 0!==(r=o.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Initiator&&(n.Initiator=x(r.Initiator,t)),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.MaxParts&&(n.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(n.NextPartNumberMarker=parseInt(r.NextPartNumberMarker)),void 0!==r.Owner&&(n.Owner=j(r.Owner,t)),void 0!==r.PartNumberMarker&&(n.PartNumberMarker=parseInt(r.PartNumberMarker)),""===r.Part&&(n.Parts=[]),void 0!==r.Part&&(i=r.Part instanceof Array?r.Part:[r.Part],n.Parts=N(i,t)),void 0!==r.StorageClass&&(n.StorageClass=r.StorageClass),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(f.Command),Me=n(78),Ue=n(60),De=n(124),Le={bufferBody:!0},Be=function(){return(Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ze=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Fe=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},qe=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ke=new r.a("AWSS3ProviderManagedUpload"),He=function(){function e(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}return e.prototype.upload=function(){return ze(this,void 0,void 0,(function(){var e,t,n,r,i;return Fe(this,(function(o){switch(o.label){case 0:return this.body=this.validateAndSanitizeBody(this.params.Body),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(e=new Te(this.params),[2,this._createNewS3Client(this.opts,this.emitter).send(e)]):[3,1];case 1:return[4,this.createMultiPartUpload()];case 2:t=o.sent(),n=Math.ceil(this.totalBytesToUpload/this.minPartSize),r=0,o.label=3;case 3:return r<n?[4,this.checkIfUploadCancelled(t)]:[3,8];case 4:return o.sent(),i=this.createParts(r),[4,this.uploadParts(t,i)];case 5:return o.sent(),[4,this.checkIfUploadCancelled(t)];case 6:o.sent(),o.label=7;case 7:return r+=this.queueSize,[3,3];case 8:return[4,this.finishMultiPartUpload(t)];case 9:return[2,o.sent()]}}))}))},e.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var i=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,i),partNumber:++n,emitter:new Ue.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},e.prototype.createMultiPartUpload=function(){return ze(this,void 0,void 0,(function(){var e,t,n;return Fe(this,(function(r){switch(r.label){case 0:return e=new xe({Bucket:this.params.Bucket,Key:this.params.Key}),(t=this._createNewS3Client(this.opts)).middlewareStack.remove("SET_CONTENT_LENGTH"),[4,t.send(e)];case 1:return n=r.sent(),Ke.debug(n.UploadId),[2,n.UploadId]}}))}))},e.prototype.uploadParts=function(e,t){return ze(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h;return Fe(this,(function(p){switch(p.label){case 0:n=[];try{for(r=qe(t),i=r.next();!i.done;i=r.next())o=i.value,this.setupEventListener(o),s={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:e,Key:this.params.Key,Bucket:this.params.Bucket},a=new ke(s),(u=this._createNewS3Client(this.opts,o.emitter)).middlewareStack.remove("SET_CONTENT_LENGTH"),n.push(u.send(a))}catch(e){d={error:e}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(d)throw d.error}}p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:for(c=p.sent(),l=0;l<c.length;l++)this.multiPartMap.push({PartNumber:t[l].partNumber,ETag:c[l].ETag});return[3,4];case 3:return f=p.sent(),Ke.error("error happened while uploading a part. Cancelling the multipart upload",f),this.cancelUpload(),[2];case 4:return[2]}}))}))},e.prototype.finishMultiPartUpload=function(e){return ze(this,void 0,void 0,(function(){var t,n,r;return Fe(this,(function(i){switch(i.label){case 0:return t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e,MultipartUpload:{Parts:this.multiPartMap}},n=new je(t),(r=this._createNewS3Client(this.opts)).middlewareStack.remove("SET_CONTENT_LENGTH"),[4,r.send(n)];case 1:return[2,i.sent().Key]}}))}))},e.prototype.checkIfUploadCancelled=function(e){return ze(this,void 0,void 0,(function(){var t,n;return Fe(this,(function(r){switch(r.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cleanup(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}}))}))},e.prototype.cancelUpload=function(){this.cancel=!0},e.prototype.cleanup=function(e){return ze(this,void 0,void 0,(function(){var t,n,r;return Fe(this,(function(i){switch(i.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e},(n=this._createNewS3Client(this.opts)).middlewareStack.remove("SET_CONTENT_LENGTH"),[4,n.send(new Ne(t))];case 1:return i.sent(),[4,n.send(new Re(t))];case 2:if((r=i.sent())&&r.Parts&&r.Parts.length>0)throw new Error("Multi Part upload clean up failed");return[2]}}))}))},e.prototype.setupEventListener=function(e){var t=this;e.emitter.on("sendProgress",(function(n){t.progressChanged(e.partNumber,n.loaded-e._lastUploadedBytes),e._lastUploadedBytes=n.loaded}))},e.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit("sendProgress",{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},e.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},e.prototype.validateAndSanitizeBody=function(e){return"undefined"!=typeof File&&e instanceof File?e:"string"==typeof e?Object(Me.fromString)(e):Object(Me.fromString)(JSON.stringify(e))},e.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",s3BucketEndpoint:!0,s3ForcePathStyle:!0}),new _e(Be(Be({region:n,credentials:r},i),{requestHandler:new Ce(Le,t),customUserAgent:Object(u.b)(),urlParser:De.parseUrl}))},e}(),Ve={};function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $e=function(){return($e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},We=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ye=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Je=new r.a("AWSS3Provider"),Xe="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Qe=function(e,t,n,r,i){e&&s.a.dispatch("storage",{event:t,data:{attrs:n,metrics:r},message:i},"Storage",Xe)},Ze=function(){function e(e){this._config=e||{},Je.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){if(Je.debug("configure Storage",e),!e)return this._config;var t=o.a.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||Je.debug("Do not have bucket yet"),this._config},e.prototype.get=function(e,t){return We(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,_,b,w,S,E;return Ye(this,(function(O){switch(O.label){case 0:return[4,this._ensureCredentials()];case 1:if(!O.sent())return[2,Promise.reject("No credentials")];if(n=Object.assign({},this._config,t),r=n.bucket,i=n.download,o=n.cacheControl,s=n.contentDisposition,a=n.contentEncoding,u=n.contentLanguage,c=n.contentType,l=n.expires,f=n.track,d=this._prefix(n),h=d+e,p=this._createNewS3Client(n),Je.debug("get "+e+" from "+h),g={Bucket:r,Key:h},o&&(g.ResponseCacheControl=o),s&&(g.ResponseContentDisposition=s),a&&(g.ResponseContentEncoding=a),u&&(g.ResponseContentLanguage=u),c&&(g.ResponseContentType=c),!0!==i)return[3,5];v=new F(g),O.label=2;case 2:return O.trys.push([2,4,,5]),[4,p.send(v)];case 3:return y=O.sent(),Qe(f,"download",{method:"get",result:"success"},{fileSize:Number(y.Body.length)},"Download success for "+e),[2,y];case 4:throw m=O.sent(),Qe(f,"download",{method:"get",result:"failed"},null,"Download failed with "+m.message),m;case 5:g.Expires=l||900,g.Expires=new Date(Date.now()+1e3*g.Expires),O.label=6;case 6:return O.trys.push([6,9,,10]),_=new Se.S3RequestPresigner($e({},p.config)),[4,Object(we.createRequest)(p,new F(g))];case 7:return b=O.sent(),S=be.formatUrl,[4,_.presign(b,g.Expires)];case 8:return w=S.apply(void 0,[O.sent()]),Qe(f,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+w),[2,w];case 9:throw E=O.sent(),Je.warn("get signed url error",E),Qe(f,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+e),E;case 10:return[2]}}))}))},e.prototype.put=function(e,t,n){return We(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,h,p,g,v,y,m,_,b,w,S,E,O,A;return Ye(this,(function(I){switch(I.label){case 0:return[4,this._ensureCredentials()];case 1:if(!I.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,n),i=r.bucket,o=r.track,s=r.progressCallback,a=r.contentType,u=r.contentDisposition,c=r.cacheControl,l=r.expires,f=r.metadata,d=r.tagging,h=r.serverSideEncryption,p=r.SSECustomerAlgorithm,g=r.SSECustomerKey,v=r.SSECustomerKeyMD5,y=r.SSEKMSKeyId,m=a||"binary/octet-stream",_=this._prefix(r),b=_+e,Je.debug("put "+e+" to "+b),w={Bucket:i,Key:b,Body:t,ContentType:m},c&&(w.CacheControl=c),u&&(w.ContentDisposition=u),l&&(w.Expires=l),f&&(w.Metadata=f),d&&(w.Tagging=d),h&&(w.ServerSideEncryption=h,p&&(w.SSECustomerAlgorithm=p),g&&(w.SSECustomerKey=g),v&&(w.SSECustomerKeyMD5=v),y&&(w.SSEKMSKeyId=y)),S=new Ue.EventEmitter,E=new He(w,r,S),I.label=2;case 2:return I.trys.push([2,4,,5]),S.on("sendProgress",(function(e){s&&("function"==typeof s?s(e):Je.warn("progressCallback should be a function, not a "+Ge(s)))})),[4,E.upload()];case 3:return O=I.sent(),Je.debug("upload result",O),Qe(o,"upload",{method:"put",result:"success"},null,"Upload success for "+e),[2,{key:e}];case 4:throw A=I.sent(),Je.warn("error uploading",A),Qe(o,"upload",{method:"put",result:"failed"},null,"Error uploading "+e),A;case 5:return[2]}}))}))},e.prototype.remove=function(e,t){return We(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ye(this,(function(f){switch(f.label){case 0:return[4,this._ensureCredentials()];case 1:if(!f.sent())return[2,Promise.reject("No credentials")];n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=this._prefix(n),s=o+e,a=this._createNewS3Client(n),Je.debug("remove "+e+" from "+s),u=new q({Bucket:r,Key:s}),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=f.sent(),Qe(i,"delete",{method:"remove",result:"success"},null,"Deleted "+e+" successfully"),[2,c];case 4:throw l=f.sent(),Qe(i,"delete",{method:"remove",result:"failed"},null,"Deletion of "+e+" failed with "+l),l;case 5:return[2]}}))}))},e.prototype.list=function(e,t){return We(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return Ye(this,(function(h){switch(h.label){case 0:return[4,this._ensureCredentials()];case 1:if(!h.sent())return[2,Promise.reject("No credentials")];n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=n.maxKeys,s=this._prefix(n),a=s+e,u=this._createNewS3Client(n),Je.debug("list "+e+" from "+a),c=new K({Bucket:r,Prefix:a,MaxKeys:o}),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,u.send(c)];case 3:return l=h.sent(),f=l.Contents.map((function(e){return{key:e.Key.substr(s.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),Qe(i,"list",{method:"list",result:"success"},null,f.length+" items returned from list operation"),Je.debug("list",f),[2,f];case 4:throw d=h.sent(),Je.warn("list error",d),Qe(i,"list",{method:"list",result:"failed"},null,"Listing items failed: "+d.message),d;case 5:return[2]}}))}))},e.prototype._ensureCredentials=function(){var e=this;return a.a.get().then((function(t){if(!t)return!1;var n=a.a.shear(t);return Je.debug("set credentials for storage",n),e._config.credentials=n,!0})).catch((function(e){return Je.warn("ensure credentials error",e),!1}))},e.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},i=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+i+"/",s=(void 0!==r.protected?r.protected:"protected/")+i+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return s;default:return a}},e.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",s3BucketEndpoint:!0,s3ForcePathStyle:!0}),new _e($e($e({region:n,credentials:r,customUserAgent:Object(u.b)()},i),{requestHandler:new Ce(Ve,t)}))},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),et=function(){return(et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},tt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},nt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},rt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},it=new r.a("StorageClass"),ot=function(){function e(){this._config={},this._pluggables=[],it.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this),i.a.register(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory()){this._pluggables.push(e);return e.configure(this._config[e.getProviderName()])}},e.prototype.getPluggable=function(e){var t=this._pluggables.find((function(t){return t.getProviderName()===e}));return void 0===t?(it.debug("No plugin found with providerName",e),null):t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this;if(it.debug("configure Storage"),!e)return this._config;var n=o.a.parseMobilehubConfig(e),r=Object.keys(n.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],s=function(e){return i.some((function(t){return t===e}))};return r&&r.find((function(e){return s(e)}))&&!n.Storage.AWSS3&&(n.Storage.AWSS3={}),Object.entries(n.Storage).map((function(e){var t=rt(e,2),r=t[0],i=t[1];r&&s(r)&&void 0!==i&&(n.Storage.AWSS3[r]=i,delete n.Storage[r])})),Object.keys(n.Storage).forEach((function(e){"string"!=typeof n.Storage[e]&&(t._config[e]=et(et({},t._config[e]),n.Storage[e]))})),this._pluggables.forEach((function(e){e.configure(t._config[e.getProviderName()])})),0===this._pluggables.length&&this.addPluggable(new Ze),this._config},e.prototype.get=function(e,t){return tt(this,void 0,void 0,(function(){var n,r,i;return nt(this,(function(o){return n=(t||{}).provider,r=void 0===n?"AWSS3":n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(it.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.get(e,t)]}))}))},e.prototype.put=function(e,t,n){return tt(this,void 0,void 0,(function(){var r,i,o;return nt(this,(function(s){return r=(n||{}).provider,i=void 0===r?"AWSS3":r,void 0===(o=this._pluggables.find((function(e){return e.getProviderName()===i})))&&(it.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider")),[2,o.put(e,t,n)]}))}))},e.prototype.remove=function(e,t){return tt(this,void 0,void 0,(function(){var n,r,i;return nt(this,(function(o){return n=(t||{}).provider,r=void 0===n?"AWSS3":n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(it.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.remove(e,t)]}))}))},e.prototype.list=function(e,t){return tt(this,void 0,void 0,(function(){var n,r,i;return nt(this,(function(o){return n=(t||{}).provider,r=void 0===n?"AWSS3":n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(it.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.list(e,t)]}))}))},e}()},function(e,t,n){var r,i,o;e.exports=(o=n(20),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,u=n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=(a|u)<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(e,t,n){e.exports=n(204)},function(e,t,n){"use strict";function r(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function i(e,t){var n=e.locationOffset.column-1,r=o(n)+e.body,i=t.line-1,s=e.locationOffset.line-1,a=t.line+s,u=1===t.line?n:0,c=t.column+u,l=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(a,":").concat(c,")\n")+function(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=0,r=!0,i=!1,s=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value[0];n=Math.max(n,c.length)}}catch(e){i=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}return t.map((function(e){var t,r=e[0],i=e[1];return o(n-(t=r).length)+t+i})).join("\n")}([["".concat(a-1,": "),l[i-1]],["".concat(a,": "),l[i]],["",o(c-1)+"^"],["".concat(a+1,": "),l[i+1]]])}function o(e){return Array(e+1).join(" ")}function s(e,t,n,i,o,a,u){var c=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,l=n;if(!l&&c){var f=c[0];l=f&&f.loc&&f.loc.source}var d,h=i;!h&&c&&(h=c.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),h&&0===h.length&&(h=void 0),i&&n?d=i.map((function(e){return r(n,e)})):c&&(d=c.reduce((function(e,t){return t.loc&&e.push(r(t.loc.source,t.loc.start)),e}),[]));var p=u||a&&a.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:d||void 0,enumerable:Boolean(d)},path:{value:o||void 0,enumerable:Boolean(o)},nodes:{value:c||void 0},source:{value:l||void 0},positions:{value:h||void 0},originalError:{value:a},extensions:{value:p||void 0,enumerable:Boolean(p)}}),a&&a.stack?Object.defineProperty(this,"stack",{value:a.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}n.d(t,"a",(function(){return s})),s.prototype=Object.create(Error.prototype,{constructor:{value:s},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,o=!1,s=void 0;try{for(var a,u=e.nodes[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;c.loc&&t.push(i(c.loc.source,r(c.loc.source,c.loc.start)))}}catch(e){o=!0,s=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw s}}}else if(e.source&&e.locations){var l=e.source,f=!0,d=!1,h=void 0;try{for(var p,g=e.locations[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var v=p.value;t.push(i(l,v))}}catch(e){d=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";const r=n(36),i=n(36).buildOptions,o=n(199),s=1,a=2,u=3,c=4,l="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const f={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};t.defaultOptions=f;const d=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];t.props=d;function h(e,t,n){const r=e[7]||n;let i=e[12];return i&&(t.trimValues&&(i=i.trim()),i=t.tagValueProcessor(i,r),i=v(i,t.parseNodeValue,t.parseTrueNumberOnly)),i}function p(e){return"]]>"===e[4]?c:"/"===e[10]?a:void 0!==e[8]&&"/"===e[8].substr(e[8].length-1)?u:s}function g(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function v(e,t,n){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/0+$/,"")):t=Number.parseInt(e,10),n&&(t=String(t)===e?t:e)),t}return r.isExist(e)?e:""}const y=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function m(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=r.getAllMatches(e,y),i=n.length,o={};for(let e=0;e<i;e++){const r=g(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),o[t.attributeNamePrefix+r]=v(n[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(o[t.attributeNamePrefix+r]=!0))}if(!Object.keys(o).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=o,e}return o}}t.getTraversalObj=function(e,t){t=i(t,f,d),e=e.replace(/<!--[\s\S]*?-->/g,"");const n=new o("!xml");let s=n;const g=new RegExp(l,"g");let v=g.exec(e),y=g.exec(e);for(;v;){const n=p(v);if(n===a)s.parent&&v[12]&&(s.parent.val=r.getValue(s.parent.val)+""+h(v,t,s.parent.tagname)),t.stopNodes.length&&t.stopNodes.includes(s.tagname)&&(s.child=[],null==s.attrsMap&&(s.attrsMap={}),s.val=e.substr(s.startIndex+1,v.index-s.startIndex-1)),s=s.parent;else if(n===c)if(t.cdataTagName){const e=new o(t.cdataTagName,s,v[3]);e.attrsMap=m(v[8],t),s.addChild(e),s.val=r.getValue(s.val)+t.cdataPositionChar,v[12]&&(s.val+=h(v,t))}else s.val=(s.val||"")+(v[3]||"")+h(v,t);else if(n===u){s&&v[12]&&(s.val=r.getValue(s.val)+""+h(v,t));const e=new o(t.ignoreNameSpace?v[7]:v[5],s,"");v[8]&&v[8].length>0&&(v[8]=v[8].substr(0,v[8].length-1)),e.attrsMap=m(v[8],t),s.addChild(e)}else{const e=new o(t.ignoreNameSpace?v[7]:v[5],s,h(v,t));t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=v.index+v[1].length),e.attrsMap=m(v[8],t),s.addChild(e),s=e}v=y,y=g.exec(e)}return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,i=r?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",o=r?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",s="x-amz-user-agent"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(44);t.buildQueryString=function(e){var t,n,o=[];try{for(var s=r.__values(Object.keys(e).sort()),a=s.next();!a.done;a=s.next()){var u=a.value,c=e[u];if(u=i.escapeUri(u),Array.isArray(c))for(var l=0,f=c.length;l<f;l++)o.push(u+"="+i.escapeUri(c[l]));else{var d=u;(c||"string"==typeof c)&&(d+="="+i.escapeUri(c)),o.push(d)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o.join("&")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return de}));var r=n(130),i=n.n(r).a,o=n(32),s=n(17),a=n(54),u=n(131),c=n(19),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=new o.a("AbstractPubSubProvider"),d=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=l(l({},e),this._config),f.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return l({},this._config)},enumerable:!0,configurable:!0}),e}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p,g=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},b=new o.a("MqttOverWSProvider");var w=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return y(this,void 0,void 0,(function(){var n;return m(this,(function(r){return(n=this.promises.get(e))||(n=t(e),this.promises.set(e,n)),[2,n]}))}))},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),S="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",E=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,v(v({},t),{clientId:t.clientId||Object(c.v4)()}))||this;return n._clientsQueue=new w,n._topicObservers=new Map,n._clientIdObservers=new Map,n}return g(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"===h(e)&&e[S]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=_(e,["clientId","errorCode"]);if(0!==r){b.warn(n,JSON.stringify(v({errorCode:r},i),null,2));var o=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach((function(e){e.error("Disconnected, error code: "+r),t._topicObservers.forEach((function(t,n){t.delete(e),0===t.size&&o.push(n)}))})),this._clientIdObservers.delete(n),o.forEach((function(e){t._topicObservers.delete(e)}))}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return y(this,void 0,void 0,(function(){var e,r=this;return m(this,(function(i){switch(i.label){case 0:return b.debug("Creating new MQTT client",n),(e=new u.Client(t,n)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},e.onConnectionLost=function(e){var t=e.errorCode,i=_(e,["errorCode"]);r.onDisconnect(v({clientId:n,errorCode:t},i))},[4,new Promise((function(t,n){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(e)},onFailure:n})}))];case 1:return i.sent(),[2,e]}}))}))},t.prototype.connect=function(e,t){return void 0===t&&(t={}),y(this,void 0,void 0,(function(){var n=this;return m(this,(function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,(function(e){return n.newClient(v(v({},t),{clientId:e}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.disconnect=function(e){return y(this,void 0,void 0,(function(){var t;return m(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e,(function(){return null}))];case 1:return(t=n.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(e),[2]}}))}))},t.prototype.publish=function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o;return m(this,(function(s){switch(s.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.endpoint];case 1:return i=s.sent(),[4,this.connect(this.clientId,{url:i})];case 2:return o=s.sent(),b.debug("Publishing to topic(s)",n.join(","),r),n.forEach((function(e){return o.send(e,r)})),[2]}}))}))},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach((function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return!1}return r===i.length})(r,e)&&n.push(t)}));var r=JSON.parse(t);"object"===h(r)&&(r[S]=e),n.forEach((function(e){e.forEach((function(e){return e.next(r)}))}))}catch(e){b.warn("Error handling message",e,t)}},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=[].concat(e);return b.debug("Subscribing to topic(s)",r.join(",")),new i((function(e){var i;r.forEach((function(t){var r=n._topicObservers.get(t);r||(r=new Set,n._topicObservers.set(t,r)),r.add(e)}));var o=t.clientId,s=void 0===o?n.clientId:o,a=n._clientIdObservers.get(s);return a||(a=new Set),a.add(e),n._clientIdObservers.set(s,a),y(n,void 0,void 0,(function(){var n,o,a,u;return m(this,(function(c){switch(c.label){case 0:return void 0!==(n=t.url)?[3,2]:[4,this.endpoint];case 1:return a=c.sent(),[3,3];case 2:a=n,c.label=3;case 3:o=a,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,this.connect(s,{url:o})];case 5:return i=c.sent(),r.forEach((function(e){i.subscribe(e)})),[3,7];case 6:return u=c.sent(),e.error(u),[3,7];case 7:return[2]}}))})),function(){return b.debug("Unsubscribing from topic(s)",r.join(",")),i&&(n._clientIdObservers.get(s).delete(e),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),r.forEach((function(t){var r=n._topicObservers.get(t)||new Set;r.delete(e),0===r.size&&(n._topicObservers.delete(t),i.isConnected()&&i.unsubscribe(t))}))),null}}))},t}(d),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},I=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},P=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},T=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(P(arguments[t]));return e},x=new o.a("AWSAppSyncProvider"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return O(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return A(this,void 0,void 0,(function(){return I(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter((function(t){return P(t,2)[1].clientId===e})).map((function(e){return P(e,1)[0]})).forEach((function(e){return t._cleanUpForTopic(e)}))},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=C(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter((function(e){return P(e,2)[1].clientId===n})).map((function(e){return P(e,1)[0]})).forEach((function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach((function(e){e.closed||e.error(i)})),t._topicObservers.delete(e))})),this._cleanUp(n))},t.prototype.disconnect=function(t){return A(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,(function(){return null}))];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}}))}))},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new i((function(r){var i=[].concat(e);return x.debug("Subscribing to topic(s)",i.join(",")),A(n,void 0,void 0,(function(){var e,n,o,s,a,u=this;return I(this,(function(c){switch(c.label){case 0:return i.forEach((function(e){u._topicObservers.has(e)||u._topicObservers.set(e,new Set),u._topicObservers.get(e).add(r)})),e=t.mqttConnections,n=void 0===e?[]:e,o=t.newSubscriptions,s=Object.entries(o).map((function(e){var t=P(e,2),n=t[0];return[t[1].topic,n]})),this._topicAlias=new Map(T(Array.from(this._topicAlias.entries()),s)),a=Object.entries(i.reduce((function(e,t){var r=n.find((function(e){return e.topics.indexOf(t)>-1}));if(r){var i=r.client,o=r.url;e[i]||(e[i]={url:o,topics:new Set}),e[i].topics.add(t)}return e}),{})),[4,Promise.all(a.map((function(e){var t=P(e,2),n=t[0],i=t[1],o=i.url,s=i.topics;return A(u,void 0,void 0,(function(){var e,t,i=this;return I(this,(function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return s.forEach((function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))})),[2,e]}}))}))})))];case 1:return c.sent(),[2]}}))})),function(){x.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach((function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some((function(e){return e===t}))||n.disconnect(t.clientId)),n._topicObservers.delete(e)}))}}));return i.from(r).map((function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce((function(e,t){var n=P(t,2),i=n[0],o=n[1];return e[r||i]=o,e}),{}),e}))},t}(E),j=n(51),N=n(8),R=n(6),M=n(63),U=n(4),D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},B=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},z=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},F=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(z(arguments[t]));return e},q=new o.a("Util"),K=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return D(t,e),t}(Error);var H,V,G,$=function(e,t,n){return void 0===n&&(n=3e5),function e(t,n,r,i){return void 0===i&&(i=1),L(this,void 0,void 0,(function(){var o,s;return B(this,(function(a){switch(a.label){case 0:if("function"!=typeof t)throw Error("functionToRetry must be a function");q.debug(t.name+" attempt #"+i+" with this vars: "+JSON.stringify(n)),a.label=1;case 1:return a.trys.push([1,3,,8]),[4,t.apply(void 0,F(n))];case 2:return[2,a.sent()];case 3:if(o=a.sent(),q.debug("error on "+t.name+": "+o+" "),(u=o)&&u.nonRetryable)throw q.debug(t.name+" non retryable error "+o),o;return s=r(i,n,o),q.debug(t.name+" retrying in "+s+" ms"),!1===s?[3,6]:[4,new Promise((function(e){return setTimeout(e,s)}))];case 4:return a.sent(),[4,e(t,n,r,i+1)];case 5:return[2,a.sent()];case 6:throw o;case 7:return[3,8];case 8:return[2]}var u}))}))}(e,t,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(n))},W=n(71),Y=n(57),J=n(28),X=n(40),Q=n(38),Z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(){return(ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},te=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ne=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},re=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ie=new o.a("AWSAppSyncRealTimeProvider"),oe="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",se=[400,401,403];!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error"}(H||(H={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(V||(V={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(G||(G={}));var ae={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.socketStatus=G.CLOSED,t.keepAliveTimeout=3e5,t.subscriptionObserverMap=new Map,t.promiseArray=[],t}return Z(t,e),t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return te(this,void 0,void 0,(function(){return ne(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype.subscribe=function(e,t){var n=this,r=t.appSyncGraphqlEndpoint;return new i((function(e){if(r){var i=Object(c.v4)();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:i}),function(){return te(n,void 0,void 0,(function(){var e,t;return ne(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(i)];case 1:if(n.sent(),!(e=(this.subscriptionObserverMap.get(i)||{}).subscriptionState))return[2];if(e!==V.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(i),[3,4];case 2:return t=n.sent(),ie.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(i),[7];case 4:return[2]}}))}))}}e.error({errors:[ee({},new j.a("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()}))},t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t=e.options,n=e.observer,r=e.subscriptionId;return te(this,void 0,void 0,(function(){var e,i,o,s,u,c,l,f,d,h,p,g,v,y,m,_,b,w,S,E,O,A,I,C,P=this;return ne(this,(function(T){switch(T.label){case 0:return e=t.appSyncGraphqlEndpoint,i=t.authenticationType,o=t.query,s=t.variables,u=t.apiKey,c=t.region,l=t.graphql_headers,f=void 0===l?function(){return{}}:l,d=V.PENDING,h={query:o,variables:s},this.subscriptionObserverMap.set(r,{observer:n,query:o,variables:s,subscriptionState:d,startAckTimeoutId:null}),p=JSON.stringify(h),v=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:u,appSyncGraphqlEndpoint:e,authenticationType:i,payload:p,canonicalUri:"",region:c})];case 1:return y=[ee.apply(void 0,v.concat([T.sent()]))],[4,f()];case 2:g=ee.apply(void 0,[ee.apply(void 0,y.concat([T.sent()])),(C={},C[a.c]=U.a.userAgent,C)]),m={id:r,payload:{data:p,extensions:{authorization:ee({},g)}},type:H.GQL_START},_=JSON.stringify(m),T.label=3;case 3:return T.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:u,appSyncGraphqlEndpoint:e,authenticationType:i,region:c})];case 4:return T.sent(),[3,6];case 5:return b=T.sent(),ie.debug({err:b}),w=b.message,S=void 0===w?"":w,n.error({errors:[ee({},new j.a("Connection failed: "+S))]}),n.complete(),"function"==typeof(E=(this.subscriptionObserverMap.get(r)||{}).subscriptionFailedCallback)&&E(),[2];case 6:return O=this.subscriptionObserverMap.get(r),A=O.subscriptionFailedCallback,I=O.subscriptionReadyCallback,this.subscriptionObserverMap.set(r,{observer:n,subscriptionState:d,variables:s,query:o,subscriptionReadyCallback:I,subscriptionFailedCallback:A,startAckTimeoutId:setTimeout((function(){P._timeoutStartSubscriptionAck.call(P,r)}),15e3)}),this.awsRealTimeSocket.send(_),[2]}}))}))},t.prototype._waitForSubscriptionToBeConnected=function(e){return te(this,void 0,void 0,(function(){var t=this;return ne(this,(function(n){return this.subscriptionObserverMap.get(e).subscriptionState===V.PENDING?[2,new Promise((function(n,r){var i=t.subscriptionObserverMap.get(e),o=i.observer,s=i.subscriptionState,a=i.variables,u=i.query;t.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:u,subscriptionReadyCallback:n,subscriptionFailedCallback:r})}))]:[2]}))}))},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===G.READY){var t={id:e,type:H.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){ie.debug({err:e})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{ie.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var e=this.awsRealTimeSocket;e.onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=G.CLOSED}else this.socketStatus=G.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){ie.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,u=void 0===a?null:a,c=s.query,l=void 0===c?"":c,f=s.variables,d=void 0===f?{}:f,h=s.startAckTimeoutId,p=s.subscriptionReadyCallback,g=s.subscriptionFailedCallback;if(ie.debug({id:r,observer:u,query:l,variables:d}),o===H.GQL_DATA&&i&&i.data)u?u.next(i):ie.debug("observer not found for id: "+r);else if(o!==H.GQL_START_ACK){if(o===H.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,Q.a.TIMEOUT_DISCONNECT),this.keepAliveTimeout));if(o===H.GQL_ERROR){v=V.FAILED;this.subscriptionObserverMap.set(r,{observer:u,query:l,variables:d,startAckTimeoutId:h,subscriptionReadyCallback:p,subscriptionFailedCallback:g,subscriptionState:v}),u.error({errors:[ee({},new j.a("Connection failed: "+JSON.stringify(i)))]}),clearTimeout(h),u.complete(),"function"==typeof g&&g()}}else{ie.debug("subscription ready for "+JSON.stringify({query:l,variables:d})),"function"==typeof p&&p(),clearTimeout(h),function(e,t,n){M.a.dispatch("api",{event:e,data:t,message:n},"PubSub",oe)}("connected",{query:l,variables:d},"Connection established for subscription");var v=V.CONNECTED;this.subscriptionObserverMap.set(r,{observer:u,query:l,variables:d,startAckTimeoutId:null,subscriptionState:v,subscriptionReadyCallback:p,subscriptionFailedCallback:g})}},t.prototype._errorDisconnect=function(e){ie.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach((function(t){var n=t.observer;n.closed||n.error({errors:[ee({},new j.a(e))]})})),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=G.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,i=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:V.FAILED}),n&&!n.closed&&(n.error({errors:[ee({},new j.a("Subscription timeout "+JSON.stringify({query:r,variables:i})))]}),n.complete()),ie.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i})))},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region;if(this.socketStatus!==G.READY)return new Promise((function(e,s){return te(t,void 0,void 0,(function(){var t,a,u,c,l,f,d,h,p;return ne(this,(function(g){switch(g.label){case 0:if(this.promiseArray.push({res:e,rej:s}),this.socketStatus!==G.CLOSED)return[3,5];g.label=1;case 1:return g.trys.push([1,4,,5]),this.socketStatus=G.CONNECTING,t=n.replace("https://","wss://").replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),a="{}",l=(c=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:a,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o})];case 2:return u=l.apply(c,[g.sent()]),f=R.Buffer.from(u).toString("base64"),d=R.Buffer.from(a).toString("base64"),h=t+"?header="+f+"&payload="+d,[4,this._initializeRetryableHandshake({awsRealTimeUrl:h})];case 3:return g.sent(),this.promiseArray.forEach((function(e){var t=e.res;ie.debug("Notifying connection successful"),t()})),this.socketStatus=G.READY,this.promiseArray=[],[3,5];case 4:return p=g.sent(),this.promiseArray.forEach((function(e){return(0,e.rej)(p)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=G.CLOSED,[3,5];case 5:return[2]}}))}))}))},t.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return te(this,void 0,void 0,(function(){return ne(this,(function(e){switch(e.label){case 0:return ie.debug("Initializaling retryable Handshake"),[4,$(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}}))}))},t.prototype._initializeHandshake=function(e){var t=e.awsRealTimeUrl;return te(this,void 0,void 0,(function(){var e,n,r,i=this;return ne(this,(function(o){switch(o.label){case 0:ie.debug("Initializing handshake "+t),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,new Promise((function(e,n){var r=new WebSocket(t,"graphql-ws");r.onerror=function(){ie.debug("WebSocket connection error")},r.onclose=function(){n(new Error("Connection handshake error"))},r.onopen=function(){return i.awsRealTimeSocket=r,e()}}))];case 2:return o.sent(),[4,new Promise((function(e,t){var n=!1;i.awsRealTimeSocket.onerror=function(e){ie.debug("WebSocket error "+JSON.stringify(e))},i.awsRealTimeSocket.onclose=function(e){ie.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},i.awsRealTimeSocket.onmessage=function(r){ie.debug("subscription message from AWS AppSyncRealTime: "+r.data+" ");var o=JSON.parse(r.data),s=o.type,a=o.payload,u=(void 0===a?{}:a).connectionTimeoutMs,c=void 0===u?3e5:u;if(s===H.GQL_CONNECTION_ACK)return n=!0,i.keepAliveTimeout=c,i.awsRealTimeSocket.onmessage=i._handleIncomingSubscriptionMessage.bind(i),i.awsRealTimeSocket.onerror=function(e){ie.debug(e),i._errorDisconnect(Q.a.CONNECTION_CLOSED)},void e("Cool, connected to AWS AppSyncRealTime");if(s===H.GQL_CONNECTION_ERROR){var l=o.payload,f=(void 0===l?{}:l).errors,d=re(void 0===f?[]:f,1)[0],h=void 0===d?{}:d,p=h.errorType,g=void 0===p?"":p,v=h.errorCode;t({errorType:g,errorCode:void 0===v?0:v})}};var r={type:H.GQL_CONNECTION_INIT};i.awsRealTimeSocket.send(JSON.stringify(r)),setTimeout(function(){n||t(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(i),15e3)}))];case 3:return o.sent(),[3,5];case 4:throw e=o.sent(),n=e.errorType,r=e.errorCode,se.includes(r)?new K(n):n?new Error(n):e;case 5:return[2]}}))}))},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region;return te(this,void 0,void 0,(function(){var e,a,u;return ne(this,(function(c){switch(c.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(a=e[t])?(ie.debug("Authentication type "+t+" not supported"),[2,""]):(u=N.parse(i).host,[4,a({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:u})]);case 1:return[2,c.sent()]}}))}))},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return te(this,void 0,void 0,(function(){return ne(this,(function(e){switch(e.label){case 0:return[4,X.a.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}}))}))},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return te(this,void 0,void 0,(function(){var e;return ne(this,(function(n){switch(n.label){case 0:return[4,J.a.getItem("federatedInfo")];case 1:if(!(e=n.sent())||!e.token)throw new Error("No federated jwt");return[2,{Authorization:e.token,host:t}]}}))}))},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return te(this,void 0,void 0,(function(){var e,r;return ne(this,(function(i){return e=new Date,r=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":r,"x-api-key":t}]}))}))},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return te(this,void 0,void 0,(function(){var e,o,s;return ne(this,(function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");return[4,W.a.get().then((function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}}))];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:ee({},ae)},[2,Y.a.sign(s,o,e).headers]}}))}))},t.prototype._ensureCredentials=function(){return W.a.get().then((function(e){if(!e)return!1;var t=W.a.shear(e);return ie.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0})).catch((function(e){return ie.warn("ensure credentials error",e),!1}))},t}(d),ce=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},le=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},fe=new o.a("PubSub"),de=new(function(){function e(e){this._options=e,fe.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this),s.a.register(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new k(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new ue(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return fe.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map((function(e){return e.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return ce(this,void 0,void 0,(function(){return le(this,(function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]}))}))},e.prototype.getProviderByName=function(e){return e===a.a?this.awsAppSyncProvider:e===a.b?this.awsAppSyncRealTimeProvider:this._pluggables.find((function(t){return t.getProviderName()===e}))},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return ce(this,void 0,void 0,(function(){return le(this,(function(r){return[2,Promise.all(this.getProviders(n).map((function(r){return r.publish(e,t,n)})))]}))}))},e.prototype.subscribe=function(e,t){fe.debug("subscribe options",t);var n=this.getProviders(t);return new i((function(r){var i=n.map((function(n){return{provider:n,observable:n.subscribe(e,t)}})).map((function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})}));return function(){return i.forEach((function(e){return e.unsubscribe()}))}}))},e}())(null)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(32),i=n(58),o=n(33),s=n(8),a={clockOffset:0,getDateWithClockOffset:function(){return a.clockOffset?new Date((new Date).getTime()+a.clockOffset):new Date},getClockOffset:function(){return a.clockOffset},setClockOffset:function(e){a.clockOffset=e}};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},f=new r.a("Signer"),d=function(e,t){var n=new i.Sha256(e);return n.update(t),n.digestSync()},h=function(e){var t=e||"",n=new i.Sha256;return n.update(t),Object(o.toHex)(n.digestSync())},p=function(e){return Object.keys(e).map((function(e){return e.toLowerCase()})).sort().join(";")},g=function(e){var t,n,r=Object(s.parse)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map((function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return t[0]+"="+n})).sort((function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1})).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map((function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}})).sort((function(e,t){return e.key<t.key?-1:1})).map((function(e){return e.key+":"+e.value})).join("\n")+"\n":""),p(e.headers),h(e.data)].join("\n")},v=function(e){var t=(Object(s.parse)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},y=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},m=function(e,t,n,r){return[e,n,r,h(t)].join("\n")},_=function(e,t,n){f.debug(n);var r=d("AWS4"+e,t),i=d(r,n.region),o=d(i,n.service);return d(o,"aws4_request")},b=function(e,t){return Object(o.toHex)(d(e,t))},w=function(){function e(){}return e.sign=function(e,t,n){void 0===n&&(n=null),e.headers=e.headers||{};var r=a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=Object(s.parse)(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var u=g(e);f.debug(u);var c=n||v(e),l=y(i,c.region,c.service),d=m("AWS4-HMAC-SHA256",u,r,l),h=_(t.secret_key,i,c),w=b(h,d),S=function(e,t,n,r,i){return[e+" Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}("AWS4-HMAC-SHA256",t.access_key,l,p(e.headers),w);return e.headers.Authorization=S,e},e.signUrl=function(e,t,n,r){var i="object"===u(e)?e.url:e,o="object"===u(e)?e.method:"GET",f="object"===u(e)?e.body:void 0,d=a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),h=d.substr(0,8),p=Object(s.parse)(i,!0,!0),w=(p.search,l(p,["search"])),S={host:w.host},E=n||v({url:Object(s.format)(w)}),O=E.region,A=E.service,I=y(h,O,A),C=t.session_token&&"iotdevicegateway"!==A,P=c(c(c({"X-Amz-Algorithm":"AWS4-HMAC-SHA256","X-Amz-Credential":[t.access_key,I].join("/"),"X-Amz-Date":d.substr(0,16)},C?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(S).join(",")}),T=g({method:o,url:Object(s.format)(c(c({},w),{query:c(c({},w.query),P)})),headers:S,data:f}),x=m("AWS4-HMAC-SHA256",T,d,I),k=_(t.secret_key,h,{region:O,service:A}),j=b(k,x),N=c({"X-Amz-Signature":j},t.session_token&&{"X-Amz-Security-Token":t.session_token});return Object(s.format)({protocol:w.protocol,slashes:!0,hostname:w.hostname,port:w.port,pathname:w.pathname,query:c(c(c({},w.query),P),N)})},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(174),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveEventStreamSerdeConfig=function(e){return Object.assign(Object.assign({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(Object.assign({},e))})}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=v(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(119),i=n(0);var o=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new r.EventStreamMarshaller(t,n)}return e.prototype.deserialize=function(e,t){var n,r,o,s,a,u;return function(e){return Object(i.__asyncGenerator)(this,arguments,(function(){var t,n,r,o,s;return Object(i.__generator)(this,(function(a){switch(a.label){case 0:t=e.getReader(),n=!1,a.label=1;case 1:return n?[3,6]:[4,Object(i.__await)(t.read())];case 2:return r=a.sent(),o=r.done,s=r.value,o?(n=!0,[3,6]):s?[4,Object(i.__await)(s)]:[3,5];case 3:return[4,a.sent()];case 4:a.sent(),a.label=5;case 5:return[3,1];case 6:return[2]}}))}))}(function(e,t){var n=e.getReader();return new ReadableStream({start:function(e){!function r(){var o=this;n.read().then((function(n){var s=n.done,a=n.value;return Object(i.__awaiter)(o,void 0,void 0,(function(){var n,o,u;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(s)return e.close(),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),o=(n=e).enqueue,[4,t(a)];case 2:return o.apply(n,[i.sent()]),r(),[3,4];case 3:return u=i.sent(),e.error(u),[3,4];case 4:return[2]}}))}))}))}()}})}(function(e,t){var n=e.getReader();return new ReadableStream({start:function(e){!function r(){n.read().then((function(n){var i,o,s=n.done,a=n.value;if(s)e.close();else{var u=t.unmarshall(a),c=u.headers[":message-type"].value;if("error"===c){var l=new Error(u.headers[":error-message"].value||"UnknownError");l.name=u.headers[":error-code"].value,e.error(l)}else"exception"===c?e.enqueue(((i={})[u.headers[":exception-type"].value]=u,i)):"event"===c?e.enqueue(((o={})[u.headers[":event-type"].value]=u,o)):e.error(new Error("Unrecognizable event type: "+u.headers[":event-type"].value));r()}}))}()}})}((n=e.getReader(),r=0,o=0,s=null,a=null,u=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);r=e,o=4,s=new Uint8Array(e),new DataView(s.buffer).setUint32(0,e,!1)},new ReadableStream({start:function(e){!function t(){return n.read().then((function(n){var i=n.done,c=n.value;if(i){if(r){if(r!==o)throw new Error("Truncated event message received.");e.enqueue(s)}e.close()}else{for(var l=c.length,f=0;f<l;){if(!s){var d=l-f;a||(a=new Uint8Array(4));var h=Math.min(4-o,d);if(a.set(c.slice(f,f+h),o),f+=h,(o+=h)<4)break;u(new DataView(a.buffer).getUint32(0,!1)),a=null}var p=Math.min(r-o,l-f);s.set(c.slice(f,f+p),o),o+=p,f+=p,r&&r===o&&(e.enqueue(s),s=null,r=0,o=0)}t()}}))}()}})),this.eventMarshaller),t))},e.prototype.serialize=function(e,t){throw new Error("event stream request in browser is not supported\nReference: https://bugs.chromium.org/p/chromium/issues/detail?id=688906")},e}(),s=function(e){return new o(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(32),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},a=new r.a("Hub"),u="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";var c=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","xr"],this.name=e}return e.prototype.remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find((function(t){return t.pattern.source===e.source}));if(!n)return void a.warn("No listeners for "+e);this.patterns=s(this.patterns.filter((function(e){return e!==n})))}else{var r=this.listeners[e];if(!r)return void a.warn("No listeners for "+e);this.listeners[e]=s(r.filter((function(e){return e.callback!==t})))}},e.prototype.dispatch=function(e,t,n,r){(void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1)&&(r===u||a.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences"));var o={channel:e,payload:i({},t),source:n,patternInfo:[]};try{this._toListeners(o)}catch(e){a.error(e)}},e.prototype.listen=function(e,t,n){var r;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))a.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var i=this.listeners[e];i||(i=[],this.listeners[e]=i),i.push({name:n,callback:r})}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach((function(r){a.debug("Dispatching to "+t+" with ",n);try{r.callback(e)}catch(e){a.error(e)}})),this.patterns.length>0){if(!n.message)return void a.warn("Cannot perform pattern matching without a message key");var s=n.message;this.patterns.forEach((function(t){var n=s.match(t.pattern);if(n){var r=o(n).slice(1),u=i(i({},e),{patternInfo:r});try{t.callback(u)}catch(e){a.error(e)}}}))}},e}())("__default__")},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_DELAY_BASE=100,t.MAXIMUM_RETRY_DELAY=2e4,t.RETRYABLE_STATUS_CODES=new Set,[429,500,502,503,504,509].forEach((function(e){return t.RETRYABLE_STATUS_CODES.add(e)})),t.THROTTLING_RETRY_DELAY_BASE=500},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={};t.locateWindow=function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(32),i=new r.a("I18n"),o=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),i.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||(void 0!==t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map((function(n){t.putVocabulariesForLanguage(n,e[n])}))},e}(),s=n(17),a=new r.a("I18n"),u=null,c=null,l=function(){function e(){}return e.configure=function(t){return a.debug("configure I18n"),t?(u=Object.assign({},u,t.I18n||t),e.createInstance(),u):u},e.getModuleName=function(){return"I18n"},e.createInstance=function(){a.debug("create I18n instance"),c||(c=new o(u))},e.setLanguage=function(t){return e.checkConfig(),c.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?c.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),c.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),c.putVocabularies(t)},e.checkConfig=function(){return c||(c=new o(u)),!0},e}();s.a.register(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=new(n(32).a)("ClientDevice_Browser");function i(){return"undefined"==typeof window?{}:function(){if("undefined"==typeof window)return r.warn("No window object available to get browser client info"),{};var e=window.navigator;if(!e)return r.warn("No navigator object available to get browser client info"),{};var t=e.platform,n=e.product,i=e.vendor,o=e.userAgent,s=e.language,a=function(e){var t=/.+(Opera[\s[A-Z]*|OPR[\sA-Z]*)\/([0-9\.]+).*/i.exec(e);if(t)return{type:t[1],version:t[2]};var n=/.+(Trident|Edge)\/([0-9\.]+).*/i.exec(e);if(n)return{type:n[1],version:n[2]};var r=/.+(Chrome|Firefox|FxiOS)\/([0-9\.]+).*/i.exec(e);if(r)return{type:r[1],version:r[2]};var i=/.+(Safari)\/([0-9\.]+).*/i.exec(e);if(i)return{type:i[1],version:i[2]};var o=/.+(AppleWebKit)\/([0-9\.]+).*/i.exec(e);if(o)return{type:o[1],version:o[2]};var s=/.*([A-Z]+)\/([0-9\.]+).*/i.exec(e);if(s)return{type:s[1],version:s[2]};return{type:"",version:""}}(o),u=(c=/\(([A-Za-z\s].*)\)/.exec((new Date).toString()),c&&c[1]||"");var c;return{platform:t,make:n||i,model:a.type,version:a.version,appVersion:[a.type,a.version].join("/"),language:s,timezone:u}}()}var o=function(){function e(){}return e.clientInfo=function(){return i()},e.dimension=function(){return"undefined"==typeof window?(r.warn("No window object available to get browser client info"),{width:320,height:320}):{width:window.innerWidth,height:window.innerHeight}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayBuffer=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(32),i=n(31),o=n(17);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(){function e(){this._logger=new r.a("ServiceWorker")}return Object.defineProperty(e.prototype,"serviceWorker",{get:function(){return this._serviceWorker},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){var n=this;return void 0===e&&(e="/service-worker.js"),void 0===t&&(t="/"),this._logger.debug("registering "+e),this._logger.debug("registering service worker with scope "+t),new Promise((function(r,i){if(!navigator||!("serviceWorker"in navigator))return i(new Error("Service Worker not available"));navigator.serviceWorker.register(e,{scope:t}).then((function(e){return e.installing?n._serviceWorker=e.installing:e.waiting?n._serviceWorker=e.waiting:e.active&&(n._serviceWorker=e.active),n._registration=e,n._setupListeners(),n._logger.debug("Service Worker Registration Success: "+e),r(e)})).catch((function(e){return n._logger.debug("Service Worker Registration Failed "+e),i(e)}))}))},e.prototype.enablePush=function(e){var t=this;if(!this._registration)throw new Error("Service Worker not registered");return this._publicKey=e,new Promise((function(n,r){if(!Object(i.b)().isBrowser)return r(new Error("Service Worker not available"));t._registration.pushManager.getSubscription().then((function(r){if(!r)return t._logger.debug("User is NOT subscribed to push"),t._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlB64ToUint8Array(e)}).then((function(e){t._subscription=e,t._logger.debug("User subscribed: "+JSON.stringify(e)),n(e)})).catch((function(e){t._logger.error(e)}));t._subscription=r,t._logger.debug("User is subscribed to push: "+JSON.stringify(r)),n(r)}))}))},e.prototype._urlB64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r},e.prototype.send=function(e){this._serviceWorker&&this._serviceWorker.postMessage("object"===s(e)?JSON.stringify(e):e)},e.prototype._setupListeners=function(){var e=this;this._serviceWorker.addEventListener("statechange",(function(t){var n=e._serviceWorker.state;e._logger.debug("ServiceWorker statechange: "+n),o.a.Analytics&&"function"==typeof o.a.Analytics.record&&o.a.Analytics.record({name:"ServiceWorker",attributes:{state:n}})})),this._serviceWorker.addEventListener("message",(function(t){e._logger.debug("ServiceWorker message event: "+t)}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ae}));var r=n(32),i=n(46),o=n(31),s=n(42),a=n(35),u=n(17),c=n(0);function l(e){return Promise.all(Object.keys(e).reduce((function(t,n){var r=e[n];return"string"==typeof r?t.push([n,r]):t.push(r().then((function(e){return[n,e]}))),t}),[])).then((function(e){return e.reduce((function(e,t){var n=Object(c.__read)(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}))}var f=n(45),d=n(3);function h(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,l,f,d,h,p,_,O,A,I;return Object(c.__generator)(this,(function(C){switch(C.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,F(e.body,t)];case 1:switch(n=c.__assign.apply(void 0,r.concat([(i.body=C.sent(),i)])),s="UnknownError",a=n.body.__type.split("#"),s=void 0===a[1]?a[0]:a[1],s){case"ExternalServiceException":case"com.amazonaws.cognito.identity.model#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognito.identity.model#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognito.identity.model#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognito.identity.model#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognito.identity.model#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognito.identity.model#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognito.identity.model#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognito.identity.model#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,g(n,t)];case 3:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,u.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 4:return l=[{}],[4,v(n,t)];case 5:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,l.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 6:return f=[{}],[4,y(n,t)];case 7:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,f.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 8:return d=[{}],[4,m(n,t)];case 9:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,d.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 10:return h=[{}],[4,b(n,t)];case 11:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,h.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 12:return p=[{}],[4,w(n,t)];case 13:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,p.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 14:return _=[{}],[4,S(n,t)];case 15:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,_.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 16:return O=[{}],[4,E(n,t)];case 17:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,O.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 18:A=n.body,s=A.code||A.Code||s,o=Object(c.__assign)(Object(c.__assign)({},A),{name:""+s,message:A.message||A.Message||s,$fault:"client",$metadata:L(e)}),C.label=19;case 19:return I=o.message||o.Message||s,o.message=I,delete o.Message,[2,Promise.reject(Object.assign(new Error(I),o))]}}))}))}function p(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,l,f,d,h,p,y,O,A,I;return Object(c.__generator)(this,(function(C){switch(C.label){case 0:return r=[Object(c.__assign)({},e)],i={},[4,F(e.body,t)];case 1:switch(n=c.__assign.apply(void 0,r.concat([(i.body=C.sent(),i)])),s="UnknownError",a=n.body.__type.split("#"),s=void 0===a[1]?a[0]:a[1],s){case"ExternalServiceException":case"com.amazonaws.cognito.identity.model#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognito.identity.model#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognito.identity.model#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognito.identity.model#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognito.identity.model#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognito.identity.model#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognito.identity.model#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognito.identity.model#TooManyRequestsException":return[3,16]}return[3,18];case 2:return u=[{}],[4,g(n,t)];case 3:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,u.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 4:return l=[{}],[4,v(n,t)];case 5:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,l.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 6:return f=[{}],[4,m(n,t)];case 7:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,f.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 8:return d=[{}],[4,_(n,t)];case 9:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,d.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 10:return h=[{}],[4,b(n,t)];case 11:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,h.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 12:return p=[{}],[4,w(n,t)];case 13:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,p.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 14:return y=[{}],[4,S(n,t)];case 15:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,y.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 16:return O=[{}],[4,E(n,t)];case 17:return o=c.__assign.apply(void 0,[c.__assign.apply(void 0,O.concat([C.sent()])),{name:s,$metadata:L(e)}]),[3,19];case 18:A=n.body,s=A.code||A.Code||s,o=Object(c.__assign)(Object(c.__assign)({},A),{name:""+s,message:A.message||A.Message||s,$fault:"client",$metadata:L(e)}),C.label=19;case 19:return I=o.message||o.Message||s,o.message=I,delete o.Message,[2,Promise.reject(Object.assign(new Error(I),o))]}}))}))}var g=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=C(n,t),[2,Object(c.__assign)({name:"ExternalServiceException",$fault:"client",$metadata:L(e)},r)]}))}))},v=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=x(n,t),[2,Object(c.__assign)({name:"InternalErrorException",$fault:"server",$metadata:L(e)},r)]}))}))},y=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=k(n,t),[2,Object(c.__assign)({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:L(e)},r)]}))}))},m=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=j(n,t),[2,Object(c.__assign)({name:"InvalidParameterException",$fault:"client",$metadata:L(e)},r)]}))}))},_=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=N(n,t),[2,Object(c.__assign)({name:"LimitExceededException",$fault:"client",$metadata:L(e)},r)]}))}))},b=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=R(n,t),[2,Object(c.__assign)({name:"NotAuthorizedException",$fault:"client",$metadata:L(e)},r)]}))}))},w=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=M(n,t),[2,Object(c.__assign)({name:"ResourceConflictException",$fault:"client",$metadata:L(e)},r)]}))}))},S=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=U(n,t),[2,Object(c.__assign)({name:"ResourceNotFoundException",$fault:"client",$metadata:L(e)},r)]}))}))},E=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return n=e.body,r=D(n,t),[2,Object(c.__assign)({name:"TooManyRequestsException",$fault:"client",$metadata:L(e)},r)]}))}))},O=function(e,t){var n={};return void 0!==e.CustomRoleArn&&(n.CustomRoleArn=e.CustomRoleArn),void 0!==e.IdentityId&&(n.IdentityId=e.IdentityId),void 0!==e.Logins&&(n.Logins=I(e.Logins,t)),n},A=function(e,t){var n={};return void 0!==e.AccountId&&(n.AccountId=e.AccountId),void 0!==e.IdentityPoolId&&(n.IdentityPoolId=e.IdentityPoolId),void 0!==e.Logins&&(n.Logins=I(e.Logins,t)),n},I=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),n},C=function(e,t){var n={__type:"ExternalServiceException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},P=function(e,t){var n={__type:"GetCredentialsForIdentityResponse",Credentials:void 0,IdentityId:void 0};return void 0!==e.Credentials&&null!==e.Credentials&&(n.Credentials=function(e,t){var n={__type:"Credentials",AccessKeyId:void 0,Expiration:void 0,SecretKey:void 0,SessionToken:void 0};return void 0!==e.AccessKeyId&&null!==e.AccessKeyId&&(n.AccessKeyId=e.AccessKeyId),void 0!==e.Expiration&&null!==e.Expiration&&(n.Expiration=new Date(Math.round(1e3*e.Expiration))),void 0!==e.SecretKey&&null!==e.SecretKey&&(n.SecretKey=e.SecretKey),void 0!==e.SessionToken&&null!==e.SessionToken&&(n.SessionToken=e.SessionToken),n}(e.Credentials)),void 0!==e.IdentityId&&null!==e.IdentityId&&(n.IdentityId=e.IdentityId),n},T=function(e,t){var n={__type:"GetIdResponse",IdentityId:void 0};return void 0!==e.IdentityId&&null!==e.IdentityId&&(n.IdentityId=e.IdentityId),n},x=function(e,t){var n={__type:"InternalErrorException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},k=function(e,t){var n={__type:"InvalidIdentityPoolConfigurationException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},j=function(e,t){var n={__type:"InvalidParameterException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},N=function(e,t){var n={__type:"LimitExceededException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},R=function(e,t){var n={__type:"NotAuthorizedException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},M=function(e,t){var n={__type:"ResourceConflictException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},U=function(e,t){var n={__type:"ResourceNotFoundException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},D=function(e,t){var n={__type:"TooManyRequestsException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},L=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},B=function(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},z=function(e,t,n,r,i){var o=Object(c.__assign)(Object(c.__assign)({},e.endpoint),{protocol:"https",method:"POST",path:n,headers:t});return void 0!==r&&(o.hostname=r),void 0!==i&&(o.body=i),new d.HttpRequest(o)},F=function(e,t){return function(e,t){return B(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},q=n(5),K=n(2),H=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(q.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return(n={})["Content-Type"]="application/x-amz-json-1.1",n["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity",r=JSON.stringify(O(e,t)),[2,z(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(c.__generator)(this,(function(o){switch(o.label){case 0:return e.statusCode>=400?[2,h(e,t)]:[4,F(e.body,t)];case 1:return n=o.sent(),{},r=P(n,t),i=Object(c.__assign)({$metadata:L(e),__type:"GetCredentialsForIdentityResponse"},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(K.Command);function V(e){var t=this;return function(){return Object(c.__awaiter)(t,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,d,h,p,g,v;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return h=(d=e.client).send,p=H.bind,g={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,l(e.logins)]:[3,2];case 1:return v=c.sent(),[3,3];case 2:v=void 0,c.label=3;case 3:return[4,h.apply(d,[new(p.apply(H,[void 0,(g.Logins=v,g)]))])];case 4:return t=c.sent().Credentials,n=void 0===t?function(){throw new f.ProviderError("Response from Amazon Cognito contained no credentials")}():t,r=n.AccessKeyId,i=void 0===r?function(){throw new f.ProviderError("Response from Amazon Cognito contained no access key ID")}():r,o=n.Expiration,s=n.SecretKey,a=void 0===s?function(){throw new f.ProviderError("Response from Amazon Cognito contained no secret key")}():s,u=n.SessionToken,[2,{accessKeyId:i,secretAccessKey:a,sessionToken:u,expiration:o}]}}))}))}}var G=function(){function e(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return e.prototype.getItem=function(e){return this.withObjectStore("readonly",(function(t){var n=t.get(e);return new Promise((function(e){n.onerror=function(){return e(null)},n.onsuccess=function(){return e(n.result?n.result.value:null)}}))})).catch((function(){return null}))},e.prototype.removeItem=function(e){return this.withObjectStore("readwrite",(function(t){var n=t.delete(e);return new Promise((function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}}))}))},e.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",(function(n){var r=n.put({id:e,value:t});return new Promise((function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}}))}))},e.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(t){var r=e.result;r.onerror=function(){n(new Error("Failed to create object store"))},r.createObjectStore("IdentityIds",{keyPath:"id"})}}))},e.prototype.withObjectStore=function(e,t){return this.getDb().then((function(n){var r=n.transaction("IdentityIds",e);return r.oncomplete=function(){return n.close()},new Promise((function(e,n){r.onerror=function(){return n(r.error)},e(t(r.objectStore("IdentityIds")))})).catch((function(e){throw n.close(),e}))}))},e}(),$=new(function(){function e(e){void 0===e&&(e={}),this.store=e}return e.prototype.getItem=function(e){return e in this.store?this.store[e]:null},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}());var W=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(c.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(q.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(c.__generator)(this,(function(i){return(n={})["Content-Type"]="application/x-amz-json-1.1",n["X-Amz-Target"]="AWSCognitoIdentityService.GetId",r=JSON.stringify(A(e,t)),[2,z(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(c.__generator)(this,(function(o){switch(o.label){case 0:return e.statusCode>=400?[2,p(e,t)]:[4,F(e.body,t)];case 1:return n=o.sent(),{},r=T(n,t),i=Object(c.__assign)({$metadata:L(e),__type:"GetIdResponse"},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(K.Command);function Y(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?"object"==typeof self&&self.indexedDB?new G:"object"==typeof window&&window.localStorage?window.localStorage:$:r,o=e.client,s=e.customRoleArn,a=e.identityPoolId,u=e.logins,d=e.userIdentifier,h=void 0===d?u&&0!==Object.keys(u).length?void 0:"ANONYMOUS":d,p=h?"aws:cognito-identity-credentials:"+a+":"+h:void 0,g=function(){return Object(c.__awaiter)(t,void 0,void 0,(function(){var e,t,r,d,h,v,y,m,_;return Object(c.__generator)(this,(function(c){switch(c.label){case 0:return(t=p)?[4,i.getItem(p)]:[3,2];case 1:t=c.sent(),c.label=2;case 2:return(e=t)?[3,7]:(v=(h=o).send,y=W.bind,m={AccountId:n,IdentityPoolId:a},u?[4,l(u)]:[3,4]);case 3:return _=c.sent(),[3,5];case 4:_=void 0,c.label=5;case 5:return[4,v.apply(h,[new(y.apply(W,[void 0,(m.Logins=_,m)]))])];case 6:r=c.sent().IdentityId,d=void 0===r?function(){throw new f.ProviderError("Response from Amazon Cognito contained no identity ID")}():r,e=d,p&&Promise.resolve(i.setItem(p,e)).catch((function(){})),c.label=7;case 7:return[2,(g=V({client:o,customRoleArn:s,logins:u,identityId:e}))()]}}))}))};return function(){return g().catch((function(e){return Object(c.__awaiter)(t,void 0,void 0,(function(){return Object(c.__generator)(this,(function(t){throw p&&Promise.resolve(i.removeItem(p)).catch((function(){})),e}))}))}))}}var J=n(16),X=n(22),Q=n(23),Z=n(24),ee=n(25),te=n(26),ne=n(7),re=n(13),ie=n(27),oe=n(73),se="cognito-identity.{region}.amazonaws.com",ae=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ue=new Set(["cn-north-1","cn-northwest-1"]),ce=new Set(["us-iso-east-1"]),le=new Set(["us-isob-east-1"]),fe=new Set(["us-gov-west-1","us-gov-east-1"]),de={apiVersion:"2014-06-30",disableHostPrefix:!1,signingName:"cognito-identity",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com"};break;default:ae.has(e)&&(n={hostname:se.replace("{region}",e)}),ue.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e)}),ce.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e)}),le.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e)}),fe.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:se.replace("{region}",e)})}return Promise.resolve(n)}},he=Object(c.__assign)(Object(c.__assign)({},de),{requestHandler:new Q.FetchHttpHandler,sha256:X.Sha256,urlParser:Z.parseUrl,bodyLengthChecker:ee.calculateBodyLength,streamCollector:te.streamCollector,base64Decoder:re.fromBase64,base64Encoder:re.toBase64,utf8Decoder:ne.fromUtf8,utf8Encoder:ne.toUtf8,defaultUserAgent:Object(ie.defaultUserAgent)(oe.a,oe.b),runtime:"browser",credentialDefaultProvider:function(){},regionDefaultProvider:Object(J.invalidFunction)("Region is missing")}),pe=n(9),ge=n(21),ve=n(10),ye=n(11),me=n(15),_e=n(12),be=function(e){function t(t){var n=this,r=Object(c.__assign)(Object(c.__assign)({},he),t),i=Object(pe.resolveRegionConfig)(r),o=Object(pe.resolveEndpointsConfig)(i),s=Object(me.resolveAwsAuthConfig)(o),a=Object(ye.resolveRetryConfig)(s),u=Object(_e.resolveUserAgentConfig)(a),l=Object(ve.resolveHostHeaderConfig)(u);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(ye.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(_e.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(ge.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(ve.getHostHeaderPlugin)(n.config)),n}return Object(c.__extends)(t,e),t.prototype.destroy=function(){},t}(K.Client),we=function(){return(we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Se=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ee=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Oe=new r.a("Credentials"),Ae=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.configure(e),this._refreshHandlers.google=s.b.refreshGoogleToken,this._refreshHandlers.facebook=s.a.refreshFacebookToken}return e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=we(we({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new i.a).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return Oe.debug("getting credentials"),this._pickupCredentials()},e.prototype._pickupCredentials=function(){return Oe.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Oe.debug("getting old cred promise"):(Oe.debug("getting new cred promise"),this._gettingCredPromise=Object(o.c)(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){Oe.debug("checking if credentials exists and not expired");var e=this._credentials;return e&&!this._isExpired(e)?(Oe.debug("credentials not changed and not expired, directly return"),Promise.resolve(e)):(Oe.debug("need to get a new credential or refresh the existing one"),u.a.Auth&&"function"==typeof u.a.Auth.currentUserCredentials?u.a.Auth.currentUserCredentials():Promise.reject("No Auth module registered in Amplify"))},e.prototype.refreshFederatedToken=function(e){var t=this;Oe.debug("Getting federated credentials");var n=e.provider,r=e.user,i=e.token,o=e.expires_at;o=1970===new Date(o).getFullYear()?1e3*o:o;var s=this;return Oe.debug("checking if federated jwt token expired"),o>(new Date).getTime()?(Oe.debug("token not expired"),this._setCredentialsFromFederation({provider:n,token:i,user:r,expires_at:o})):s._refreshHandlers[n]&&"function"==typeof s._refreshHandlers[n]?(Oe.debug("getting refreshed jwt token from federation provider"),s._refreshHandlers[n]().then((function(e){return Oe.debug("refresh federated token sucessfully",e),i=e.token,o=e.expires_at,s._setCredentialsFromFederation({provider:n,token:i,user:r,expires_at:o})})).catch((function(e){return Oe.debug("refresh federated token failed",e),t.clear(),Promise.reject("refreshing federation token failed: "+e)}))):(Oe.debug("no refresh handler for provider:",n),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._isExpired=function(e){if(!e)return Oe.debug("no credentials for expiration check"),!0;Oe.debug("are these credentials expired?",e);var t=Date.now();return!(e.expiration.getTime()>t+6e5&&t<this._nextCredentialsRefresh)},e.prototype._setCredentialsForGuest=function(){return Se(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u=this;return Ee(this,(function(c){switch(c.label){case 0:if(Oe.debug("setting credentials for guest"),e=this._config,t=e.identityPoolId,n=e.region,e.mandatorySignIn)return[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")];if(!t)return Oe.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")];if(!n)return Oe.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")];r=void 0,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._storageSync];case 2:return c.sent(),r=this._storage.getItem("CognitoIdentityId-"+t),this._identityId=r,[3,4];case 3:return i=c.sent(),Oe.debug("Failed to get the cached identityId",i),[3,4];case 4:return o=new be({region:n,credentials:function(){return Promise.resolve({})},customUserAgent:Object(a.b)()}),s=void 0,s=r&&"undefined"!==r?V({identityId:r,client:o})():function(){return Se(u,void 0,void 0,(function(){var e;return Ee(this,(function(n){switch(n.label){case 0:return[4,o.send(new W({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,V({client:o,identityId:e})()]}}))}))}().catch((function(e){return Se(u,void 0,void 0,(function(){return Ee(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null).then((function(e){return e})).catch((function(e){return Se(u,void 0,void 0,(function(){return Ee(this,(function(t){return[2,e]}))}))}))]}}))}))},e.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,r={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!r)return Promise.reject("You must specify a federated provider");var i={};i[r]=n;var o=this._config,s=o.identityPoolId,u=o.region;if(!s)return Oe.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!u)return Oe.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var c=Y({logins:i,identityPoolId:s,client:new be({region:u,credentials:function(){return Promise.resolve({})},customUserAgent:Object(a.b)()})})();return this._loadCredentials(c,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;Oe.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,s=r.identityPoolId;if(!s)return Oe.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!i)return Oe.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var u={};u["cognito-idp."+i+".amazonaws.com/"+o]=n;var c=new be({region:i,credentials:function(){return Promise.resolve({})},customUserAgent:Object(a.b)()}),l=Se(t,void 0,void 0,(function(){var e;return Ee(this,(function(t){switch(t.label){case 0:return[4,c.send(new W({IdentityPoolId:s,Logins:u}))];case 1:return e=t.sent().IdentityId,this._identityId=e,[2,V({client:c,logins:u,identityId:e})()]}}))})).catch((function(e){return Se(t,void 0,void 0,(function(){return Ee(this,(function(t){throw e}))}))}));return this._loadCredentials(l,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this,s=this._config.identityPoolId;return new Promise((function(a,u){e.then((function(e){return Se(i,void 0,void 0,(function(){var i,u,c,l,f;return Ee(this,(function(d){switch(d.label){case 0:if(Oe.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){i=r.user,u=r.provider,c=r.token,l=r.expires_at;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:u,token:c,user:i,expires_at:l}))}catch(e){Oe.debug("Failed to put federated info into auth storage",e)}}if("guest"!==t)return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._storageSync];case 2:return d.sent(),this._storage.setItem("CognitoIdentityId-"+s,e.identityId),[3,4];case 3:return f=d.sent(),Oe.debug("Failed to cache identityId",f),[3,4];case 4:return a(o._credentials),[2]}}))}))})).catch((function(t){if(t)return Oe.debug("Failed to load credentials",e),void u(t)}))}))},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(Oe.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return Se(this,void 0,void 0,(function(){return Ee(this,(function(e){return this._credentials=null,this._credentials_source=null,this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ve}));var r=n(63),i=n(32),o=n(68),s=n(57),a=n(31),u=n(35),c=n(71),l=n(0),f=n(3),d=n(2);function h(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,f,d,h,p,g;return Object(l.__generator)(this,(function(S){switch(S.label){case 0:return r=[Object(l.__assign)({},e)],i={},[4,W(e.body,t)];case 1:switch(n=l.__assign.apply(void 0,r.concat([(i.body=S.sent(),i)])),s="UnknownError",s=Y(e,n.body),s){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return a=[{}],[4,v(n,t)];case 3:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,a.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 4:return u=[{}],[4,y(n,t)];case 5:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,u.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 6:return c=[{}],[4,m(n,t)];case 7:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,c.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 8:return f=[{}],[4,_(n,t)];case 9:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,f.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 10:return d=[{}],[4,b(n,t)];case 11:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,d.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 12:return h=[{}],[4,w(n,t)];case 13:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,h.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 14:p=n.body,s=p.code||p.Code||s,o=Object(l.__assign)(Object(l.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:G(e)}),S.label=15;case 15:return g=o.message||o.Message||s,o.message=g,delete o.Message,[2,Promise.reject(Object.assign(new Error(g),o))]}}))}))}function p(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,f,d,h,p,g;return Object(l.__generator)(this,(function(S){switch(S.label){case 0:return r=[Object(l.__assign)({},e)],i={},[4,W(e.body,t)];case 1:switch(n=l.__assign.apply(void 0,r.concat([(i.body=S.sent(),i)])),s="UnknownError",s=Y(e,n.body),s){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return a=[{}],[4,v(n,t)];case 3:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,a.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 4:return u=[{}],[4,y(n,t)];case 5:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,u.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 6:return c=[{}],[4,m(n,t)];case 7:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,c.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 8:return f=[{}],[4,_(n,t)];case 9:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,f.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 10:return d=[{}],[4,b(n,t)];case 11:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,d.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 12:return h=[{}],[4,w(n,t)];case 13:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,h.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 14:p=n.body,s=p.code||p.Code||s,o=Object(l.__assign)(Object(l.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:G(e)}),S.label=15;case 15:return g=o.message||o.Message||s,o.message=g,delete o.Message,[2,Promise.reject(Object.assign(new Error(g),o))]}}))}))}function g(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,f,d,h,p,g;return Object(l.__generator)(this,(function(S){switch(S.label){case 0:return r=[Object(l.__assign)({},e)],i={},[4,W(e.body,t)];case 1:switch(n=l.__assign.apply(void 0,r.concat([(i.body=S.sent(),i)])),s="UnknownError",s=Y(e,n.body),s){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return a=[{}],[4,v(n,t)];case 3:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,a.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 4:return u=[{}],[4,y(n,t)];case 5:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,u.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 6:return c=[{}],[4,m(n,t)];case 7:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,c.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 8:return f=[{}],[4,_(n,t)];case 9:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,f.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 10:return d=[{}],[4,b(n,t)];case 11:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,d.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 12:return h=[{}],[4,w(n,t)];case 13:return o=l.__assign.apply(void 0,[l.__assign.apply(void 0,h.concat([S.sent()])),{name:s,$metadata:G(e)}]),[3,15];case 14:p=n.body,s=p.code||p.Code||s,o=Object(l.__assign)(Object(l.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:G(e)}),S.label=15;case 15:return g=o.message||o.Message||s,o.message=g,delete o.Message,[2,Promise.reject(Object.assign(new Error(g),o))]}}))}))}var v=function(e,t){return Object(l.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(l.__generator)(this,(function(r){return t={name:"BadRequestException",$fault:"client",$metadata:G(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},y=function(e,t){return Object(l.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(l.__generator)(this,(function(r){return t={name:"ForbiddenException",$fault:"client",$metadata:G(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},m=function(e,t){return Object(l.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(l.__generator)(this,(function(r){return t={name:"InternalServerErrorException",$fault:"server",$metadata:G(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},_=function(e,t){return Object(l.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(l.__generator)(this,(function(r){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:G(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},b=function(e,t){return Object(l.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(l.__generator)(this,(function(r){return t={name:"NotFoundException",$fault:"client",$metadata:G(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},w=function(e,t){return Object(l.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(l.__generator)(this,(function(r){return t={name:"TooManyRequestsException",$fault:"client",$metadata:G(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},S=function(e,t){var n={};return void 0!==e.AppVersion&&(n.AppVersion=e.AppVersion),void 0!==e.Locale&&(n.Locale=e.Locale),void 0!==e.Make&&(n.Make=e.Make),void 0!==e.Model&&(n.Model=e.Model),void 0!==e.ModelVersion&&(n.ModelVersion=e.ModelVersion),void 0!==e.Platform&&(n.Platform=e.Platform),void 0!==e.PlatformVersion&&(n.PlatformVersion=e.PlatformVersion),void 0!==e.Timezone&&(n.Timezone=e.Timezone),n},E=function(e,t){var n={};return void 0!==e.City&&(n.City=e.City),void 0!==e.Country&&(n.Country=e.Country),void 0!==e.Latitude&&(n.Latitude=e.Latitude),void 0!==e.Longitude&&(n.Longitude=e.Longitude),void 0!==e.PostalCode&&(n.PostalCode=e.PostalCode),void 0!==e.Region&&(n.Region=e.Region),n},O=function(e,t){var n={};return void 0!==e.Address&&(n.Address=e.Address),void 0!==e.Attributes&&(n.Attributes=x(e.Attributes,t)),void 0!==e.ChannelType&&(n.ChannelType=e.ChannelType),void 0!==e.Demographic&&(n.Demographic=S(e.Demographic,t)),void 0!==e.EffectiveDate&&(n.EffectiveDate=e.EffectiveDate),void 0!==e.EndpointStatus&&(n.EndpointStatus=e.EndpointStatus),void 0!==e.Location&&(n.Location=E(e.Location,t)),void 0!==e.Metrics&&(n.Metrics=k(e.Metrics,t)),void 0!==e.OptOut&&(n.OptOut=e.OptOut),void 0!==e.RequestId&&(n.RequestId=e.RequestId),void 0!==e.User&&(n.User=A(e.User,t)),n},A=function(e,t){var n={};return void 0!==e.UserAttributes&&(n.UserAttributes=x(e.UserAttributes,t)),void 0!==e.UserId&&(n.UserId=e.UserId),n},I=function(e,t){var n={};return void 0!==e.BatchItem&&(n.BatchItem=T(e.BatchItem,t)),n},C=function(e,t){var n,r,i=[];try{for(var o=Object(l.__values)(e),s=o.next();!s.done;s=o.next()){var a=s.value;i.push(a)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},P=function(e,t){var n={};return Object.keys(e).forEach((function(r){n[r]=function(e,t){var n={};return void 0!==e.AppPackageName&&(n.AppPackageName=e.AppPackageName),void 0!==e.AppTitle&&(n.AppTitle=e.AppTitle),void 0!==e.AppVersionCode&&(n.AppVersionCode=e.AppVersionCode),void 0!==e.Attributes&&(n.Attributes=j(e.Attributes,t)),void 0!==e.ClientSdkVersion&&(n.ClientSdkVersion=e.ClientSdkVersion),void 0!==e.EventType&&(n.EventType=e.EventType),void 0!==e.Metrics&&(n.Metrics=k(e.Metrics,t)),void 0!==e.SdkName&&(n.SdkName=e.SdkName),void 0!==e.Session&&(n.Session=R(e.Session,t)),void 0!==e.Timestamp&&(n.Timestamp=e.Timestamp),n}(e[r],t)})),n},T=function(e,t){var n={};return Object.keys(e).forEach((function(r){n[r]=function(e,t){var n={};return void 0!==e.Endpoint&&(n.Endpoint=N(e.Endpoint,t)),void 0!==e.Events&&(n.Events=P(e.Events,t)),n}(e[r],t)})),n},x=function(e,t){var n={};return Object.keys(e).forEach((function(r){n[r]=C(e[r],t)})),n},k=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),n},j=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),n},N=function(e,t){var n={};return void 0!==e.Address&&(n.Address=e.Address),void 0!==e.Attributes&&(n.Attributes=x(e.Attributes,t)),void 0!==e.ChannelType&&(n.ChannelType=e.ChannelType),void 0!==e.Demographic&&(n.Demographic=S(e.Demographic,t)),void 0!==e.EffectiveDate&&(n.EffectiveDate=e.EffectiveDate),void 0!==e.EndpointStatus&&(n.EndpointStatus=e.EndpointStatus),void 0!==e.Location&&(n.Location=E(e.Location,t)),void 0!==e.Metrics&&(n.Metrics=k(e.Metrics,t)),void 0!==e.OptOut&&(n.OptOut=e.OptOut),void 0!==e.RequestId&&(n.RequestId=e.RequestId),void 0!==e.User&&(n.User=A(e.User,t)),n},R=function(e,t){var n={};return void 0!==e.Duration&&(n.Duration=e.Duration),void 0!==e.Id&&(n.Id=e.Id),void 0!==e.StartTimestamp&&(n.StartTimestamp=e.StartTimestamp),void 0!==e.StopTimestamp&&(n.StopTimestamp=e.StopTimestamp),n},M=function(e,t){var n={__type:"EndpointResponse",Address:void 0,ApplicationId:void 0,Attributes:void 0,ChannelType:void 0,CohortId:void 0,CreationDate:void 0,Demographic:void 0,EffectiveDate:void 0,EndpointStatus:void 0,Id:void 0,Location:void 0,Metrics:void 0,OptOut:void 0,RequestId:void 0,User:void 0};return void 0!==e.Address&&null!==e.Address&&(n.Address=e.Address),void 0!==e.ApplicationId&&null!==e.ApplicationId&&(n.ApplicationId=e.ApplicationId),void 0!==e.Attributes&&null!==e.Attributes&&(n.Attributes=K(e.Attributes,t)),void 0!==e.ChannelType&&null!==e.ChannelType&&(n.ChannelType=e.ChannelType),void 0!==e.CohortId&&null!==e.CohortId&&(n.CohortId=e.CohortId),void 0!==e.CreationDate&&null!==e.CreationDate&&(n.CreationDate=e.CreationDate),void 0!==e.Demographic&&null!==e.Demographic&&(n.Demographic=function(e,t){var n={__type:"EndpointDemographic",AppVersion:void 0,Locale:void 0,Make:void 0,Model:void 0,ModelVersion:void 0,Platform:void 0,PlatformVersion:void 0,Timezone:void 0};return void 0!==e.AppVersion&&null!==e.AppVersion&&(n.AppVersion=e.AppVersion),void 0!==e.Locale&&null!==e.Locale&&(n.Locale=e.Locale),void 0!==e.Make&&null!==e.Make&&(n.Make=e.Make),void 0!==e.Model&&null!==e.Model&&(n.Model=e.Model),void 0!==e.ModelVersion&&null!==e.ModelVersion&&(n.ModelVersion=e.ModelVersion),void 0!==e.Platform&&null!==e.Platform&&(n.Platform=e.Platform),void 0!==e.PlatformVersion&&null!==e.PlatformVersion&&(n.PlatformVersion=e.PlatformVersion),void 0!==e.Timezone&&null!==e.Timezone&&(n.Timezone=e.Timezone),n}(e.Demographic)),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&(n.EffectiveDate=e.EffectiveDate),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&(n.EndpointStatus=e.EndpointStatus),void 0!==e.Id&&null!==e.Id&&(n.Id=e.Id),void 0!==e.Location&&null!==e.Location&&(n.Location=function(e,t){var n={__type:"EndpointLocation",City:void 0,Country:void 0,Latitude:void 0,Longitude:void 0,PostalCode:void 0,Region:void 0};return void 0!==e.City&&null!==e.City&&(n.City=e.City),void 0!==e.Country&&null!==e.Country&&(n.Country=e.Country),void 0!==e.Latitude&&null!==e.Latitude&&(n.Latitude=e.Latitude),void 0!==e.Longitude&&null!==e.Longitude&&(n.Longitude=e.Longitude),void 0!==e.PostalCode&&null!==e.PostalCode&&(n.PostalCode=e.PostalCode),void 0!==e.Region&&null!==e.Region&&(n.Region=e.Region),n}(e.Location)),void 0!==e.Metrics&&null!==e.Metrics&&(n.Metrics=H(e.Metrics,t)),void 0!==e.OptOut&&null!==e.OptOut&&(n.OptOut=e.OptOut),void 0!==e.RequestId&&null!==e.RequestId&&(n.RequestId=e.RequestId),void 0!==e.User&&null!==e.User&&(n.User=U(e.User,t)),n},U=function(e,t){var n={__type:"EndpointUser",UserAttributes:void 0,UserId:void 0};return void 0!==e.UserAttributes&&null!==e.UserAttributes&&(n.UserAttributes=K(e.UserAttributes,t)),void 0!==e.UserId&&null!==e.UserId&&(n.UserId=e.UserId),n},D=function(e,t){var n={__type:"EndpointsResponse",Item:void 0};return void 0!==e.Item&&null!==e.Item&&(n.Item=B(e.Item,t)),n},L=function(e,t){var n={__type:"EventsResponse",Results:void 0};return void 0!==e.Results&&null!==e.Results&&(n.Results=q(e.Results,t)),n},B=function(e,t){return(e||[]).map((function(e){return M(e,t)}))},z=function(e,t){return(e||[]).map((function(e){return e}))},F=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=function(e,t){var n={__type:"EventItemResponse",Message:void 0,StatusCode:void 0};return void 0!==e.Message&&null!==e.Message&&(n.Message=e.Message),void 0!==e.StatusCode&&null!==e.StatusCode&&(n.StatusCode=e.StatusCode),n}(e[t])})),n},q=function(e,t){var n={};return Object.keys(e).forEach((function(r){n[r]=function(e,t){var n={__type:"ItemResponse",EndpointItemResponse:void 0,EventsItemResponse:void 0};return void 0!==e.EndpointItemResponse&&null!==e.EndpointItemResponse&&(n.EndpointItemResponse=function(e,t){var n={__type:"EndpointItemResponse",Message:void 0,StatusCode:void 0};return void 0!==e.Message&&null!==e.Message&&(n.Message=e.Message),void 0!==e.StatusCode&&null!==e.StatusCode&&(n.StatusCode=e.StatusCode),n}(e.EndpointItemResponse)),void 0!==e.EventsItemResponse&&null!==e.EventsItemResponse&&(n.EventsItemResponse=F(e.EventsItemResponse,t)),n}(e[r],t)})),n},K=function(e,t){var n={};return Object.keys(e).forEach((function(r){n[r]=z(e[r],t)})),n},H=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),n},V=function(e,t){var n={__type:"MessageBody",Message:void 0,RequestID:void 0};return void 0!==e.Message&&null!==e.Message&&(n.Message=e.Message),void 0!==e.RequestID&&null!==e.RequestID&&(n.RequestID=e.RequestID),n},G=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},$=function(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},W=function(e,t){return function(e,t){return $(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Y=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},J=n(5),X=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(l.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(J.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(l.__generator)(this,(function(s){if((n={})["Content-Type"]="application/json",r="/v1/apps/{ApplicationId}/events",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",Object(d.extendedEncodeURIComponent)(i)),void 0!==e.EventsRequest&&(o=I(e.EventsRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[2,new f.HttpRequest(Object(l.__assign)(Object(l.__assign)({},t.endpoint),{protocol:"https",method:"POST",headers:n,path:r,body:o}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(l.__generator)(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=400?[2,p(e,t)]:(n={$metadata:G(e),__type:"PutEventsResponse",EventsResponse:void 0},[4,W(e.body,t)]);case 1:return r=i.sent(),n.EventsResponse=L(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(d.Command),Q=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(l.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(J.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(l.__generator)(this,(function(s){if((n={})["Content-Type"]="application/json",r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Object(d.extendedEncodeURIComponent)(i)),void 0===e.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((i=e.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",Object(d.extendedEncodeURIComponent)(i)),void 0!==e.EndpointRequest&&(o=O(e.EndpointRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[2,new f.HttpRequest(Object(l.__assign)(Object(l.__assign)({},t.endpoint),{protocol:"https",method:"PUT",headers:n,path:r,body:o}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(l.__generator)(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=400?[2,g(e,t)]:(n={$metadata:G(e),__type:"UpdateEndpointResponse",MessageBody:void 0},[4,W(e.body,t)]);case 1:return r=i.sent(),n.MessageBody=V(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(d.Command),Z=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(l.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(J.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(l.__generator)(this,(function(o){if((n={})["Content-Type"]="",r="/v1/apps/{ApplicationId}/users/{UserId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Object(d.extendedEncodeURIComponent)(i)),void 0===e.UserId)throw new Error("No value provided for input HTTP label: UserId.");if((i=e.UserId).length<=0)throw new Error("Empty value provided for input HTTP label: UserId.");return r=r.replace("{UserId}",Object(d.extendedEncodeURIComponent)(i)),[2,new f.HttpRequest(Object(l.__assign)(Object(l.__assign)({},t.endpoint),{protocol:"https",method:"GET",headers:n,path:r,body:void 0}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(l.__generator)(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,h(e,t)]:(n={$metadata:G(e),__type:"GetUserEndpointsResponse",EndpointsResponse:void 0},[4,W(e.body,t)]);case 1:return r=i.sent(),n.EndpointsResponse=D(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(d.Command),ee=n(16),te=n(22),ne=n(23),re=n(24),ie=n(25),oe=n(26),se=n(7),ae=n(13),ue=n(27),ce=n(74),le=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),fe=new Set(["cn-north-1","cn-northwest-1"]),de=new Set(["us-iso-east-1"]),he=new Set(["us-isob-east-1"]),pe=new Set(["us-gov-west-1","us-gov-east-1"]),ge={apiVersion:"2016-12-01",disableHostPrefix:!1,signingName:"mobiletargeting",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",signingService:"mobiletargeting"};break;default:le.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),signingService:"mobiletargeting"}),fe.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e)}),de.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e)}),he.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e)}),pe.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),signingService:"mobiletargeting"})}return Promise.resolve(n)}},ve=Object(l.__assign)(Object(l.__assign)({},ge),{requestHandler:new ne.FetchHttpHandler,sha256:te.Sha256,urlParser:re.parseUrl,bodyLengthChecker:ie.calculateBodyLength,streamCollector:oe.streamCollector,base64Decoder:ae.fromBase64,base64Encoder:ae.toBase64,utf8Decoder:se.fromUtf8,utf8Encoder:se.toUtf8,defaultUserAgent:Object(ue.defaultUserAgent)(ce.a,ce.b),runtime:"browser",credentialDefaultProvider:Object(ee.invalidFunction)("Credential is missing"),regionDefaultProvider:Object(ee.invalidFunction)("Region is missing")}),ye=n(9),me=n(21),_e=n(10),be=n(11),we=n(15),Se=n(12),Ee=function(e){function t(t){var n=this,r=Object(l.__assign)(Object(l.__assign)({},ve),t),i=Object(ye.resolveRegionConfig)(r),o=Object(ye.resolveEndpointsConfig)(i),s=Object(we.resolveAwsAuthConfig)(o),a=Object(be.resolveRetryConfig)(s),u=Object(Se.resolveUserAgentConfig)(a),c=Object(_e.resolveHostHeaderConfig)(u);return(n=e.call(this,c)||this).config=c,n.middlewareStack.use(Object(we.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(be.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(Se.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(me.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(_e.getHostHeaderPlugin)(n.config)),n}return Object(l.__extends)(t,e),t.prototype.destroy=function(){},t}(d.Client),Oe=n(28),Ae=n(19),Ie=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ce=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Pe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Te=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pe(arguments[t]));return e},xe=new i.a("EventsBuffer"),ke=[429,500],je=[202],Ne=function(){function e(e,t){this._pause=!1,this._flush=!1,xe.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return e.prototype.push=function(e){var t;if(this._buffer>this._config.bufferSize)return xe.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},e.prototype.pause=function(){this._pause=!0},e.prototype.resume=function(){this._pause=!1},e.prototype.updateClient=function(e){this._client=e},e.prototype.flush=function(){this._flush=!0},e.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},e.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=this._config.flushSize,n=Math.min(t,e),r=this._buffer.splice(0,n);this._putEvents(r)}},e.prototype._putEvents=function(e){return Ie(this,void 0,void 0,(function(){var t,n,r,i,o;return Ce(this,(function(s){switch(s.label){case 0:t=this._bufferToMap(e),n=this._generateBatchEventParams(t),s.label=1;case 1:return s.trys.push([1,3,,4]),r=new X(n),[4,this._client.send(r)];case 2:return i=s.sent(),this._processPutEventsSuccessResponse(i,t),[3,4];case 3:return o=s.sent(),[2,this._handlePutEventsFailure(o,t)];case 4:return[2]}}))}))},e.prototype._generateBatchEventParams=function(e){var t={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach((function(e){var n=e.params,r=n.event,i=n.timestamp,o=n.config,s=r.name,a=r.attributes,u=r.metrics,c=r.eventId,l=r.session,f=o.appId,d=o.endpointId,h=t.EventsRequest.BatchItem;t.ApplicationId=t.ApplicationId||f,h[d]||(h[d]={Endpoint:{},Events:{}}),h[d].Events[c]={EventType:s,Timestamp:new Date(i).toISOString(),Attributes:a,Metrics:u,Session:l}})),t},e.prototype._handlePutEventsFailure=function(e,t){xe.debug("_putEvents Failed:",e);var n=e.statusCode;if(ke.includes(n)){var r=Object.values(t);this._retry(r)}else;},e.prototype._processPutEventsSuccessResponse=function(e,t){var n=e.EventsResponse.Results,r=[];Object.entries(n).forEach((function(e){var n=Pe(e,2),i=n[0],o=n[1].EventsItemResponse;Object.entries(o).forEach((function(e){var n,o,s=Pe(e,2),a=s[0],u=s[1],c=u.StatusCode,l=u.Message,f=t[a],d={EventsResponse:{Results:(n={},n[i]={EventsItemResponse:(o={},o[a]={StatusCode:c,Message:l},o)},n)}};if(je.includes(c))f.handlers.resolve(d);else{if(!ke.includes(c)){var h=f.params.event.name;return xe.error("event "+a+" : "+h+" failed with error: "+l),f.handlers.reject(d)}r.push(f)}}))})),r.length&&this._retry(r)},e.prototype._retry=function(e){var t,n=[];e.forEach((function(e){var t,r=e.params,i=r.event,o=i.eventId,s=i.name;if(r.resendLimit-- >0)return xe.debug("resending event "+o+" : "+s+" with "+r.resendLimit+" retry attempts remaining"),void n.push((t={},t[o]=e,t));xe.debug("no retry attempts remaining for event "+o+" : "+s)})),(t=this._buffer).unshift.apply(t,Te(n))},e.prototype._bufferToMap=function(e){return e.reduce((function(e,t){var n=Pe(Object.entries(t),1),r=Pe(n[0],2),i=r[0],o=r[1];return e[i]=o,e}),{})},e}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Me=function(){return(Me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ue=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},De=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Le=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Be="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",ze=function(e,t){r.a.dispatch("analytics",{event:e,data:t},"Analytics",Be)},Fe=new i.a("AWSPinpointProvider"),qe=[429,500],Ke=[202],He="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Ve=function(){function e(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=o.a.clientInfo()}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){var t=this;Fe.debug("configure Analytics",e);var n=e||{};if(this._config=Object.assign({},this._config,n),this._config.appId&&!this._config.disabled)if(this._config.endpointId)ze("pinpointProvider_configured",null);else{var r=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(r).then((function(e){Fe.debug("setting endpoint id from the cache",e),t._config.endpointId=e,ze("pinpointProvider_configured",null)})).catch((function(e){Fe.debug("Failed to generate endpointId",e)}))}else this._flushBuffer();return this._config},e.prototype.record=function(e,t){return Ue(this,void 0,void 0,(function(){var n,r;return De(this,(function(i){switch(i.label){case 0:return Fe.debug("_public record",e),[4,this._getCredentials()];case 1:return(n=i.sent())&&this._config.appId&&this._config.region?(this._initClients(n),r=(new Date).getTime(),this._generateSession(e),e.event.eventId=Object(Ae.v1)(),Object.assign(e,{timestamp:r,config:this._config}),e.event.immediate?[2,this._send(e,t)]:(this._putToBuffer(e,t),[2])):(Fe.debug("cannot send events without credentials, applicationId or region"),[2,t.reject(new Error("No credentials, applicationId or region"))])}}))}))},e.prototype._sendEndpointUpdate=function(e){return Ue(this,void 0,void 0,(function(){var t;return De(this,(function(n){switch(n.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(e),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(e)]);case 1:return n.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}}))}))},e.prototype._putToBuffer=function(e,t){"_update_endpoint"!==e.event.name?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},e.prototype._generateSession=function(e){this._sessionId=this._sessionId||Object(Ae.v1)();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=Object(Ae.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case"_session.stop":var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Ae.v1)(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Ae.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},e.prototype._send=function(e,t){return Ue(this,void 0,void 0,(function(){return De(this,(function(n){switch(e.event.name){case"_update_endpoint":return[2,this._updateEndpoint({params:e,handlers:t})];case"_session.stop":return[2,this._pinpointSendStopSession(e,t)];default:return[2,this._pinpointPutEvents(e,t)]}return[2]}))}))},e.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,i=e.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=i.appId,f=i.endpointId,d={ApplicationId:l,EventsRequest:{BatchItem:{}}},h={Endpoint:{}};return h.Events=((t={})[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c},t),d.EventsRequest.BatchItem[f]=h,d},e.prototype._pinpointPutEvents=function(e,t){return Ue(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return De(this,(function(h){switch(h.label){case 0:n=e.event.eventId,r=e.config.endpointId,i=this._generateBatchItemContext(e),o=new X(i),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return s=h.sent(),a=r,u=n,c=s.EventsResponse.Results[a].EventsItemResponse[u],l=c.StatusCode,f=c.Message,Ke.includes(l)?(Fe.debug("record event success. ",s),[2,t.resolve(s)]):qe.includes(l)?(this._retry(e,t),[3,4]):(Fe.error("Event "+n+" is not accepted, the error is "+f),[2,t.reject(s)]);case 3:return d=h.sent(),this._eventError(d),[2,t.reject(d)];case 4:return[2]}}))}))},e.prototype._pinpointSendStopSession=function(e,t){if(He){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,a={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},u="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",c=JSON.stringify(o),l={url:u,body:c,method:"POST"},f={region:r,service:"mobiletargeting"},d=s.a.signUrl(l,a,f,null);return navigator.sendBeacon(d,c)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},e.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,e.resendLimit-- >0?(Fe.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Fe.debug("retry times used up for event "+e.eventName)},e.prototype._updateEndpoint=function(e){return Ue(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c,l,f,d,h;return De(this,(function(p){switch(p.label){case 0:t=e.params,n=e.handlers,r=t.config,i=t.event,o=r.appId,s=r.endpointId,u=this._endpointRequest(r,a.a.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),c={ApplicationId:o,EndpointId:s,EndpointRequest:u},p.label=1;case 1:return p.trys.push([1,3,,4]),l=new Q(c),[4,this.pinpointClient.send(l)];case 2:return f=p.sent(),Fe.debug("updateEndpoint success",f),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(f),[2];case 3:return d=p.sent(),h={err:d,update_params:c,endpointObject:e},[2,this._handleEndpointUpdateFailure(h)];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateFailure=function(e){return Ue(this,void 0,void 0,(function(){var t,n,r;return De(this,(function(i){switch(t=e.err,n=e.endpointObject,r=t.statusCode,Fe.debug("updateEndpoint failed",t),r){case 400:return[2,this._handleEndpointUpdateBadRequest(e)];case 403:return[2,this._handleEndpointUpdateForbidden(e)];default:if(qe.includes(r))return!0,[2,this._retryEndpointUpdate(n,!0)];n.handlers.reject(t)}return[2]}))}))},e.prototype._handleEndpointUpdateBadRequest=function(e){return Ue(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return De(this,(function(u){switch(u.label){case 0:if(t=e.err,n=e.update_params,r=e.endpointObject,i=t.message,o=n.ApplicationId,s=n.EndpointRequest,!String(i).startsWith("Exceeded maximum endpoint per user count"))return[2,r.handlers.reject(t)];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._removeUnusedEndpoints(o,s.User.UserId)];case 2:return u.sent(),Fe.debug("Removed unused endpoints successfully"),this._retryEndpointUpdate(r),[3,4];case 3:return a=u.sent(),Fe.warn("Failed to remove unused endpoints with error: "+a),Fe.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:GetUserEndpoints" in order to get endpoints info of the user'),[2,r.handlers.reject(a)];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,i=t.retryable;if("ExpiredTokenException"!==r&&!i)return n.handlers.reject(t);this._retryEndpointUpdate(n)},e.prototype._retryEndpointUpdate=function(e,t){void 0===t&&(t=!1),Fe.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,n.resendLimit-- >0)return Fe.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Fe.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Fe.error("Initial endpoint update failed. ")},e.prototype._removeUnusedEndpoints=function(e,t){return Ue(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h;return De(this,(function(p){switch(p.label){case 0:return p.trys.push([0,6,,7]),n=new Z({ApplicationId:e,UserId:t}),[4,this.pinpointClient.send(n)];case 1:for(r=p.sent(),i=r.EndpointsResponse.Item,Fe.debug("get endpoints associated with the userId: "+t+" with data",i),o=i[0],s=1;s<i.length&&(a=Date.parse(o.EffectiveDate),u=Date.parse(i[s].EffectiveDate),!isNaN(a));s++){if(isNaN(u)){o=i[s];break}u<a&&(o=i[s])}c={ApplicationId:e,EndpointId:o.Id,EndpointRequest:{User:{UserId:""}}},p.label=2;case 2:return p.trys.push([2,4,,5]),l=new Q(c),[4,this.pinpointClient.send(l)];case 3:return f=p.sent(),Fe.debug("The old endpoint is updated with an empty string for user id"),[2,f];case 4:throw d=p.sent(),Fe.debug("Failed to update the endpoint",d),d;case 5:return[3,7];case 6:throw h=p.sent(),Fe.debug("Failed to get endpoints associated with the userId: "+t+" with error",h),h;case 7:return[2]}}))}))},e.prototype._initClients=function(e){return Ue(this,void 0,void 0,(function(){var t,n;return De(this,(function(r){return Fe.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===e.sessionToken&&this._config.credentials.identityId===e.identityId?(Fe.debug("no change for aws credentials, directly return from init"),[2]):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=e,n=this._config.region,Fe.debug("init clients with credentials",e),this.pinpointClient=new Ee({region:n,credentials:e,customUserAgent:Object(u.b)()}),this._bufferExists()&&t===e.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq(),[2])}))}))},e.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof Ne},e.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new Ne(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},e.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},e.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},e.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},e.prototype._customizePinpointClientReq=function(){},e.prototype._getEndpointId=function(e){return Ue(this,void 0,void 0,(function(){var t;return De(this,(function(n){switch(n.label){case 0:return[4,Oe.a.getItem(e)];case 1:return t=n.sent(),Fe.debug("endpointId from cache",t,"type",Re(t)),t||(t=Object(Ae.v1)(),Oe.a.setItem(e,t)),[2,t]}}))}))},e.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},s={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},u=(i.clientId,i.appTitle,i.appVersionName,i.appVersionCode,i.appPackageName,Le(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),c=t.address?"android"===r.platform?"GCM":"APNS":void 0,l=Me(Me(Me({channelType:c,requestId:Object(Ae.v1)(),effectiveDate:(new Date).toISOString()},o),t),{attributes:Me(Me({},o.attributes),t.attributes),demographic:Me(Me(Me(Me({},s),u),o.demographic),t.demographic),location:Me(Me({},o.location),t.location),metrics:Me(Me({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:Me(Me({},o.userAttributes),t.userAttributes)}}),f=(l.userId,l.userAttributes,l.name,l.session,l.eventId,l.immediate,Le(l,["userId","userAttributes","name","session","eventId","immediate"]));return a.a.transferKeyToUpperCase(f,[],["metrics","userAttributes","attributes"])},e.prototype._eventError=function(e){Fe.error("record event failed.",e),Fe.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},e.prototype._getCredentials=function(){return Ue(this,void 0,void 0,(function(){var e,t;return De(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.a.get()];case 1:return(e=n.sent())?(Fe.debug("set credentials for analytics",e),[2,c.a.shear(e)]):[2,null];case 2:return t=n.sent(),Fe.debug("ensure credentials error",t),[2,null];case 3:return[2]}}))}))},e.category="Analytics",e.providerName="AWSPinpoint",e}()},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-cognito-identity","b":"1.0.0-beta.3"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-pinpoint","b":"1.0.0-beta.3"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-kinesis","b":"1.0.0-beta.3"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-firehose","b":"1.0.0-beta.3"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-personalize-events","b":"1.0.0-beta.3"}')},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(69);t.fromArrayBuffer=function(t,n,o){if(void 0===n&&(n=0),void 0===o&&(o=t.byteLength-n),!i.isArrayBuffer(t))throw new Error("argument passed to fromArrayBuffer was not an ArrayBuffer");if("function"==typeof r.Buffer.from&&r.Buffer.from!==Uint8Array.from)return r.Buffer.from(t,n,o);if(0!==n||o!==t.byteLength)throw new Error("Unable to convert TypedArray to Buffer in Node "+e.version);return new r.Buffer(t)},t.fromString=function(e,t){if("string"!=typeof e)throw new Error("argument passed to fromString was not a string");return"function"==typeof r.Buffer.from&&r.Buffer.from!==Uint8Array.from?r.Buffer.from(e,t):new r.Buffer(e,t)}}).call(this,n(64))},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-s3","b":"1.0.0-beta.3"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-lex-runtime-service","b":"1.0.0-beta.3"}')},,,,,function(e,t,n){var r;e.exports=(r=n(20),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=new(n(32).a)("Parser"),i=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var i={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=i}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),r.debug("parse config",e,"to amplifyconfig",n),n},o=function(){function e(){}return e.parseMobilehubConfig=i,e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(65),o=n(88),s=n(89),a=n(90),u=function(){function e(e,t,n){void 0===t&&(t=s.defaultRetryDecider),void 0===n&&(n=o.defaultDelayDecider),this.maxRetries=e,this.retryDecider=t,this.delayDecider=n}return e.prototype.shouldRetry=function(e,t){return t<this.maxRetries&&this.retryDecider(e)},e.prototype.retry=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,o,s,u,c;return r.__generator(this,(function(l){switch(l.label){case 0:n=0,o=0,s=function(){var s,c,l,f,d;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,5]),[4,e(t)];case 1:return s=r.sent(),c=s.response,(l=s.output).$metadata.retries=n,l.$metadata.totalRetryDelay=o,[2,{value:{response:c,output:l}}];case 2:return f=r.sent(),u.shouldRetry(f,n)?(d=u.delayDecider(a.isThrottlingError(f)?i.THROTTLING_RETRY_DELAY_BASE:i.DEFAULT_RETRY_DELAY_BASE,n++),o+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return r.sent(),[2,"continue"];case 4:throw f.$metadata||(f.$metadata={}),f.$metadata.retries=n,f.$metadata.totalRetryDelay=o,f;case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},e}();t.ExponentialBackOffStrategy=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65);t.defaultDelayDecider=function(e,t){return Math.floor(Math.min(r.MAXIMUM_RETRY_DELAY,Math.random()*Math.pow(2,t)*e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),i=n(90);t.defaultRetryDecider=function(e){return!!e&&(!!e.connectionError||(!!(function(e){return null==e?void 0:e.$metadata}(e)&&e.$metadata.httpStatusCode&&r.RETRYABLE_STATUS_CODES.has(e.$metadata.httpStatusCode))||(i.isStillProcessingError(e)||i.isThrottlingError(e)||i.isClockSkewError(e))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(157);t.isClockSkewError=function(e){return e.name in r.CLOCK_SKEW_ERROR_CODES},t.isStillProcessingError=function(e){return e.name in r.STILL_PROCESSING_ERROR_CODES},t.isThrottlingError=function(e){return e.name in r.THROTTLING_ERROR_CODES}},function(e,t,n){"use strict";function r(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUri=function(e){var t=encodeURIComponent(e);return t=t.replace(/[!'()*]/g,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(165),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(94),i=n(95),o=n(7),s=n(66),a=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=s.locateWindow().msCrypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n("ImportKey completed without importing key.")},r.onerror=function(){n("ImportKey failed to import key.")}}))}(e).then((function(e){return s.locateWindow().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(s.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;r.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(u(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n("Error encountered finalizing hash")},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n("Error encountered finalizing hash")},e.finish()}))}))},e}();function u(e){return"string"==typeof e?o.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(94),o=n(95),s=n(66),a=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){s.locateWindow().crypto.subtle.importKey("raw",u(e),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!i.isEmptyData(e)){var t=u(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return s.locateWindow().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):i.isEmptyData(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return s.locateWindow().crypto.subtle.digest(o.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function u(e){return"string"==typeof e?r.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.parseQueryString=function(e){var t,n,i={};if(e=e.replace(/^\?/,""))try{for(var o=r.__values(e.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value,u=r.__read(a.split("="),2),c=u[0],l=u[1],f=void 0===l?null:l;c=decodeURIComponent(c),f&&(f=decodeURIComponent(f)),c in i?Array.isArray(i[c])?i[c].push(f):i[c]=[i[c],f]:i[c]=f}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}return r.__extends(t,e),t}(Error);t.ProviderError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.deserializerMiddleware=function(e,t){return n=>i=>r.__awaiter(this,void 0,void 0,(function*(){const{response:r}=yield n(i);return{response:r,output:yield t(r,e)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.serializerMiddleware=function(e,t){return n=>i=>r.__awaiter(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},e),{endpoint:yield e.endpoint()}),o=yield t(i.input,r);return n(Object.assign(Object.assign({},i),{request:o}))}))}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,i=Math.abs(Math.round(t));r>-1&&i>0;r--,i/=256)n[r]=i;return t<0&&o(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&o(e),parseInt(r.toHex(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function o(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}t.Int64=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.crc32=function(e){return(new i).update(e).digest()};var i=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=r.__values(e),s=i.next();!s.done;s=i.next()){var a=s.value;this.checksum=this.checksum>>>8^o[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=i;var o=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(48),i=n(32),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=new i.a("Storage"),a=null,u=function(){if(a)return a;s.debug("Create Storage Instance, debug"),(a=new r.a).vault=new r.a;var e=a.configure;return a.configure=function(t){s.debug("storage configure called");var n=o({},e.call(a,t));Object.keys(n).forEach((function(e){"string"!=typeof n[e]&&(n[e]=o(o({},n[e]),{level:"private"}))})),s.debug("storage vault configure called"),a.vault.configure(n)},a}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,o=/(\d+\.){3}\d+/,s=/\.\./,a=/\./,u=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,c=/^s3(-external-1)?\.amazonaws\.com$/;t.bucketHostname=function(e){var t=e.accelerateEndpoint,n=void 0!==t&&t,l=e.baseHostname,f=e.bucketName,d=e.dualstackEndpoint,h=void 0!==d&&d,p=e.pathStyleEndpoint,g=void 0!==p&&p,v=e.tlsCompatible,y=void 0===v||v;if(!u.test(l))return{bucketEndpoint:!1,hostname:l};var m,_,b=r.__read(c.test(l)?["us-east-1","amazonaws.com"]:[(_=(m=l).match(u))[2],m.replace(new RegExp("^"+_[0]),"")],2),w=b[0],S=b[1];return g||!function(e){return i.test(e)&&!o.test(e)&&!s.test(e)}(f)||y&&a.test(f)?{bucketEndpoint:!1,hostname:h?"s3.dualstack."+w+"."+S:l}:(n?l="s3-accelerate"+(h?".dualstack":"")+"."+S:h&&(l="s3.dualstack."+w+"."+S),{bucketEndpoint:!0,hostname:f+"."+l})}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(30);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(30),i=n(209),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=n(112)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(o)})),e.exports=u}).call(this,n(64))},function(e,t,n){"use strict";var r=n(30),i=n(210),o=n(109),s=n(212),a=n(215),u=n(216),c=n(113);e.exports=function(e){return new Promise((function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",g=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+g)}var v=s(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};i(t,l,r),h=null}},h.onabort=function(){h&&(l(c("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){l(c("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(c(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var y=n(217),m=(e.withCredentials||u(v))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in h&&r.forEach(d,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),l(e),h=null)})),void 0===f&&(f=null),h.send(f)}))}},function(e,t,n){"use strict";var r=n(211);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";var r=n(30);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var a=i.concat(o).concat(s),u=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return r.forEach(u,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){(function(e){var n,r,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(1)),r(n(2)),r(n(3)),r(n(4)),r(n(5)),r(n(6)),r(n(7)),r(n(8)),r(n(9)),r(n(10)),r(n(11)),r(n(12)),r(n(13))},function(e,t,n){e.exports={a:"Anchor__a___1_Iz8"}},function(e,t,n){e.exports={button:"Button__button___vS7Mv",signInButton:"Button__signInButton___3bUH-",googleSignInButton:"Button__googleSignInButton___1YiCu",signInButtonIcon:"Button__signInButtonIcon___ihN75",auth0SignInButton:"Button__auth0SignInButton___znnCj",facebookSignInButton:"Button__facebookSignInButton___34Txh",amazonSignInButton:"Button__amazonSignInButton___2EMtl",oAuthSignInButton:"Button__oAuthSignInButton___3UGOl",signInButtonContent:"Button__signInButtonContent___xqTXJ"}},function(e,t,n){e.exports={formContainer:"Form__formContainer___1GA3x",formSection:"Form__formSection___1PPvW",formField:"Form__formField___38Ikl",formRow:"Form__formRow___2mwRs"}},function(e,t,n){e.exports={hint:"Hint__hint___2XngB"}},function(e,t,n){e.exports={input:"Input__input___3e_bf",inputLabel:"Input__inputLabel___3VF0S",label:"Input__label___23sO8",radio:"Input__radio___2hllK"}},function(e,t,n){e.exports={navBar:"Nav__navBar___xtCFA",navRight:"Nav__navRight___1QG2J",nav:"Nav__nav___2Dx2Y",navItem:"Nav__navItem___1LtFQ"}},function(e,t,n){e.exports={photoPickerButton:"PhotoPicker__photoPickerButton___2XdVn",photoPlaceholder:"PhotoPicker__photoPlaceholder___2JXO4",photoPlaceholderIcon:"PhotoPicker__photoPlaceholderIcon___3Et71"}},function(e,t,n){e.exports={container:"Section__container___3YYTG",actionRow:"Section__actionRow___2LWSU",sectionHeader:"Section__sectionHeader___2djyg",sectionHeaderHint:"Section__sectionHeaderHint___3Wxdc",sectionBody:"Section__sectionBody___ihqqd",sectionHeaderContent:"Section__sectionHeaderContent___1UCqa",sectionFooter:"Section__sectionFooter___1T54C",sectionFooterPrimaryContent:"Section__sectionFooterPrimaryContent___2r9ZX",sectionFooterSecondaryContent:"Section__sectionFooterSecondaryContent___Nj41Q"}},function(e,t,n){e.exports={selectInput:"SelectInput__selectInput___3efO4"}},function(e,t,n){e.exports={strike:"Strike__strike___1XV1b",strikeContent:"Strike__strikeContent___10gLb"}},function(e,t,n){e.exports={toast:"Toast__toast___XXr3v",toastClose:"Toast__toastClose___18lU4"}},function(e,t,n){e.exports={totpQrcode:"Totp__totpQrcode___1crLx"}},function(e,t,n){e.exports={sumerianSceneContainer:"XR__sumerianSceneContainer___3nVMt",sumerianScene:"XR__sumerianScene___2Tt7-",loadingOverlay:"XR__loadingOverlay___IbqcI",loadingContainer:"XR__loadingContainer___2Itxb",loadingLogo:"XR__loadingLogo___Ub7xQ",loadingSceneName:"XR__loadingSceneName___3__ne",loadingBar:"XR__loadingBar___2vcke",loadingBarFill:"XR__loadingBarFill___3M-D9",sceneErrorText:"XR__sceneErrorText___2y0tp",sceneBar:"XR__sceneBar___2ShrP",sceneName:"XR__sceneName___1ApHr",sceneActions:"XR__sceneActions___7plGs",actionButton:"XR__actionButton___2poIM",tooltip:"XR__tooltip___UYyhn",actionIcon:"XR__actionIcon___2qnd2",autoShowTooltip:"XR__autoShowTooltip___V1QH7"}}])},"object"==s(t)&&"object"==s(e)?e.exports=o():(r=[],void 0===(i="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(62)(e))},function(e,t,n){"use strict";n.r(t),n.d(t,"createScope",(function(){return h})),n.d(t,"getSigningKey",(function(){return p})),n.d(t,"clearCredentialCache",(function(){return g})),n.d(t,"SignatureV4",(function(){return I}));var r="X-Amz-Date".toLowerCase(),i=["authorization",r,"date"],o="X-Amz-Signature".toLowerCase(),s="X-Amz-Security-Token".toLowerCase(),a={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},u=/^proxy-/,c=/^sec-/,l="AWS4-HMAC-SHA256-PAYLOAD",f={},d=[];function h(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function p(e,t,n,r,i){var o=n+":"+r+":"+i+":"+t.accessKeyId+":"+t.sessionToken;if(o in f)return f[o];for(d.push(o);d.length>50;)delete f[d.shift()];return f[o]=new Promise((function(s,a){for(var u=Promise.resolve("AWS4"+t.secretAccessKey),c=function(t){(u=u.then((function(n){return r=t,(i=new e(n)).update(r),i.digest();var r,i}))).catch((function(){}))},l=0,d=[n,r,i,"aws4_request"];l<d.length;l++){c(d[l])}u.then(s,(function(e){delete f[o],a(e)}))}))}function g(){d.length=0,Object.keys(f).forEach((function(e){delete f[e]}))}var v=n(0);function y(e,t,n){for(var r=e.headers,i={},o=0,s=Object.keys(r).sort();o<s.length;o++){var l=s[o],f=l.toLowerCase();(f in a||(null==t?void 0:t.has(f))||u.test(f)||c.test(f))&&(!n||n&&!n.has(f))||(i[f]=r[l].trim().replace(/\s+/g," "))}return i}var m=n(44);var _=n(69),b=n(33);function w(e,t){var n=e.headers,r=e.body;return Object(v.__awaiter)(this,void 0,void 0,(function(){var e,i,o,s,a;return Object(v.__generator)(this,(function(u){switch(u.label){case 0:for(e=0,i=Object.keys(n);e<i.length;e++)if("x-amz-content-sha256"===(o=i[e]).toLowerCase())return[2,n[o]];return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||Object(_.isArrayBuffer)(r)?((s=new t).update(r),a=b.toHex,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[u.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function S(e){var t=e.headers,n=e.query,r=Object(v.__rest)(e,["headers","query"]);return Object(v.__assign)(Object(v.__assign)({},r),{headers:Object(v.__assign)({},t),query:n?E(n):void 0})}function E(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Object(v.__assign)(Object(v.__assign)({},t),((r={})[n]=Array.isArray(i)?Object(v.__spreadArrays)(i):i,r))}),{})}function O(e){e="function"==typeof e.clone?e.clone():S(e);for(var t=0,n=Object.keys(e.headers);t<n.length;t++){var r=n[t];i.indexOf(r.toLowerCase())>-1&&delete e.headers[r]}return e}function A(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var I=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;if(this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,"string"==typeof r){var u=Promise.resolve(r);this.regionProvider=function(){return u}}else this.regionProvider=r;if("object"==typeof n){var c=Promise.resolve(n);this.credentialProvider=function(){return c}}else this.credentialProvider=n}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(v.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,p,g,m,_,b,E,A,I,T,x;return Object(v.__generator)(this,(function(k){switch(k.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return n=k.sent(),r=n[0],i=n[1],o=t.signingDate,s=void 0===o?new Date:o,a=t.expiresIn,u=void 0===a?3600:a,c=t.unsignableHeaders,l=t.signableHeaders,f=C(s),d=f.longDate,p=f.shortDate,u>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=h(p,r,this.service),m=function(e){for(var t="function"==typeof e.clone?e.clone():S(e),n=t.headers,r=t.query,i=void 0===r?{}:r,o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];"x-amz-"===a.toLowerCase().substr(0,6)&&(i[a]=n[a],delete n[a])}return Object(v.__assign)(Object(v.__assign)({},e),{headers:n,query:i})}(O(e)),i.sessionToken&&(m.query["X-Amz-Security-Token"]=i.sessionToken),m.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",m.query["X-Amz-Credential"]=i.accessKeyId+"/"+g,m.query["X-Amz-Date"]=d,m.query["X-Amz-Expires"]=u.toString(10),_=y(m,c,l),m.query["X-Amz-SignedHeaders"]=P(_),b=m.query,E="X-Amz-Signature",A=this.getSignature,I=[d,g,this.getSigningKey(i,r,p)],T=this.createCanonicalRequest,x=[m,_],[4,w(e,this.sha256)]);case 2:return[4,A.apply(this,I.concat([T.apply(this,x.concat([k.sent()]))]))];case 3:return b[E]=k.sent(),[2,m]}}))}))},e.prototype.sign=function(e,t){return Object(v.__awaiter)(this,void 0,void 0,(function(){return Object(v.__generator)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature;return Object(v.__awaiter)(this,void 0,void 0,(function(){var e,t,i,a,u,c,f,d,p,g;return Object(v.__generator)(this,(function(v){switch(v.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return e=v.sent()[0],t=C(o),i=t.shortDate,a=t.longDate,u=h(i,e,this.service),[4,w({headers:{},body:r},this.sha256)];case 2:return c=v.sent(),(f=new this.sha256).update(n),p=b.toHex,[4,f.digest()];case 3:return d=p.apply(void 0,[v.sent()]),g=[l,a,u,s,d,c].join("\n"),[2,this.signString(g,{signingDate:o})]}}))}))},e.prototype.signString=function(e,t){var n=(void 0===t?{}:t).signingDate,r=void 0===n?new Date:n;return Object(v.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,s,a,u,c;return Object(v.__generator)(this,(function(l){switch(l.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return t=l.sent(),n=t[0],i=t[1],o=C(r).shortDate,u=(a=this.sha256).bind,[4,this.getSigningKey(i,n,o)];case 2:return(s=new(u.apply(a,[void 0,l.sent()]))).update(e),c=b.toHex,[4,s.digest()];case 3:return[2,c.apply(void 0,[l.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,i=n.signingDate,o=void 0===i?new Date:i,a=n.signableHeaders,u=n.unsignableHeaders;return Object(v.__awaiter)(this,void 0,void 0,(function(){var t,n,i,c,l,f,d,p,g,m,_;return Object(v.__generator)(this,(function(v){switch(v.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return t=v.sent(),n=t[0],i=t[1],c=O(e),l=C(o),f=l.longDate,d=l.shortDate,p=h(d,n,this.service),c.headers[r]=f,i.sessionToken&&(c.headers[s]=i.sessionToken),[4,w(c,this.sha256)];case 2:return g=v.sent(),!function(e,t){e=e.toLowerCase();for(var n=0,r=Object.keys(t);n<r.length;n++){if(e===r[n].toLowerCase())return!0}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=g),m=y(c,u,a),[4,this.getSignature(f,p,this.getSigningKey(i,n,d),this.createCanonicalRequest(c,m,g))];case 3:return _=v.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+i.accessKeyId+"/"+p+", SignedHeaders="+P(m)+", Signature="+_,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){for(var t=e.query,n=void 0===t?{}:t,r=[],i={},s=function(e){if(e.toLowerCase()===o)return"continue";r.push(e);var t=n[e];"string"==typeof t?i[e]=Object(m.escapeUri)(e)+"="+Object(m.escapeUri)(t):Array.isArray(t)&&(i[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([Object(m.escapeUri)(e)+"="+Object(m.escapeUri)(n)])}),[]).join("&"))},a=0,u=Object.keys(n).sort();a<u.length;a++){s(u[a])}return r.map((function(e){return i[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Object(v.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(v.__generator)(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+Object(b.toHex)(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return Object(v.__awaiter)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(v.__generator)(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,c.sent()]))).update(i),u=b.toHex,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n){return p(this.sha256,e,n,t,this.service)},e}();function C(e){var t=A(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}}function P(e){return Object.keys(e).sort().join(";")}},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return _}));var r=n(129),i=n(32),o=n(4),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},l=new i.a("RestAPI"),f=function(){function e(e){this._api=null,this._options=e,o.b.register(this),l.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=c(t,["API"]),o=s(s({},i),r);if(l.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var a=o.aws_cloud_logic_custom;o.endpoints="string"==typeof a?JSON.parse(a):a}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)||(o.endpoints=[]),o.endpoints.forEach((function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(l.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)})),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return l.debug("create Rest API instance"),this._options?(this._api=new r.a(this._options),!0):Promise.reject("API not configured")},e.prototype.get=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:if(this._api)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),[2,Promise.reject(r)];case 4:return 0===(i=this._api.endpoint(e)).length?[2,Promise.reject("API "+e+" does not exist")]:[2,this._api.get(i+t,n)]}}))}))},e.prototype.post=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:if(this._api)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),[2,Promise.reject(r)];case 4:return 0===(i=this._api.endpoint(e)).length?[2,Promise.reject("API "+e+" does not exist")]:[2,this._api.post(i+t,n)]}}))}))},e.prototype.put=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:if(this._api)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),[2,Promise.reject(r)];case 4:return 0===(i=this._api.endpoint(e)).length?[2,Promise.reject("API "+e+" does not exist")]:[2,this._api.put(i+t,n)]}}))}))},e.prototype.patch=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:if(this._api)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),[2,Promise.reject(r)];case 4:return 0===(i=this._api.endpoint(e)).length?[2,Promise.reject("API "+e+" does not exist")]:[2,this._api.patch(i+t,n)]}}))}))},e.prototype.del=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:if(this._api)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),[2,Promise.reject(r)];case 4:return 0===(i=this._api.endpoint(e)).length?[2,Promise.reject("API "+e+" does not exist")]:[2,this._api.del(i+t,n)]}}))}))},e.prototype.head=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:if(this._api)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),[2,Promise.reject(r)];case 4:return 0===(i=this._api.endpoint(e)).length?[2,Promise.reject("API "+e+" does not exist")]:[2,this._api.head(i+t,n)]}}))}))},e.prototype.endpoint=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:if(this._api)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),[2,Promise.reject(t)];case 4:return[2,this._api.endpoint(e)]}}))}))},e}(),d=(new f(null),n(225)),h=n(17),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},g=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},y=new i.a("API"),m=function(){function e(e){this._options=e,this._restApi=new f(e),this._graphqlApi=new d.a(e),h.a.register(this),y.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e);var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return p(p({},t),n)},e.prototype.get=function(e,t,n){return g(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this._restApi.get(e,t,n)]}))}))},e.prototype.post=function(e,t,n){return g(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this._restApi.post(e,t,n)]}))}))},e.prototype.put=function(e,t,n){return g(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this._restApi.put(e,t,n)]}))}))},e.prototype.patch=function(e,t,n){return g(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this._restApi.patch(e,t,n)]}))}))},e.prototype.del=function(e,t,n){return g(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this._restApi.del(e,t,n)]}))}))},e.prototype.head=function(e,t,n){return g(this,void 0,void 0,(function(){return v(this,(function(r){return[2,this._restApi.head(e,t,n)]}))}))},e.prototype.endpoint=function(e){return g(this,void 0,void 0,(function(){return v(this,(function(t){return[2,this._restApi.endpoint(e)]}))}))},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e){return this._graphqlApi.graphql(e)},e}(),_=new m(null)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(188),t),r.__exportStar(n(104),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55);t.formatUrl=function(e){var t=e.protocol,n=e.path,i=e.hostname,o=e.port,s=e.query;t&&":"!==t.substr(-1)&&(t+=":"),o&&(i+=":"+o),n&&"/"!==n.charAt(0)&&(n="/"+n);var a=s?r.buildQueryString(s):"";return a&&"?"!==a[0]&&(a="?"+a),t+"//"+i+n+a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.createRequest=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o=this;return r.__generator(this,(function(s){switch(s.label){case 0:return n=function(e){return function(e){return r.__awaiter(o,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,{output:{request:e.request},response:void 0}]}))}))}},(i=e.middlewareStack.clone()).add(n,{step:"build",priority:"low"}),[4,t.resolveMiddleware(i,e.config,void 0)(t).then((function(e){return e.output.request}))];case 1:return[2,s.sent()]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(117),o=n(191),s=function(){function e(e){var t=r.__assign({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new i.SignatureV4(t)}return e.prototype.presign=function(e,t){void 0===t&&(t={});var n=t.unsignableHeaders,i=void 0===n?new Set:n,s=r.__rest(t,["unsignableHeaders"]);return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return i.add("content-type"),e.headers[o.SHA256_HEADER]=o.UNSIGNED_PAYLOAD,[2,this.signer.presign(e,r.__assign({expiresIn:900,unsignableHeaders:i},s))]}))}))},e}();t.S3RequestPresigner=s},function(e,t,n){"use strict";const r=n(198),i=n(53),o=n(53),s=n(36).buildOptions,a=n(200);t.parse=function(e,t,n){if(n){!0===n&&(n={});const t=a.validate(e,n);if(!0!==t)throw Error(t.err.msg)}return t=s(t,o.defaultOptions,o.props),r.convertToJson(i.getTraversalObj(e,t),t)},t.convertTonimn=n(201).convert2nimn,t.getTraversalObj=i.getTraversalObj,t.convertToJson=r.convertToJson,t.convertToJsonString=n(202).convertToJsonString,t.validate=a.validate,t.j2xParser=n(203),t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(98),i=n(8);t.parseUrl=e=>{const{hostname:t="localhost",pathname:n="/",port:o,protocol:s="https:",search:a}=i.parse(e);let u;return a&&(u=r.parseQueryString(a)),{hostname:t,port:o?parseInt(o):void 0,protocol:s,path:n,query:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3);function o(e){var t=this;return function(n){return function(o){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(s){return t=o.request,i.HttpRequest.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=r.__assign(r.__assign({},t.headers),{Expect:"100-continue"})),[2,n(r.__assign(r.__assign({},o),{request:t}))]}))}))}}}t.addExpectContinueMiddleware=o,t.addExpectContinueMiddlewareOptions={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"},t.getAddExpectContinuePlugin=function(e){return{applyToStack:function(n){n.add(o(e),t.addExpectContinueMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(220),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(221);t.blobHasher=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=new e,[4,i.blobReader(t,(function(e){n.update(e)}))];case 1:return r.sent(),[2,n.digest()]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(222),o=n(7),s=function(){function e(){this.state=Uint32Array.from(i.INIT),this.buffer=new DataView(new ArrayBuffer(i.BLOCK_SIZE)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function(e){if("string"==typeof e)return o.fromUtf8(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(e)}(e),n=0,r=t.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),r--,this.bufferLength===i.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,o,s,a,u;return r.__generator(this,(function(r){if(!this.finished){if(t=(e=this).buffer,n=e.bufferLength,o=e.bytesHashed,s=8*o,t.setUint8(this.bufferLength++,128),n%i.BLOCK_SIZE>=i.BLOCK_SIZE-8){for(u=this.bufferLength;u<i.BLOCK_SIZE;u++)t.setUint8(u,0);this.hashBuffer(),this.bufferLength=0}for(u=this.bufferLength;u<i.BLOCK_SIZE-8;u++)t.setUint8(u,0);t.setUint32(i.BLOCK_SIZE-8,s>>>0,!0),t.setUint32(i.BLOCK_SIZE-4,Math.floor(s/4294967296),!0),this.hashBuffer(),this.finished=!0}for(a=new DataView(new ArrayBuffer(i.DIGEST_LENGTH)),u=0;u<4;u++)a.setUint32(4*u,this.state[u],!0);return[2,new Uint8Array(a.buffer,a.byteOffset,a.byteLength)]}))}))},e.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3];n=u(n,r,i,o,e.getUint32(0,!0),7,3614090360),o=u(o,n,r,i,e.getUint32(4,!0),12,3905402710),i=u(i,o,n,r,e.getUint32(8,!0),17,606105819),r=u(r,i,o,n,e.getUint32(12,!0),22,3250441966),n=u(n,r,i,o,e.getUint32(16,!0),7,4118548399),o=u(o,n,r,i,e.getUint32(20,!0),12,1200080426),i=u(i,o,n,r,e.getUint32(24,!0),17,2821735955),r=u(r,i,o,n,e.getUint32(28,!0),22,4249261313),n=u(n,r,i,o,e.getUint32(32,!0),7,1770035416),o=u(o,n,r,i,e.getUint32(36,!0),12,2336552879),i=u(i,o,n,r,e.getUint32(40,!0),17,4294925233),r=u(r,i,o,n,e.getUint32(44,!0),22,2304563134),n=u(n,r,i,o,e.getUint32(48,!0),7,1804603682),o=u(o,n,r,i,e.getUint32(52,!0),12,4254626195),i=u(i,o,n,r,e.getUint32(56,!0),17,2792965006),n=c(n,r=u(r,i,o,n,e.getUint32(60,!0),22,1236535329),i,o,e.getUint32(4,!0),5,4129170786),o=c(o,n,r,i,e.getUint32(24,!0),9,3225465664),i=c(i,o,n,r,e.getUint32(44,!0),14,643717713),r=c(r,i,o,n,e.getUint32(0,!0),20,3921069994),n=c(n,r,i,o,e.getUint32(20,!0),5,3593408605),o=c(o,n,r,i,e.getUint32(40,!0),9,38016083),i=c(i,o,n,r,e.getUint32(60,!0),14,3634488961),r=c(r,i,o,n,e.getUint32(16,!0),20,3889429448),n=c(n,r,i,o,e.getUint32(36,!0),5,568446438),o=c(o,n,r,i,e.getUint32(56,!0),9,3275163606),i=c(i,o,n,r,e.getUint32(12,!0),14,4107603335),r=c(r,i,o,n,e.getUint32(32,!0),20,1163531501),n=c(n,r,i,o,e.getUint32(52,!0),5,2850285829),o=c(o,n,r,i,e.getUint32(8,!0),9,4243563512),i=c(i,o,n,r,e.getUint32(28,!0),14,1735328473),n=l(n,r=c(r,i,o,n,e.getUint32(48,!0),20,2368359562),i,o,e.getUint32(20,!0),4,4294588738),o=l(o,n,r,i,e.getUint32(32,!0),11,2272392833),i=l(i,o,n,r,e.getUint32(44,!0),16,1839030562),r=l(r,i,o,n,e.getUint32(56,!0),23,4259657740),n=l(n,r,i,o,e.getUint32(4,!0),4,2763975236),o=l(o,n,r,i,e.getUint32(16,!0),11,1272893353),i=l(i,o,n,r,e.getUint32(28,!0),16,4139469664),r=l(r,i,o,n,e.getUint32(40,!0),23,3200236656),n=l(n,r,i,o,e.getUint32(52,!0),4,681279174),o=l(o,n,r,i,e.getUint32(0,!0),11,3936430074),i=l(i,o,n,r,e.getUint32(12,!0),16,3572445317),r=l(r,i,o,n,e.getUint32(24,!0),23,76029189),n=l(n,r,i,o,e.getUint32(36,!0),4,3654602809),o=l(o,n,r,i,e.getUint32(48,!0),11,3873151461),i=l(i,o,n,r,e.getUint32(60,!0),16,530742520),n=f(n,r=l(r,i,o,n,e.getUint32(8,!0),23,3299628645),i,o,e.getUint32(0,!0),6,4096336452),o=f(o,n,r,i,e.getUint32(28,!0),10,1126891415),i=f(i,o,n,r,e.getUint32(56,!0),15,2878612391),r=f(r,i,o,n,e.getUint32(20,!0),21,4237533241),n=f(n,r,i,o,e.getUint32(48,!0),6,1700485571),o=f(o,n,r,i,e.getUint32(12,!0),10,2399980690),i=f(i,o,n,r,e.getUint32(40,!0),15,4293915773),r=f(r,i,o,n,e.getUint32(4,!0),21,2240044497),n=f(n,r,i,o,e.getUint32(32,!0),6,1873313359),o=f(o,n,r,i,e.getUint32(60,!0),10,4264355552),i=f(i,o,n,r,e.getUint32(24,!0),15,2734768916),r=f(r,i,o,n,e.getUint32(52,!0),21,1309151649),n=f(n,r,i,o,e.getUint32(16,!0),6,4149444226),o=f(o,n,r,i,e.getUint32(44,!0),10,3174756917),i=f(i,o,n,r,e.getUint32(8,!0),15,718787259),r=f(r,i,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=i+t[2]&4294967295,t[3]=o+t[3]&4294967295},e}();function a(e,t,n,r,i,o){return((t=(t+e&4294967295)+(r+o&4294967295)&4294967295)<<i|t>>>32-i)+n&4294967295}function u(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)}function c(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)}function l(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)}function f(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)}t.Md5=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(32),i=n(35),o=n(71),s=n(57),a=n(50),u=n.n(a),c=n(8),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},p=new r.a("RestClient"),g=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0;e.endpoints;this._options=e,p.debug("API Options",this._options)}return e.prototype.ajax=function(e,t,n){return f(this,void 0,void 0,(function(){var r,s,a,u,f,g,v,y,m,_,b=this;return d(this,(function(d){switch(d.label){case 0:return p.debug(t+" "+e),r=this._parseUrl(e),s={method:t,url:e,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0},a={},i.a.isReactNative&&(u=i.a.userAgent||"aws-amplify/0.1.x",a={"User-Agent":u}),f=Object.assign({},n),g=f.response,f.body&&(a["Content-Type"]="application/json; charset=UTF-8",s.data=JSON.stringify(f.body)),f.responseType&&(s.responseType=f.responseType),f.withCredentials&&(s.withCredentials=f.withCredentials),f.timeout&&(s.timeout=f.timeout),s.signerServiceInfo=f.signerServiceInfo,this._custom_header?[4,this._custom_header()]:[3,2];case 1:return y=d.sent(),[3,3];case 2:y=void 0,d.label=3;case 3:return v=y,s.headers=l(l(l({},a),v),f.headers),m=Object(c.parse)(e,!0,!0),m.search,_=h(m,["search"]),s.url=Object(c.format)(l(l({},_),{query:l(l({},_.query),f.queryStringParameters||{})})),void 0!==s.headers.Authorization?(s.headers=Object.keys(s.headers).reduce((function(e,t){return s.headers[t]&&(e[t]=s.headers[t]),e}),{}),[2,this._request(s,g)]):[2,o.a.get().then((function(e){return b._signed(l({},s),e,g)}),(function(e){return p.debug("No credentials available, the request will be unsigned"),b._request(s,g)}))]}}))}))},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)?(n.forEach((function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)})),r):r},e.prototype._signed=function(e,t,n){var r=e.signerServiceInfo,i=h(e,["signerServiceInfo"]),o=this._region||this._options.region,a=this._service||this._options.service,c={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},l={region:o,service:a},f=Object.assign(l,r),d=s.a.sign(i,c,f);return d.data&&(d.body=d.data),p.debug("Signed Request: ",d),delete d.headers.host,u()(d).then((function(e){return n?e:e.data})).catch((function(e){throw p.debug(e),e}))},e.prototype._request=function(e,t){return void 0===t&&(t=!1),u()(e).then((function(e){return t?e:e.data})).catch((function(e){throw p.debug(e),e}))},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}()},function(e,t,n){e.exports=n(223).Observable},function(e,t,n){(function(t){var n;n=function(){return function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),r=1,i=2,o=3,s=4,a=5,u=6,c=7,l=8,f=9,d=10,h=11,p=12,g=13,v=14,y=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw new Error(r)}if(typeof e[n]!==t[n])throw new Error(w(_.INVALID_TYPE,[typeof e[n],n]))}},m=function(e,t){return function(){return e.apply(t,arguments)}},_={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},b={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},w=function(e,t){var n=e.text;if(t)for(var r,i,o=0;o<t.length;o++)if(r="{"+o+"}",(i=n.indexOf(r))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+t[o]+a}return n},S=[0,6,77,81,73,115,100,112,3],E=[0,4,77,81,84,84,4],O=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function A(e,t){var n,r=t,l=e[t],d=l>>4,p=l&=15;t+=1;var g=0,v=1;do{if(t==e.length)return[null,r];g+=(127&(n=e[t++]))*v,v*=128}while(0!=(128&n));var y=t+g;if(y>e.length)return[null,r];var m=new O(d);switch(d){case i:1&e[t++]&&(m.sessionPresent=!0),m.returnCode=e[t++];break;case o:var _=p>>1&3,b=P(e,t),w=k(e,t+=2,b);t+=b,_>0&&(m.messageIdentifier=P(e,t),t+=2);var S=new M(e.subarray(t,y));1==(1&p)&&(S.retained=!0),8==(8&p)&&(S.duplicate=!0),S.qos=_,S.destinationName=w,m.payloadMessage=S;break;case s:case a:case u:case c:case h:m.messageIdentifier=P(e,t);break;case f:m.messageIdentifier=P(e,t),t+=2,m.returnCode=e.subarray(t,y)}return[m,y]}function I(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function C(e,t,n,r){return x(e,n,r=I(t,n,r)),r+t}function P(e,t){return 256*e[t]+e[t+1]}function T(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function x(e,t,n){for(var r=n,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){var s=e.charCodeAt(++i);if(isNaN(s))throw new Error(w(_.MALFORMED_UNICODE,[o,s]));o=s-56320+(o-55296<<10)+65536}o<=127?t[r++]=o:o<=2047?(t[r++]=o>>6&31|192,t[r++]=63&o|128):o<=65535?(t[r++]=o>>12&15|224,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>18&7|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t}function k(e,t,n){for(var r,i="",o=t;o<t+n;){var s=e[o++];if(s<128)r=s;else{var a=e[o++]-128;if(a<0)throw new Error(w(_.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)r=64*(s-192)+a;else{var u=e[o++]-128;if(u<0)throw new Error(w(_.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16)]));if(s<240)r=4096*(s-224)+64*a+u;else{var c=e[o++]-128;if(c<0)throw new Error(w(_.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16),c.toString(16)]));if(!(s<248))throw new Error(w(_.MALFORMED_UTF,[s.toString(16),a.toString(16),u.toString(16),c.toString(16)]));r=262144*(s-240)+4096*a+64*u+c}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}O.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,i=[],s=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case r:switch(this.mqttVersion){case 3:n+=S.length+3;break;case 4:n+=E.length+3}n+=T(this.clientId)+2,void 0!==this.willMessage&&(n+=T(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(c)),n+=e.byteLength+2),void 0!==this.userName&&(n+=T(this.userName)+2),void 0!==this.password&&(n+=T(this.password)+2);break;case l:t|=2;for(var a=0;a<this.topics.length;a++)i[a]=T(this.topics[a]),n+=i[a]+2;n+=this.requestedQos.length;break;case d:for(t|=2,a=0;a<this.topics.length;a++)i[a]=T(this.topics[a]),n+=i[a]+2;break;case u:t|=2;break;case o:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(s=T(this.payloadMessage.destinationName))+2;var c=this.payloadMessage.payloadBytes;n+=c.byteLength,c instanceof ArrayBuffer?c=new Uint8Array(c):c instanceof Uint8Array||(c=new Uint8Array(c.buffer))}var f=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),h=f.length+1,p=new ArrayBuffer(n+h),g=new Uint8Array(p);if(g[0]=t,g.set(f,1),this.type==o)h=C(this.payloadMessage.destinationName,s,g,h);else if(this.type==r){switch(this.mqttVersion){case 3:g.set(S,h),h+=S.length;break;case 4:g.set(E,h),h+=E.length}var v=0;this.cleanSession&&(v=2),void 0!==this.willMessage&&(v|=4,v|=this.willMessage.qos<<3,this.willMessage.retained&&(v|=32)),void 0!==this.userName&&(v|=128),void 0!==this.password&&(v|=64),g[h++]=v,h=I(this.keepAliveInterval,g,h)}switch(void 0!==this.messageIdentifier&&(h=I(this.messageIdentifier,g,h)),this.type){case r:h=C(this.clientId,T(this.clientId),g,h),void 0!==this.willMessage&&(h=C(this.willMessage.destinationName,T(this.willMessage.destinationName),g,h),h=I(e.byteLength,g,h),g.set(e,h),h+=e.byteLength),void 0!==this.userName&&(h=C(this.userName,T(this.userName),g,h)),void 0!==this.password&&(h=C(this.password,T(this.password),g,h));break;case o:g.set(c,h);break;case l:for(a=0;a<this.topics.length;a++)h=C(this.topics[a],i[a],g,h),g[h++]=this.requestedQos[a];break;case d:for(a=0;a<this.topics.length;a++)h=C(this.topics[a],i[a],g,h)}return p};var j=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new O(p).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(_.PING_TIMEOUT.code,w(_.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},N=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,r),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},R=function(t,r,i,o,s){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(w(_.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(w(_.UNSUPPORTED,["ArrayBuffer"]));for(var a in this._trace("Paho.Client",t,r,i,o,s),this.host=r,this.port=i,this.path=o,this.uri=t,this.clientId=s,this._wsuri=null,this._localKey=r+":"+i+("/mqtt"!=o?":"+o:"")+":"+s+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==a.indexOf("Sent:"+this._localKey)&&0!==a.indexOf("Received:"+this._localKey)||this.restore(a)};R.prototype.host=null,R.prototype.port=null,R.prototype.path=null,R.prototype.uri=null,R.prototype.clientId=null,R.prototype.socket=null,R.prototype.connected=!1,R.prototype.maxMessageIdentifier=65536,R.prototype.connectOptions=null,R.prototype.hostIndex=null,R.prototype.onConnected=null,R.prototype.onConnectionLost=null,R.prototype.onMessageDelivered=null,R.prototype.onMessageArrived=null,R.prototype.traceFunction=null,R.prototype._msg_queue=null,R.prototype._buffered_msg_queue=null,R.prototype._connectTimeout=null,R.prototype.sendPinger=null,R.prototype.receivePinger=null,R.prototype._reconnectInterval=1,R.prototype._reconnecting=!1,R.prototype._reconnectTimeout=null,R.prototype.disconnectedPublishing=!1,R.prototype.disconnectedBufferSize=5e3,R.prototype.receiveBuffer=null,R.prototype._traceBuffer=null,R.prototype._MAX_TRACE_ENTRIES=100,R.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(w(_.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(w(_.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},R.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(w(_.INVALID_STATE,["not connected"]));var n=new O(l);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:w(e)})}),t.timeout&&(n.timeOut=new N(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:_.SUBSCRIBE_TIMEOUT.code,errorMessage:w(_.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},R.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(w(_.INVALID_STATE,["not connected"]));var n=new O(d);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new N(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:_.UNSUBSCRIBE_TIMEOUT.code,errorMessage:w(_.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},R.prototype.send=function(e){this._trace("Client.send",e);var t=new O(o);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(w(_.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(w(_.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},R.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(w(_.INVALID_STATE,["not connecting or connected"]));var e=new O(v);this._notify_msg_sent[e]=m(this._disconnected,this),this._schedule_message(e)},R.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},R.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},R.prototype.stopTrace=function(){delete this._traceBuffer},R.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=m(this._on_socket_open,this),this.socket.onmessage=m(this._on_socket_message,this),this.socket.onerror=m(this._on_socket_error,this),this.socket.onclose=m(this._on_socket_close,this),this.sendPinger=new j(this,this.connectOptions.keepAliveInterval),this.receivePinger=new j(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new N(this,this.connectOptions.timeout,this._disconnected,[_.CONNECT_TIMEOUT.code,w(_.CONNECT_TIMEOUT)])},R.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},R.prototype.store=function(e,t){var r={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case o:t.pubRecReceived&&(r.pubRecReceived=!0),r.payloadMessage={};for(var i="",s=t.payloadMessage.payloadBytes,a=0;a<s.length;a++)s[a]<=15?i=i+"0"+s[a].toString(16):i+=s[a].toString(16);r.payloadMessage.payloadHex=i,r.payloadMessage.qos=t.payloadMessage.qos,r.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(r.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(r.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),r.sequence=t.sequence);break;default:throw Error(w(_.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,r]))}n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(r))},R.prototype.restore=function(e){var t=n.getItem(e),r=JSON.parse(t),i=new O(r.type,r);switch(r.type){case o:for(var s=r.payloadMessage.payloadHex,a=new ArrayBuffer(s.length/2),u=new Uint8Array(a),c=0;s.length>=2;){var l=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),u[c++]=l}var f=new M(u);f.qos=r.payloadMessage.qos,f.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(f.duplicate=!0),r.payloadMessage.retained&&(f.retained=!0),i.payloadMessage=f;break;default:throw Error(w(_.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},R.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},R.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===o&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},R.prototype._on_socket_open=function(){var e=new O(r,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},R.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},R.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+t.length);r.set(this.receiveBuffer),r.set(t,this.receiveBuffer.length),t=r,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var o=A(t,i),s=o[0];if(i=o[1],null===s)break;n.push(s)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(e){var a="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(_.INTERNAL_ERROR.code,w(_.INTERNAL_ERROR,[e.message,a]))}return n},R.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case i:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var r=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+r.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var l=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+l.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(_.CONNACK_RETURNCODE.code,w(_.CONNACK_RETURNCODE,[e.returnCode,b[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var d=[];for(var p in this._sentMessages)this._sentMessages.hasOwnProperty(p)&&d.push(this._sentMessages[p]);if(this._buffered_msg_queue.length>0)for(var y=null;y=this._buffered_msg_queue.pop();)d.push(y),this.onMessageDelivered&&(this._notify_msg_sent[y]=this.onMessageDelivered(y.payloadMessage));d=d.sort((function(e,t){return e.sequence-t.sequence}));for(var m=0,S=d.length;m<S;m++)if((r=d[m]).type==o&&r.pubRecReceived){var E=new O(u,{messageIdentifier:r.messageIdentifier});this._schedule_message(E)}else this._schedule_message(r);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var A=!1;this._reconnecting&&(A=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(A,this._wsuri),this._process_queue();break;case o:this._receivePublish(e);break;case s:(r=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage));break;case a:(r=this._sentMessages[e.messageIdentifier])&&(r.pubRecReceived=!0,E=new O(u,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",r),this._schedule_message(E));break;case u:l=this._receivedMessages[e.messageIdentifier],n.removeItem("Received:"+this._localKey+e.messageIdentifier),l&&(this._receiveMessage(l),delete this._receivedMessages[e.messageIdentifier]);var I=new O(c,{messageIdentifier:e.messageIdentifier});this._schedule_message(I);break;case c:r=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage);break;case f:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),128===e.returnCode[0]?r.onFailure&&r.onFailure(e.returnCode):r.onSuccess&&r.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case h:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),r.callback&&r.callback(),delete this._sentMessages[e.messageIdentifier]);break;case g:this.sendPinger.reset();break;case v:this._disconnected(_.INVALID_MQTT_MESSAGE_TYPE.code,w(_.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(_.INVALID_MQTT_MESSAGE_TYPE.code,w(_.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var C="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(_.INTERNAL_ERROR.code,w(_.INTERNAL_ERROR,[e.message,C]))}},R.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(_.SOCKET_ERROR.code,w(_.SOCKET_ERROR,[e.data]))},R.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(_.SOCKET_CLOSE.code,w(_.SOCKET_CLOSE))},R.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},R.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new O(s,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new O(a,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},R.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},R.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},R.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},R.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new N(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=_.OK.code,t=w(_.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==_.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},R.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t||void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},R.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var M=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw w(_.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,i=!1,o=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:k(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(T(t)),n=new Uint8Array(e);return x(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(w(_.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(w(_.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return o},set:function(e){o=e}}})};return{Client:function(e,t,n,r){var i;if("string"!=typeof e)throw new Error(w(_.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){r=t;var o=(i=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!o)throw new Error(w(_.INVALID_ARGUMENT,[e,"host"]));e=o[4]||o[2],t=parseInt(o[7]),n=o[8]}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(w(_.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(w(_.INVALID_TYPE,[typeof n,"path"]));var s=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);i="ws://"+(s?"["+e+"]":e)+":"+t+n}for(var a=0,u=0;u<r.length;u++){var c=r.charCodeAt(u);55296<=c&&c<=56319&&u++,a++}if("string"!=typeof r||a>65535)throw new Error(w(_.INVALID_ARGUMENT,[r,"clientId"]));var l=new R(i,e,t,n,r);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(w(_.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(w(_.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(w(_.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(w(_.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return l.clientId},set:function(){throw new Error(w(_.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return l.onConnected},set:function(e){if("function"!=typeof e)throw new Error(w(_.INVALID_TYPE,[typeof e,"onConnected"]));l.onConnected=e}},disconnectedPublishing:{get:function(){return l.disconnectedPublishing},set:function(e){l.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return l.disconnectedBufferSize},set:function(e){l.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return l.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(w(_.INVALID_TYPE,[typeof e,"onConnectionLost"]));l.onConnectionLost=e}},onMessageDelivered:{get:function(){return l.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(w(_.INVALID_TYPE,[typeof e,"onMessageDelivered"]));l.onMessageDelivered=e}},onMessageArrived:{get:function(){return l.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(w(_.INVALID_TYPE,[typeof e,"onMessageArrived"]));l.onMessageArrived=e}},trace:{get:function(){return l.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(w(_.INVALID_TYPE,[typeof e,"onTrace"]));l.traceFunction=e}}}),this.connect=function(e){if(y(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(w(_.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(w(_.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof M))throw new Error(w(_.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(w(_.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(w(_.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(w(_.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,r=0;r<e.hosts.length;r++){if("string"!=typeof e.hosts[r])throw new Error(w(_.INVALID_TYPE,[typeof e.hosts[r],"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[r])){if(0===r)t=!0;else if(!t)throw new Error(w(_.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(t)throw new Error(w(_.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(w(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(w(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(w(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],r=0;r<e.hosts.length;r++){if("number"!=typeof e.ports[r]||e.ports[r]<0)throw new Error(w(_.INVALID_TYPE,[typeof e.ports[r],"connectOptions.ports["+r+"]"]));var o=e.hosts[r],s=e.ports[r],a=-1!==o.indexOf(":");i="ws://"+(a?"["+o+"]":o)+":"+s+n,e.uris.push(i)}}}l.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(y(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(w(_.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));l.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(y(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");l.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof M)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(w(_.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new M(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.publish=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof M)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(w(_.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new M(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.disconnect=function(){l.disconnect()},this.getTraceLog=function(){return l.getTraceLog()},this.startTrace=function(){l.startTrace()},this.stopTrace=function(){l.stopTrace()},this.isConnected=function(){return l.connected}},Message:M}}(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},e.exports=n()}).call(this,n(52))},,,,function(e,t,n){"use strict";n.r(t);var r=n(17),i=n(70);n.d(t,"Amplify",(function(){return r.a}));var o=n(41),s=n(28),a=n(227);n.d(t,"Analytics",(function(){return a.a}));var u=n(72);n.d(t,"AWSPinpointProvider",(function(){return u.a}));var c=n(230);n.d(t,"AWSKinesisProvider",(function(){return c.a}));var l=n(229);n.d(t,"AWSKinesisFirehoseProvider",(function(){return l.a}));var f=n(228);n.d(t,"AmazonPersonalizeProvider",(function(){return f.a})),n.d(t,"Auth",(function(){return o.a}));var d=n(106);n.d(t,"Storage",(function(){return d.a}));var h=n(48);n.d(t,"StorageClass",(function(){return h.a}));var p=n(118);n.d(t,"API",(function(){return p.a})),n.d(t,"APIClass",(function(){return p.b}));var g=n(225);n.d(t,"graphqlOperation",(function(){return g.b}));var v=n(56);n.d(t,"PubSub",(function(){return v.a})),n.d(t,"Cache",(function(){return s.a}));var y=n(226);n.d(t,"Interactions",(function(){return y.a}));var m=n(116);for(var _ in m)["Analytics","AWSPinpointProvider","AWSKinesisProvider","AWSKinesisFirehoseProvider","AmazonPersonalizeProvider","Auth","Storage","StorageClass","API","APIClass","graphqlOperation","PubSub","Cache","Interactions","XR","Predictions","Logger","Hub","JS","ClientDevice","Signer","I18n","ServiceWorker","Amplify","default"].indexOf(_)<0&&function(e){n.d(t,e,(function(){return m[e]}))}(_);var b=n(231);n.d(t,"XR",(function(){return b.a}));var w=n(224);n.d(t,"Predictions",(function(){return w.a}));var S=n(32);n.d(t,"Logger",(function(){return S.a}));var E=n(63);n.d(t,"Hub",(function(){return E.a}));var O=n(31);n.d(t,"JS",(function(){return O.a}));var A=n(68);n.d(t,"ClientDevice",(function(){return A.a}));var I=n(57);n.d(t,"Signer",(function(){return I.a}));var C=n(67);n.d(t,"I18n",(function(){return C.a})),n.d(t,"ServiceWorker",(function(){return i.a})),r.a.Auth=o.a,r.a.Cache=s.a,r.a.ServiceWorker=i.a,t.default=r.a},,,,,,function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+h]=255&s,h+=p,s/=256,c-=8);e[n+h-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r,i,o,s;e.exports=(r=n(20),o=(i=r).lib.Base,s=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),o=this._iKey=t.clone(),a=i.words,u=o.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function g(e){throw new RangeError(d[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(f,".")).split("."),t).join(".")}function m(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return v(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=36)e=h(e/35);return h(r+36*e/(e+38))}function S(e){var t,n,r,i,o,s,a,c,l,f,d,p=[],v=e.length,y=0,m=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=y,s=1,a=36;i>=v&&g("invalid-input"),((c=(d=e.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||c>h((u-y)/s))&&g("overflow"),y+=c*s,!(c<(l=a<=b?1:a>=b+26?26:a-b));a+=36)s>h(u/(f=36-l))&&g("overflow"),s*=f;b=w(y-o,t=p.length+1,0==o),h(y/t)>u-m&&g("overflow"),m+=h(y/t),y%=t,p.splice(y++,0,m)}return _(p)}function E(e){var t,n,r,i,o,s,a,c,l,f,d,v,y,_,S,E=[];for(v=(e=m(e)).length,t=128,n=0,o=72,s=0;s<v;++s)(d=e[s])<128&&E.push(p(d));for(r=i=E.length,i&&E.push("-");r<v;){for(a=u,s=0;s<v;++s)(d=e[s])>=t&&d<a&&(a=d);for(a-t>h((u-n)/(y=r+1))&&g("overflow"),n+=(a-t)*y,t=a,s=0;s<v;++s)if((d=e[s])<t&&++n>u&&g("overflow"),d==t){for(c=n,l=36;!(c<(f=l<=o?1:l>=o+26?26:l-o));l+=36)S=c-f,_=36-f,E.push(p(b(f+S%_,0))),c=h(S/_);E.push(p(b(c,0))),o=w(n,y,r==i),n=0,++r}++n,++t}return E.join("")}a={version:"1.4.1",ucs2:{decode:m,encode:_},decode:S,encode:E,toASCII:function(e){return y(e,(function(e){return l.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return y(e,(function(e){return c.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(62)(e),n(52))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(148),t.encode=t.stringify=n(149)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,d,h,p,g=e[l].replace(a,"%20"),v=g.indexOf(n);v>=0?(f=g.substr(0,v),d=g.substr(v+1)):(f=g,d=""),h=decodeURIComponent(f),p=decodeURIComponent(d),r(s,h)?i(s[h])?s[h].push(p):s[h]=[s[h],p]:s[h]=p}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e,t){if("string"==typeof e){var n=Promise.resolve(t(e));return function(){return n}}if("object"==typeof e){var r=Promise.resolve(e);return function(){return r}}return e}t.normalizeEndpoint=i,t.resolveEndpointsConfig=function(e){var t=this,n=void 0===e.tls||e.tls,o=e.endpoint?i(e.endpoint,e.urlParser):function(){return e.region().then((function(i){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,e.regionInfoProvider(i)];case 1:if(!(t=(r.sent()||{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+t)]}}))}))}))};return r.__assign(r.__assign({},e),{endpoint:o,tls:n})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}t.resolveRegionConfig=function(e){var t=e.region||e.regionDefaultProvider(e);return r.__assign(r.__assign({},e),{region:i(t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.destroyRequestHandlerConfig=function(e){e.requestHandler.destroy&&e.requestHandler.destroy()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}();t.HttpResponse=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(r.__assign(r.__assign({},this),{headers:r.__assign({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var i,o=t[n];return r.__assign(r.__assign({},e),((i={})[n]=Array.isArray(o)?r.__spread(o):o,i))}),{}))),n},e}();t.HttpRequest=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidHostname=function(e){return/^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]$/.test(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e){var t=this;return function(n){return function(i){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,e.retryStrategy.retry(n,i)]}))}))}}}t.retryMiddleware=i,t.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},t.getRetryPlugin=function(e){return{applyToStack:function(n){e.maxRetries>0&&n.add(i(e),t.retryMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLOCK_SKEW_ERROR_CODES={AuthFailure:!0,InvalidSignatureException:!0,RequestExpired:!0,RequestInTheFuture:!0,RequestTimeTooSkewed:!0,SignatureDoesNotMatch:!0},t.STILL_PROCESSING_ERROR_CODES={PriorRequestNotComplete:!0},t.THROTTLING_ERROR_CODES={BandwidthLimitExceeded:!0,ProvisionedThroughputExceededException:!0,RequestLimitExceeded:!0,RequestThrottled:!0,RequestThrottledException:!0,SlowDown:!0,ThrottledException:!0,Throttling:!0,ThrottlingException:!0,TooManyRequestsException:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(87);t.resolveRetryConfig=function(e){var t=void 0===e.maxRetries?3:e.maxRetries;return r.__assign(r.__assign({},e),{maxRetries:t,retryStrategy:e.retryStrategy||new i.ExponentialBackOffStrategy(t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(117);function o(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}t.resolveAwsAuthConfig=function(e){var t,n=this,s=o(e.credentials||e.credentialDefaultProvider(e)),a=e.signingEscapePath,u=void 0===a||a,c=e.systemClockOffset,l=void 0===c?e.systemClockOffset||0:c,f=e.sha256;return t=e.signer?o(e.signer):function(){return o(e.region)().then((function(t){return r.__awaiter(n,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=r.__read(t,2),o=n[0],a=n[1],c=o.signingRegion,l=void 0===c?e.signingRegion:c,d=o.signingService,h=void 0===d?e.signingName:d;return e.signingRegion=e.signingRegion||l||a,e.signingName=e.signingName||h,new i.SignatureV4({credentials:s,region:e.signingRegion,service:e.signingName,sha256:f,uriEscapePath:u})}))},r.__assign(r.__assign({},e),{systemClockOffset:l,signingEscapePath:u,credentials:s,signer:t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(91);t.escapeUriPath=function(e){var t,n,o=[];try{for(var s=r.__values(e.split("/")),a=s.next();!a.done;a=s.next()){var u=a.value;o.push(i.escapeUri(u))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o.join("/")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3),o=function(e){return new Date(Date.now()+e)};function s(e){return function(t){return function(n){return r.__awaiter(this,void 0,void 0,(function(){var s,a,u,c,l,f,d,h,p;return r.__generator(this,(function(g){switch(g.label){case 0:return i.HttpRequest.isInstance(n.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(n)];case 1:return a=g.sent(),[3,3];case 2:a=e.signer,g.label=3;case 3:return s=a,c=t,l=[r.__assign({},n)],f={},[4,s.sign(n.request,{signingDate:new Date(Date.now()+e.systemClockOffset)})];case 4:return[4,c.apply(void 0,[r.__assign.apply(void 0,l.concat([(f.request=g.sent(),f)]))])];case 5:return u=g.sent(),d=u.response.headers,(h=d&&(d.date||d.Date))&&(p=Date.parse(h),v=p,y=e.systemClockOffset,Math.abs(o(y).getTime()-v)>=3e5&&(e.systemClockOffset=p-Date.now())),[2,u]}var v,y}))}))}}}t.awsAuthMiddleware=s,t.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",step:"finalizeRequest",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"},t.getAwsAuthPlugin=function(e){return{applyToStack:function(n){n.addRelativeTo(s(e),t.awsAuthMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveUserAgentConfig=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3);function o(e){return function(t){return function(n){var o=n.request;if(!i.HttpRequest.isInstance(o))return t(n);var s=o.headers,a="node"===e.runtime?"user-agent":"x-amz-user-agent";return s[a]?s[a]+=" "+e.defaultUserAgent:s[a]=""+e.defaultUserAgent,e.customUserAgent&&(s[a]+=" "+e.customUserAgent),t(r.__assign(r.__assign({},n),{request:o}))}}}t.userAgentMiddleware=o,t.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},t.getUserAgentPlugin=function(e){return{applyToStack:function(n){n.add(o(e),t.getUserAgentMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(92),i=function(){function e(e){this.middlewareStack=new r.MiddlewareStack,this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e}();t.Client=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(){this.absoluteEntries=[],this.relativeEntries=[],this.entriesNameMap={}}return e.prototype.add=function(e,t){void 0===t&&(t={});var n=t.name,r=t.step,i=void 0===r?"initialize":r,o=t.tags,s=t.priority,a={name:n,step:i,tags:o,priority:void 0===s?"normal":s,middleware:e};if(n){if(Object.prototype.hasOwnProperty.call(this.entriesNameMap,n))throw new Error("Duplicated middleware name '"+n+"'");this.entriesNameMap[n]=a}this.absoluteEntries.push(a)},e.prototype.addRelativeTo=function(e,t){var n=t.step,r=void 0===n?"initialize":n,i=t.name,o=t.tags,s=t.relation,a=t.toMiddleware,u={middleware:e,step:r,name:i,tags:o,next:"before"===s?a:void 0,prev:"after"===s?a:void 0};if(i){if(Object.prototype.hasOwnProperty.call(this.entriesNameMap,i))throw new Error("Duplicated middleware name '"+i+"'");this.entriesNameMap[i]=u}this.relativeEntries.push(u)},e.prototype.sort=function(e){return e.sort((function(e,t){return o[t.step]-o[e.step]||s[t.priority||"normal"]-s[e.priority||"normal"]}))},e.prototype.clone=function(){var t,n,i=new e;return(t=i.absoluteEntries).push.apply(t,this.absoluteEntries),(n=i.relativeEntries).push.apply(n,this.relativeEntries),i.entriesNameMap=r.__assign({},this.entriesNameMap),i},e.prototype.concat=function(t){var n,i,o=new e;o.entriesNameMap=r.__assign({},this.entriesNameMap);var s=t;for(var a in s.entriesNameMap){if(o.entriesNameMap[a])throw new Error("Duplicated middleware name '"+a+"'");o.entriesNameMap[a]=s.entriesNameMap[a]}return(n=o.absoluteEntries).push.apply(n,r.__spreadArrays(this.absoluteEntries,s.absoluteEntries)),(i=o.relativeEntries).push.apply(i,r.__spreadArrays(this.relativeEntries,s.relativeEntries)),o},e.prototype.remove=function(e){return"string"==typeof e?this.removeByName(e):this.removeByReference(e)},e.prototype.removeByName=function(e){for(var t=this.absoluteEntries.length-1;t>=0;t--)if(this.absoluteEntries[t].name&&this.absoluteEntries[t].name===e)return this.absoluteEntries.splice(t,1),delete this.entriesNameMap[e],!0;for(t=this.relativeEntries.length-1;t>=0;t--)if(this.relativeEntries[t].name&&this.relativeEntries[t].name===e)return this.relativeEntries.splice(t,1),delete this.entriesNameMap[e],!0;return!1},e.prototype.removeByReference=function(e){for(var t=this.absoluteEntries.length-1;t>=0;t--){if(this.absoluteEntries[t].middleware===e)return(n=this.absoluteEntries[t].name)&&delete this.entriesNameMap[n],this.absoluteEntries.splice(t,1),!0}for(t=this.relativeEntries.length-1;t>=0;t--){var n;if(this.relativeEntries[t].middleware===e)return(n=this.relativeEntries[t].name)&&delete this.entriesNameMap[n],this.relativeEntries.splice(t,1),!0}return!1},e.prototype.removeByTag=function(e){for(var t=!1,n=this.absoluteEntries.length-1;n>=0;n--){var r=this.absoluteEntries[n],i=r.tags,o=r.name;i&&i.indexOf(e)>-1&&(this.absoluteEntries.splice(n,1),o&&delete this.entriesNameMap[o],t=!0)}for(n=this.relativeEntries.length-1;n>=0;n--){var s=this.relativeEntries[n];i=s.tags,o=s.name;i&&i.indexOf(e)>-1&&(this.relativeEntries.splice(n,1),o&&delete this.entriesNameMap[o],t=!0)}return t},e.prototype.use=function(e){e.applyToStack(this)},e.prototype.normalizeRelativeEntries=function(){for(var e=this.absoluteEntries.filter((function(e){return e.name})).reduce((function(e,t){return e[t.name]=t,e}),{}),t=this.relativeEntries.map((function(e){return r.__assign(r.__assign({},e),{priority:null,next:void 0,prev:void 0})})),n=t.filter((function(e){return e.name})).reduce((function(e,t){return e[t.name]=t,e}),{}),i={},o=0;o<this.relativeEntries.length;o++){var s=this.relativeEntries[o],a=s.prev,u=s.next,c=t[o];if(a){if(e[a]&&e[a].step===c.step)i[a]||(i[a]={}),c.next=i[a].next,i[a].next&&(i[a].next.prev=c),i[a].next=c;else if(n[a]&&n[a].step===c.step){var l=n[a];if(l.next===c)continue;c.next=l.next,l.next=c,c.next&&(c.next.prev=c),c.prev=l}}else if(u)if(e[u]&&e[u].step===c.step)i[u]||(i[u]={}),c.prev=i[u].prev,i[u].prev&&(i[u].prev.next=c),i[u].prev=c;else if(n[u]&&n[u].step===c.step){var f=n[u];if(f.prev===c)continue;c.prev=f.prev,f.prev=c,c.prev&&(c.prev.next=c),c.next=f}}for(var d=[],h=new WeakSet,p=0,g=Object.keys(i);p<g.length;p++){var v=i[g[p]];for(a=v.prev,u=v.next;a;)h.add(a),a=a.prev;for(;u;)h.add(u),u=u.next}for(o=0;o<t.length;o++){var y=t[o];if(!h.has(y))for(y.prev||d.push(y);y&&!h.has(y);)h.add(y),y=y.next}return[d,i]},e.prototype.geMiddlewareList=function(){for(var e=[],t=this.normalizeRelativeEntries(),n=t[0],i=t[1],o=r.__spreadArrays(this.absoluteEntries,n),s=0,a=o=this.sort(o);s<a.length;s++){for(var u=a[s],c={prev:void 0,next:void 0},l=u.name&&i[u.name]||c,f=l.prev,d=l.next,h=f;null==h?void 0:h.prev;)h=h.prev;for(;h;)e.push(h.middleware),h=h.next;e.push(u.middleware);for(var p=u;p.next;)e.push(p.next.middleware),p=p.next;for(h=d;h;)e.push(h.middleware),h=h.next}return e.reverse()},e.prototype.resolve=function(e,t){for(var n=0,r=this.geMiddlewareList();n<r.length;n++){e=(0,r[n])(e,t)}return e},e}();t.MiddlewareStack=i;var o={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},s={high:3,normal:2,low:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(92),i=function(){this.middlewareStack=new r.MiddlewareStack};t.Command=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isa=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"object"==typeof e&&("__type"in e&&t.indexOf(e.__type)>-1||"name"in e&&t.indexOf(e.name)>-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.StringWrapper=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,r.__spread([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n},t.StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:t.StringWrapper,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(t.StringWrapper,String);var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))},t}(t.StringWrapper);t.LazyJsonString=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedEncodeURIComponent=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.dateToUtcString=function(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),o=e.getUTCDay(),s=e.getUTCDate(),a=e.getUTCHours(),u=e.getUTCMinutes(),c=e.getUTCSeconds();return r[o]+", "+(s<10?"0"+s:""+s)+" "+i[n]+" "+t+" "+(a<10?"0"+a:""+a)+":"+(u<10?"0"+u:""+u)+":"+(c<10?"0"+c:""+c)+" GMT"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(93),i=n(96),o=n(58),s=n(176),a=n(178),u=n(66),c=function(){function e(e){s.supportsWebCrypto(u.locateWindow())?this.hash=new i.Sha256(e):a.isMsWindow(u.locateWindow())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromUtf8=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)},t.toUtf8=function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromUtf8=function(e){return(new TextEncoder).encode(e)},t.toUtf8=function(e){return new TextDecoder("utf-8").decode(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(97),o=n(175),s=n(7),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=u(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(u(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function u(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],f=0;f<r.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(255&e[4*f])<<24|(255&e[4*f+1])<<16|(255&e[4*f+2])<<8|255&e[4*f+3];else{var d=this.temp[f-2],h=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,p=((d=this.temp[f-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[f]=(h+this.temp[f-7]|0)+(p+this.temp[f-16]|0)}var g=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[f]+this.temp[f]|0)|0)|0,v=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+g|0,s=o,o=i,i=n,n=g+v|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(177),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&i.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&s(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!s(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(179),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map((function(e){return i[e]})).concat(n).every((function(e){return"function"==typeof e}))}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3),o=n(181),s=n(55),a=function(){function e(e){void 0===e&&(e={}),this.httpOptions=e}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=this,a=null==t?void 0:t.abortSignal,u=this.httpOptions.requestTimeout;if(null==a?void 0:a.aborted){var c=new Error("Request aborted");return c.name="AbortError",Promise.reject(c)}var l=e.path;if(e.query){var f=s.buildQueryString(e.query);f&&(l+="?"+f)}var d=e.port,h=e.protocol+"//"+e.hostname+(d?":"+d:"")+l,p={body:e.body,headers:new Headers(e.headers),method:e.method,mode:"cors"};"undefined"!=typeof AbortController&&(p.signal=a);var g=new Request(h,p),v=[fetch(g).then((function(e){var t,o,s=e.headers,a={};try{for(var u=r.__values(s.entries()),c=u.next();!c.done;c=u.next()){var l=c.value;a[l[0]]=l[1]}}catch(e){t={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(t)throw t.error}}return n.httpOptions.bufferBody?e.blob().then((function(t){return{response:new i.HttpResponse({headers:a,statusCode:e.status,body:t})}})):{response:new i.HttpResponse({headers:a,statusCode:e.status,body:e.body})}})),o.requestTimeout(u)];return a&&v.push(new Promise((function(e,t){a.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(v)},e}();t.FetchHttpHandler=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTimeout=function(e){return void 0===e&&(e=0),new Promise((function(t,n){e&&setTimeout((function(){var t=new Error("Request did not complete within "+e+" ms");t.name="TimeoutError",n(t)}),e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(99);t.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){var t,n,o=Promise.reject(new i.ProviderError("No providers in chain")),s=function(e){o=o.catch((function(t){if(null==t?void 0:t.tryNextLink)return e();throw t}))};try{for(var a=r.__values(e),u=a.next();!u.done;u=a.next()){s(u.value)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromStatic=function(e){var t=Promise.resolve(e);return function(){return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e,t,n){if(void 0===t){var r=e();return function(){return r}}var i=e(),o=!1;return function(){return o?i:i.then((function(r){return n&&!n(r)?(o=!0,r):t(r)?i=e():r}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(100),i=n(101);t.deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},t.serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]},t.getSerdePlugin=function(e,n,o){return{applyToStack:s=>{s.add(r.deserializerMiddleware(e,o),t.deserializerMiddlewareOption),s.add(i.serializerMiddleware(e,n),t.serializerMiddlewareOption)}}}},function(e,t,n){var r,i,o=n(102),s=n(103),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,v=p-a+(g-u)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||p>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=g,i=d;var y=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;l[c++]=y>>>24&255,l[c++]=y>>>16&255,l[c++]=y>>>8&255,l[c++]=255&y;var m=p/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=d>>>8|128,l[c++]=255&d;for(var _=0;_<6;++_)l[c+_]=f[_];return t||s(l)}},function(e,t,n){var r=n(102),i=n(103);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(189),i=n(190),o=n(105),s=function(){function e(e,t){this.headerMarshaller=new r.HeaderMarshaller(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,s=new Uint8Array(i),a=new DataView(s.buffer,s.byteOffset,s.byteLength),u=new o.Crc32;return a.setUint32(0,i,!1),a.setUint32(4,r.byteLength,!1),a.setUint32(8,u.update(s.subarray(0,8)).digest(),!1),s.set(r,12),s.set(n,r.byteLength+12),a.setUint32(i-4,u.update(s.subarray(8,i-4)).digest(),!1),s},e.prototype.unmarshall=function(e){var t=i.splitMessage(e),n=t.headers,r=t.body;return{headers:this.headerMarshaller.parse(n),body:r}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();t.EventStreamMarshaller=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(33),o=n(104),s=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,i,o,s=[];try{for(var a=r.__values(Object.keys(e)),u=a.next();!u.done;u=a.next()){var c=u.value,l=this.fromUtf8(c);s.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(e[c]))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var f=new Uint8Array(s.reduce((function(e,t){return e+t.byteLength}),0)),d=0;try{for(var h=r.__values(s),p=h.next();!p.done;p=h.next()){var g=p.value;f.set(g,d),d+=g.byteLength}}catch(e){i={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return f},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);var a=new Uint8Array(s.buffer);return a.set(e.value,3),a;case"string":var u=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+u.byteLength));c.setUint8(0,7),c.setUint16(1,u.byteLength,!1);var l=new Uint8Array(c.buffer);return l.set(u,3),l;case"timestamp":var f=new Uint8Array(9);return f[0]=8,f.set(o.Int64.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!v.test(e.value))throw new Error("Invalid UUID received: "+e.value);var d=new Uint8Array(17);return d[0]=9,d.set(i.fromHex(e.value.replace(/\-/g,"")),1),d}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),s=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[s]={type:a,value:!0};break;case 1:t[s]={type:a,value:!1};break;case 2:t[s]={type:u,value:e.getInt8(n++)};break;case 3:t[s]={type:c,value:e.getInt16(n,!1)},n+=2;break;case 4:t[s]={type:l,value:e.getInt32(n,!1)},n+=4;break;case 5:t[s]={type:f,value:new o.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var v=e.getUint16(n,!1);n+=2,t[s]={type:d,value:new Uint8Array(e.buffer,e.byteOffset+n,v)},n+=v;break;case 7:var y=e.getUint16(n,!1);n+=2,t[s]={type:h,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,y))},n+=y;break;case 8:t[s]={type:p,value:new Date(new o.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var m=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[s]={type:g,value:i.toHex(m.subarray(0,4))+"-"+i.toHex(m.subarray(4,6))+"-"+i.toHex(m.subarray(6,8))+"-"+i.toHex(m.subarray(8,10))+"-"+i.toHex(m.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();t.HeaderMarshaller=s;var a="boolean",u="byte",c="short",l="integer",f="long",d="binary",h="string",p="timestamp",g="uuid",v=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(105);t.splitMessage=function(e){var t=e.byteLength,n=e.byteOffset,i=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=new DataView(i,n,t),s=o.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");var a=o.getUint32(4,!1),u=o.getUint32(8,!1),c=o.getUint32(t-4,!1),l=(new r.Crc32).update(new Uint8Array(i,n,8));if(u!==l.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+l.digest()+")");if(l.update(new Uint8Array(i,n+8,t-12)),c!==l.digest())throw new Error("The message checksum ("+l.digest()+") did not match the expected value of "+c);return{headers:new DataView(i,n+8+4,a),body:new Uint8Array(i,n+8+4+a,s-a-16)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD",t.SHA256_HEADER="X-Amz-Content-Sha256",t.ALGORITHM_QUERY_PARAM="X-Amz-Algorithm",t.CREDENTIAL_QUERY_PARAM="X-Amz-Credential",t.AMZ_DATE_QUERY_PARAM="X-Amz-Date",t.SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders",t.EXPIRES_QUERY_PARAM="X-Amz-Expires",t.HOST_HEADER="host",t.ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(107),o=n(3);function s(e){var t=this;return function(n){return function(s){return r.__awaiter(t,void 0,void 0,(function(){var t,a,u,c,l,f;return r.__generator(this,(function(d){return t=s.input.Bucket,a=e.bucketEndpoint,u=s.request,o.HttpRequest.isInstance(u)&&(e.bucketEndpoint?u.hostname=t:(c=i.bucketHostname({bucketName:t,baseHostname:u.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===u.protocol}),l=c.hostname,f=c.bucketEndpoint,u.hostname=l,a=f),a&&(u.path=u.path.replace(/^(\/)?[^\/]+/,""),""===u.path&&(u.path="/"))),[2,n(r.__assign(r.__assign({},s),{request:u}))]}))}))}}}t.bucketEndpointMiddleware=s,t.bucketEndpointMiddlewareOptions={step:"build",tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"},t.getBucketEndpointPlugin=function(e){return{applyToStack:function(n){n.addRelativeTo(s(e),t.bucketEndpointMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.resolveBucketEndpointConfig=function(e){var t=e.bucketEndpoint,n=void 0!==t&&t,i=e.forcePathStyle,o=void 0!==i&&i,s=e.useAccelerateEndpoint,a=void 0!==s&&s,u=e.useDualstackEndpoint,c=void 0!==u&&u;return r.__assign(r.__assign({},e),{bucketEndpoint:n,forcePathStyle:o,useAccelerateEndpoint:a,useDualstackEndpoint:c})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(195),i=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}return e.prototype.withName=function(e){return this.name=e,this},e.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},e.prototype.addChildNode=function(e){return this.children.push(e),this},e.prototype.removeAttribute=function(e){return delete this.attributes[e],this},e.prototype.toString=function(){for(var e=Boolean(this.children.length),t="<"+this.name,n=this.attributes,i=0,o=Object.keys(n);i<o.length;i++){var s=o[i],a=n[s];null!=a&&(t+=" "+s+'="'+r.escapeAttribute(""+a)+'"')}return t+(e?">"+this.children.map((function(e){return e.toString()})).join("")+"</"+this.name+">":"/>")},e}();t.XmlNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeAttribute=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(197),i=function(){function e(e){this.value=e}return e.prototype.toString=function(){return r.escapeElement(""+this.value)},e}();t.XmlText=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeElement=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(e,t,n){"use strict";const r=n(36),i=function(e,t){const n={};if(!(e.child&&!r.isEmptyObject(e.child)||e.attrsMap&&!r.isEmptyObject(e.attrsMap)))return r.isExist(e.val)?e.val:"";r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&("strict"===t.arrayMode?n[t.textNodeName]=[e.val]:n[t.textNodeName]=e.val),r.merge(n,e.attrsMap,t.arrayMode);const o=Object.keys(e.child);for(let r=0;r<o.length;r++){var s=o[r];if(e.child[s]&&e.child[s].length>1)for(var a in n[s]=[],e.child[s])n[s].push(i(e.child[s][a],t));else if(!0===t.arrayMode){const r=i(e.child[s][0],t);n[s]="object"==typeof r?[r]:r}else"strict"===t.arrayMode?n[s]=[i(e.child[s][0],t)]:n[s]=i(e.child[s][0],t)}return n};t.convertToJson=i},function(e,t,n){"use strict";e.exports=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}},function(e,t,n){"use strict";const r=n(36),i={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function s(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return d("InvalidXml","XML declaration allowed only at the start of the document.",p(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function a(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}t.validate=function(e,t){t=r.buildOptions(t,i,o);const n=[];let c=!1,h=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++){if("<"!==e[i]){if(" "===e[i]||"\t"===e[i]||"\n"===e[i]||"\r"===e[i])continue;return d("InvalidChar",`char '${e[i]}' is not expected.`,p(e,i))}if(i++,"?"===e[i]){if(i=s(e,++i),i.err)return i}else{if("!"===e[i]){i=a(e,i);continue}{let o=!1;"/"===e[i]&&(o=!0,i++);let s="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)s+=e[i];if(s=s.trim(),"/"===s[s.length-1]&&(s=s.substring(0,s.length-1),i--),g=s,!r.isName(g)){let t;return t=0===s.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":`Tag '${s}' is an invalid name.`,d("InvalidTag",t,p(e,i))}const v=u(e,i);if(!1===v)return d("InvalidAttr",`Attributes for '${s}' have open quote.`,p(e,i));let y=v.value;if(i=v.index,"/"===y[y.length-1]){y=y.substring(0,y.length-1);const n=l(y,t);if(!0!==n)return d(n.err.code,n.err.msg,p(e,i-y.length+n.err.line));c=!0}else if(o){if(!v.tagClosed)return d("InvalidTag",`Closing tag '${s}' doesn't have proper closing.`,p(e,i));if(y.trim().length>0)return d("InvalidTag",`Closing tag '${s}' can't have attributes or invalid starting.`,p(e,i));{const t=n.pop();if(s!==t)return d("InvalidTag",`Closing tag '${t}' is expected inplace of '${s}'.`,p(e,i));0==n.length&&(h=!0)}}else{const r=l(y,t);if(!0!==r)return d(r.err.code,r.err.msg,p(e,i-y.length+r.err.line));if(!0===h)return d("InvalidXml","Multiple possible root nodes found.",p(e,i));n.push(s),c=!0}for(i++;i<e.length;i++){if("<"===e[i]){if("!"===e[i+1]){i++,i=a(e,i);continue}break}if("&"===e[i]){const t=f(e,i);if(-1==t)return d("InvalidChar","char '&' is not expected.",p(e,i));i=t}}"<"===e[i]&&i--}}}var g;return c?!(n.length>0)||d("InvalidXml",`Invalid '${JSON.stringify(n,null,4).replace(/\r?\n/g,"")}' found.`,1):d("InvalidXml","Start tag expected.",1)};function u(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function l(e,t){const n=r.getAllMatches(e,c),i={};for(let r=0;r<n.length;r++){if(0===n[r][1].length)return d("InvalidAttr",`Attribute '${n[r][2]}' has no space in starting.`,g(e,n[r][0]));if(void 0===n[r][3]&&!t.allowBooleanAttributes)return d("InvalidAttr",`boolean attribute '${n[r][2]}' is not allowed.`,g(e,n[r][0]));const o=n[r][2];if(!h(o))return d("InvalidAttr",`Attribute '${o}' is an invalid name.`,g(e,n[r][0]));if(i.hasOwnProperty(o))return d("InvalidAttr",`Attribute '${o}' is repeated.`,g(e,n[r][0]));i[o]=1}return!0}function f(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function d(e,t,n){return{err:{code:e,msg:t,line:n}}}function h(e){return r.isName(e)}function p(e,t){return e.substring(0,t).split(/\r?\n/).length}function g(e,t){return e.indexOf(t)+t.length}},function(e,t,n){"use strict";const r=function(e){return String.fromCharCode(e)},i={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],s=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?a(e[0].val,t):a(e,t);{const o=void 0===(r=e)?i.missingChar:null===r?i.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||i.emptyChar;if(!0===o){let r="";if(Array.isArray(t)){r+=i.arrStart;const o=t[0],c=e.length;if("string"==typeof o)for(let t=0;t<c;t++){const n=a(e[t].val,o);r=u(r,n)}else for(let t=0;t<c;t++){const i=s(e[t],o,n);r=u(r,i)}r+=i.arrayEnd}else{r+=i.objStart;const o=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let i in o){const a=o[i];let c;c=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?s(e.attrsMap[a],t[a],n):a===n.textNodeName?s(e.val,t[a],n):s(e.child[a],t[a],n),r=u(r,c)}}return r}return o}var r},a=function(e){switch(e){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return e}},u=function(e,t){return c(t[0])||c(e[e.length-1])||(e+=i.boundryChar),e+t},c=function(e){return-1!==o.indexOf(e)};const l=n(53),f=n(36).buildOptions;t.convert2nimn=function(e,t,n){return n=f(n,l.defaultOptions,l.props),s(e,t,n)}},function(e,t,n){"use strict";const r=n(36),i=n(36).buildOptions,o=n(53),s=function(e,t,n){let i="{";const o=Object.keys(e.child);for(let n=0;n<o.length;n++){var a=o[n];if(e.child[a]&&e.child[a].length>1){for(var u in i+='"'+a+'" : [ ',e.child[a])i+=s(e.child[a][u],t)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+a+'" : '+s(e.child[a][0],t)+" ,"}return r.merge(i,e.attrsMap),r.isEmptyObject(i)?r.isExist(e.val)?e.val:"":(r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(i+='"'+t.textNodeName+'" : '+(!0!==(c=e.val)&&!1!==c&&isNaN(c)?'"'+c+'"':c)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var c};t.convertToJsonString=function(e,t){return(t=i(t,o.defaultOptions,o.props)).indentBy=t.indentBy||"",s(e,t,0)}},function(e,t,n){"use strict";const r=n(36).buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function s(e){this.options=r(e,i,o),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p),this.options.cdataTagName?this.isCDATA=g:this.isCDATA=function(){return!1},this.replaceCDATAstr=a,this.replaceCDATAarr=u,this.options.format?(this.indentate=h,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=d,this.buildObjNode=l):(this.buildTextNode=f,this.buildObjNode=c),this.buildTextValNode=f,this.buildObjectNode=c}function a(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function u(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function c(e,t,n,r){return n&&!e.includes("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function l(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function f(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function d(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function h(e){return this.options.indentBy.repeat(e)}function p(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function g(e){return e===this.options.cdataTagName}s.prototype.parse=function(e){return this.j2x(e,0).val},s.prototype.j2x=function(e,t){let n="",r="";const i=Object.keys(e),o=i.length;for(let s=0;s<o;s++){const o=i[s];if(void 0===e[o]);else if(null===e[o])r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)r+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[o])):r+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAarr("",e[o]);else{const n=e[o].length;for(let i=0;i<n;i++){const n=e[o][i];if(void 0===n);else if(null===n)r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof n){const e=this.j2x(n,t+1);r+=this.buildObjNode(e.val,o,e.attrStr,t)}else r+=this.buildTextNode(n,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),r=t.length;for(let i=0;i<r;i++)n+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const n=this.j2x(e[o],t+1);r+=this.buildObjNode(n.val,o,n.attrStr,t)}}return{attrStr:n,val:r}},e.exports=s},function(e,t,n){"use strict";var r=n(30),i=n(108),o=n(205),s=n(114);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var u=a(n(111));u.Axios=o,u.create=function(e){return a(s(u.defaults,e))},u.Cancel=n(115),u.CancelToken=n(218),u.isCancel=n(110),u.all=function(e){return Promise.all(e)},u.spread=n(219),e.exports=u,e.exports.default=u},function(e,t,n){"use strict";var r=n(30),i=n(109),o=n(206),s=n(207),a=n(114);function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=u},function(e,t,n){"use strict";var r=n(30);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(30),i=n(208),o=n(110),s=n(111);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(30);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(30);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(113);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(213),i=n(214);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(30),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(30);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(30);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(115);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(){var e=this;return function(t){return function(n){return r.__awaiter(e,void 0,void 0,(function(){var e,i;return r.__generator(this,(function(o){if("string"==typeof(e=n.input).Bucket&&e.Bucket.indexOf("/")>=0)throw(i=new Error("Bucket name shouldn't contain '/', received '"+e.Bucket+"'")).name="InvalidBucketName",i;return[2,t(r.__assign({},n))]}))}))}}}t.validateBucketNameMiddleware=i,t.validateBucketNameMiddlewareOptions={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},t.getValidateBucketNamePlugin=function(e){return{applyToStack:function(e){e.add(i(),t.validateBucketNameMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blobReader=function(e,t,n){return void 0===n&&(n=1048576),new Promise((function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var s=e.size,a=0;function u(){a>=s?r():o.readAsArrayBuffer(e.slice(a,Math.min(s,a+n)))}o.addEventListener("load",(function(e){var n=e.target.result;t(new Uint8Array(n)),a+=n.byteLength,u()})),u()}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=16,t.INIT=[1732584193,4023233417,2562383102,271733878]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var s=function(){return"function"==typeof Symbol},a=function(e){return s()&&Boolean(Symbol[e])},u=function(e){return a(e)?Symbol[e]:"@@"+e};s()&&!a("observable")&&(Symbol.observable=Symbol("observable"));var c=u("iterator"),l=u("observable"),f=u("species");function d(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function h(e){var t=e.constructor;return void 0!==t&&null===(t=t[f])&&(t=void 0),void 0!==t?t:E}function p(e){return e instanceof E}function g(e){g.log?g.log(e):setTimeout((function(){throw e}))}function v(e){Promise.resolve().then((function(){try{e()}catch(e){g(e)}}))}function y(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=d(t,"unsubscribe");n&&n.call(t)}}catch(e){g(e)}}function m(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function _(e,t,n){e._state="running";var r=e._observer;try{var i=d(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(m(e),!i)throw n;i.call(r,n);break;case"complete":m(e),i&&i.call(r)}}catch(e){g(e)}"closed"===e._state?y(e):"running"===e._state&&(e._state="ready")}function b(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void v((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(_(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void _(e,t,n);e._queue.push({type:t,value:n})}}var w=function(){function e(t,n){r(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new S(this);try{this._cleanup=n.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return o(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(m(this),y(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),S=function(){function e(t){r(this,e),this._subscription=t}return o(e,[{key:"next",value:function(e){b(this._subscription,"next",e)}},{key:"error",value:function(e){b(this._subscription,"error",e)}},{key:"complete",value:function(){b(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),E=function(){function e(t){if(r(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return o(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new w(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=h(this),r=arguments.length>1,i=!1,o=arguments[1],s=o;return new n((function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{s=e(s,t)}catch(e){return n.error(e)}else s=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=h(this);return new i((function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=h(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),s()}});i.push(o)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:l,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=d(t,l);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return p(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(a("iterator")&&(r=d(t,c)))return new n((function(e){v((function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;if(e.next(u),e.closed)return}}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){v((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="function"==typeof this?this:e;return new i((function(e){v((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:f,get:function(){return this}}]),e}();t.Observable=E,s()&&Object.defineProperty(E,Symbol("extensions"),{value:{symbol:l,hostReportError:g},configurable:!0})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(32),i=n(17),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u=new r.a("Predictions"),c=new(function(){function e(e){this._options=e,this._convertPluggables=[],this._identifyPluggables=[],this._interpretPluggables=[],i.a.register(this)}return e.prototype.getModuleName=function(){return"Predictions"},e.prototype.addPluggable=function(e){if(this.getPluggable(e.getProviderName()))throw new Error("Pluggable with name "+e.getProviderName()+" has already been added.");var t=!1;this.implementsConvertPluggable(e)&&(this._convertPluggables.push(e),t=!0),this.implementsIdentifyPluggable(e)&&(this._identifyPluggables.push(e),t=!0),this.implementsInterpretPluggable(e)&&(this._interpretPluggables.push(e),t=!0),t&&this.configurePluggable(e)},e.prototype.getPluggable=function(e){var t=this.getAllProviders().find((function(t){return t.getProviderName()===e}));return void 0===t?(u.debug("No plugin found with providerName=>",e),null):t},e.prototype.removePluggable=function(e){this._convertPluggables=this._convertPluggables.filter((function(t){return t.getProviderName()!==e})),this._identifyPluggables=this._identifyPluggables.filter((function(t){return t.getProviderName()!==e})),this._interpretPluggables=this._interpretPluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this,n=e?e.predictions||e:{};n=o(o({},n),e),this._options=Object.assign({},this._options,n),u.debug("configure Predictions",this._options),this.getAllProviders().forEach((function(e){return t.configurePluggable(e)}))},e.prototype.interpret=function(e,t){return this.getPluggableToExecute(this._interpretPluggables,t).interpret(e)},e.prototype.convert=function(e,t){return this.getPluggableToExecute(this._convertPluggables,t).convert(e)},e.prototype.identify=function(e,t){return this.getPluggableToExecute(this._identifyPluggables,t).identify(e)},e.prototype.getPluggableToExecute=function(e,t){if(t&&t.providerName)return a(e).find((function(e){return e.getProviderName()===t.providerName}));if(1===e.length)return e[0];throw new Error("More than one or no providers are configured, Either specify a provider name or configure exactly one provider")},e.prototype.getAllProviders=function(){return a(this._convertPluggables,this._identifyPluggables,this._interpretPluggables)},e.prototype.configurePluggable=function(e){var t=Object.assign({},this._options.predictions,this._options[e.getCategory().toLowerCase()]);e.configure(t)},e.prototype.implementsConvertPluggable=function(e){return e&&"function"==typeof e.convert},e.prototype.implementsIdentifyPluggable=function(e){return e&&"function"==typeof e.identify},e.prototype.implementsInterpretPluggable=function(e){return e&&"function"==typeof e.interpret},e}())({})},function(e,t,n){"use strict";n.d(t,"b",(function(){return Ge})),n.d(t,"a",(function(){return $e}));var r=n(51),i={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},o={};function s(e){return Boolean(e&&"string"==typeof e.kind)}function a(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}function u(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,r=void 0,u=Array.isArray(e),c=[e],l=-1,f=[],d=void 0,h=void 0,p=void 0,g=[],v=[],y=e;do{var m=++l===c.length,_=m&&0!==f.length;if(m){if(h=0===v.length?void 0:g[g.length-1],d=p,p=v.pop(),_){if(u)d=d.slice();else{var b={};for(var w in d)d.hasOwnProperty(w)&&(b[w]=d[w]);d=b}for(var S=0,E=0;E<f.length;E++){var O=f[E][0],A=f[E][1];u&&(O-=S),u&&null===A?(d.splice(O,1),S++):d[O]=A}}l=r.index,c=r.keys,f=r.edits,u=r.inArray,r=r.prev}else{if(h=p?u?l:c[l]:void 0,null==(d=p?p[h]:y))continue;p&&g.push(h)}var I=void 0;if(!Array.isArray(d)){if(!s(d))throw new Error("Invalid AST Node: "+JSON.stringify(d));var C=a(t,d.kind,m);if(C){if((I=C.call(t,d,h,p,g,v))===o)break;if(!1===I){if(!m){g.pop();continue}}else if(void 0!==I&&(f.push([h,I]),!m)){if(!s(I)){g.pop();continue}d=I}}}void 0===I&&_&&f.push([h,d]),m?g.pop():(r={inArray:u,index:l,keys:c,edits:f,prev:r},c=(u=Array.isArray(d))?d:n[d.kind]||[],l=-1,f=[],p&&v.push(p),p=d)}while(void 0!==r);return 0!==f.length&&(y=f[f.length-1][1]),y}(e,{leave:c})}var c={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return f(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=h("(",f(e.variableDefinitions,", "),")"),i=f(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?f([t,f([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+h(" = ",r)+h(" ",f(i," "))},SelectionSet:function(e){return d(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet;return f([h("",t,": ")+n+h("(",f(r,", "),")"),f(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+h(" ",f(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return f(["...",h("on ",t),f(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(h("(",f(r,", "),")")," ")+"on ".concat(n," ").concat(h("",f(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e,t){var n=e.replace(/"""/g,'\\"""');return" "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(t?n:p(n),'\n"""'):'"""'.concat(n.replace(/"$/,'"\n'),'"""')}(n,"description"===t):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+f(e.values,", ")+"]"},ObjectValue:function(e){return"{"+f(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+h("(",f(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return f(["schema",f(t," "),d(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:l((function(e){return f(["scalar",e.name,f(e.directives," ")]," ")})),ObjectTypeDefinition:l((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return f(["type",t,h("implements ",f(n," & ")),f(r," "),d(i)]," ")})),FieldDefinition:l((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(n.every((function(e){return-1===e.indexOf("\n")}))?h("(",f(n,", "),")"):h("(\n",p(f(n,"\n")),"\n)"))+": "+r+h(" ",f(i," "))})),InputValueDefinition:l((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return f([t+": "+n,h("= ",r),f(i," ")]," ")})),InterfaceTypeDefinition:l((function(e){var t=e.name,n=e.directives,r=e.fields;return f(["interface",t,f(n," "),d(r)]," ")})),UnionTypeDefinition:l((function(e){var t=e.name,n=e.directives,r=e.types;return f(["union",t,f(n," "),r&&0!==r.length?"= "+f(r," | "):""]," ")})),EnumTypeDefinition:l((function(e){var t=e.name,n=e.directives,r=e.values;return f(["enum",t,f(n," "),d(r)]," ")})),EnumValueDefinition:l((function(e){return f([e.name,f(e.directives," ")]," ")})),InputObjectTypeDefinition:l((function(e){var t=e.name,n=e.directives,r=e.fields;return f(["input",t,f(n," "),d(r)]," ")})),DirectiveDefinition:l((function(e){var t=e.name,n=e.arguments,r=e.locations;return"directive @"+t+(n.every((function(e){return-1===e.indexOf("\n")}))?h("(",f(n,", "),")"):h("(\n",p(f(n,"\n")),"\n)"))+" on "+f(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return f(["extend schema",f(t," "),d(n)]," ")},ScalarTypeExtension:function(e){return f(["extend scalar",e.name,f(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return f(["extend type",t,h("implements ",f(n," & ")),f(r," "),d(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return f(["extend interface",t,f(n," "),d(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return f(["extend union",t,f(n," "),r&&0!==r.length?"= "+f(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return f(["extend enum",t,f(n," "),d(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return f(["extend input",t,f(n," "),d(r)]," ")}};function l(e){return function(t){return f([t.description,e(t)],"\n")}}function f(e,t){return e?e.filter((function(e){return e})).join(t||""):""}function d(e){return e&&0!==e.length?"{\n"+p(f(e,"\n"))+"\n}":""}function h(e,t,n){return t?e+t+(n||""):""}function p(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return e&&"object"===g(e)?"function"==typeof e.inspect?e.inspect():Array.isArray(e)?"["+e.map(v).join(", ")+"]":"{"+Object.keys(e).map((function(t){return"".concat(t,": ").concat(v(e[t]))})).join(", ")+"}":"string"==typeof e?'"'+e+'"':"function"==typeof e?"[function ".concat(e.name,"]"):String(e)}function y(e,t){if(!e)throw new Error(t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _,b=function(e,t,n){m(this,"body",void 0),m(this,"name",void 0),m(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},this.locationOffset.line>0||y(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||y(0,"column in locationOffset is 1-indexed and must be positive")};function w(e,t,n){return new r.a("Syntax Error: ".concat(n),void 0,e,[t])}function S(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=E(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;t.length>0&&O(t[0]);)t.shift();for(;t.length>0&&O(t[t.length-1]);)t.pop();return t.join("\n")}function E(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function O(e){return E(e)===e.length}function A(e,t){var n=new j(P.SOF,0,0,0,0,null);return{source:e,options:t,lastToken:n,token:n,line:1,lineStart:0,advance:I,lookahead:C}}function I(){return this.lastToken=this.token,this.token=this.lookahead()}function C(){var e=this.token;if(e.kind!==P.EOF)do{e=e.next||(e.next=R(this,e))}while(e.kind===P.COMMENT);return e}_=b,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var P=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function T(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var x=String.prototype.charCodeAt,k=String.prototype.slice;function j(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function N(e){return isNaN(e)?P.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function R(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){var r=e.length,i=t;for(;i<r;){var o=x.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===x.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(o>=i)return new j(P.EOF,i,i,s,a,t);var u=x.call(r,o);switch(u){case 33:return new j(P.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do{o=x.call(s,++a)}while(null!==o&&(o>31||9===o));return new j(P.COMMENT,t,a,n,r,i,k.call(s,t+1,a))}(n,o,s,a,t);case 36:return new j(P.DOLLAR,o,o+1,s,a,t);case 38:return new j(P.AMP,o,o+1,s,a,t);case 40:return new j(P.PAREN_L,o,o+1,s,a,t);case 41:return new j(P.PAREN_R,o,o+1,s,a,t);case 46:if(46===x.call(r,o+1)&&46===x.call(r,o+2))return new j(P.SPREAD,o,o+3,s,a,t);break;case 58:return new j(P.COLON,o,o+1,s,a,t);case 61:return new j(P.EQUALS,o,o+1,s,a,t);case 64:return new j(P.AT,o,o+1,s,a,t);case 91:return new j(P.BRACKET_L,o,o+1,s,a,t);case 93:return new j(P.BRACKET_R,o,o+1,s,a,t);case 123:return new j(P.BRACE_L,o,o+1,s,a,t);case 124:return new j(P.PIPE,o,o+1,s,a,t);case 125:return new j(P.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var o=e.body,s=o.length,a=t+1,u=0;for(;a!==s&&null!==(u=x.call(o,a))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++a;return new j(P.NAME,t,a,n,r,i,k.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,c=!1;45===a&&(a=x.call(s,++u));if(48===a){if((a=x.call(s,++u))>=48&&a<=57)throw w(e,u,"Invalid number, unexpected digit after 0: ".concat(N(a),"."))}else u=M(e,u,a),a=x.call(s,u);46===a&&(c=!0,a=x.call(s,++u),u=M(e,u,a),a=x.call(s,u));69!==a&&101!==a||(c=!0,43!==(a=x.call(s,++u))&&45!==a||(a=x.call(s,++u)),u=M(e,u,a));return new j(c?P.FLOAT:P.INT,t,u,r,i,o,k.call(s,t,u))}(n,o,u,s,a,t);case 34:return 34===x.call(r,o+1)&&34===x.call(r,o+2)?function(e,t,n,r,i){var o=e.body,s=t+3,a=s,u=0,c="";for(;s<o.length&&null!==(u=x.call(o,s));){if(34===u&&34===x.call(o,s+1)&&34===x.call(o,s+2))return c+=k.call(o,a,s),new j(P.BLOCK_STRING,t,s+3,n,r,i,S(c));if(u<32&&9!==u&&10!==u&&13!==u)throw w(e,s,"Invalid character within String: ".concat(N(u),"."));92===u&&34===x.call(o,s+1)&&34===x.call(o,s+2)&&34===x.call(o,s+3)?(c+=k.call(o,a,s)+'"""',a=s+=4):++s}throw w(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){var o=e.body,s=t+1,a=s,u=0,c="";for(;s<o.length&&null!==(u=x.call(o,s))&&10!==u&&13!==u;){if(34===u)return c+=k.call(o,a,s),new j(P.STRING,t,s+1,n,r,i,c);if(u<32&&9!==u)throw w(e,s,"Invalid character within String: ".concat(N(u),"."));if(++s,92===u){switch(c+=k.call(o,a,s-1),u=x.call(o,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=(f=x.call(o,s+1),d=x.call(o,s+2),h=x.call(o,s+3),p=x.call(o,s+4),U(f)<<12|U(d)<<8|U(h)<<4|U(p));if(l<0)throw w(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw w(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}++s,a=s}}var f,d,h,p;throw w(e,s,"Unterminated string.")}(n,o,s,a,t)}throw w(n,o,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(N(e),".");if(39===e)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";return"Cannot parse the unexpected character ".concat(N(e),".")}(u))}function M(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=x.call(r,++i)}while(o>=48&&o<=57);return i}throw w(e,i,"Invalid number, expected digit but got: ".concat(N(o),"."))}function U(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}j.prototype.toJSON=j.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var D=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),L=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function B(e,t){var n="string"==typeof e?new b(e):e;if(!(n instanceof b))throw new TypeError("Must provide Source. Received: ".concat(v(n)));return function(e){var t=e.token;return{kind:D.DOCUMENT,definitions:ke(e,P.SOF,F,P.EOF),loc:Ee(e,t)}}(A(n,t||{}))}function z(e){var t=Ce(e,P.NAME);return{kind:D.NAME,value:t.value,loc:Ee(e,t)}}function F(e){if(Ae(e,P.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return q(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return ce(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===P.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Pe(e,"extend"),Pe(e,"schema");var n=oe(e,!0),r=Ae(e,P.BRACE_L)?ke(e,P.BRACE_L,de,P.BRACE_R):[];if(0===n.length&&0===r.length)throw Te(e);return{kind:D.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:Ee(e,t)}}(e);case"scalar":return function(e){var t=e.token;Pe(e,"extend"),Pe(e,"scalar");var n=z(e),r=oe(e,!0);if(0===r.length)throw Te(e);return{kind:D.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:Ee(e,t)}}(e);case"type":return function(e){var t=e.token;Pe(e,"extend"),Pe(e,"type");var n=z(e),r=he(e),i=oe(e,!0),o=pe(e);if(0===r.length&&0===i.length&&0===o.length)throw Te(e);return{kind:D.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:Ee(e,t)}}(e);case"interface":return function(e){var t=e.token;Pe(e,"extend"),Pe(e,"interface");var n=z(e),r=oe(e,!0),i=pe(e);if(0===r.length&&0===i.length)throw Te(e);return{kind:D.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:Ee(e,t)}}(e);case"union":return function(e){var t=e.token;Pe(e,"extend"),Pe(e,"union");var n=z(e),r=oe(e,!0),i=me(e);if(0===r.length&&0===i.length)throw Te(e);return{kind:D.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:Ee(e,t)}}(e);case"enum":return function(e){var t=e.token;Pe(e,"extend"),Pe(e,"enum");var n=z(e),r=oe(e,!0),i=_e(e);if(0===r.length&&0===i.length)throw Te(e);return{kind:D.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:Ee(e,t)}}(e);case"input":return function(e){var t=e.token;Pe(e,"extend"),Pe(e,"input");var n=z(e),r=oe(e,!0),i=we(e);if(0===r.length&&0===i.length)throw Te(e);return{kind:D.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:Ee(e,t)}}(e)}throw Te(e,t)}(e)}else{if(Ae(e,P.BRACE_L))return q(e);if(le(e))return ce(e)}throw Te(e)}function q(e){if(Ae(e,P.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return K(e);case"fragment":return function(e){var t=e.token;if(Pe(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:D.FRAGMENT_DEFINITION,name:Z(e),variableDefinitions:V(e),typeCondition:(Pe(e,"on"),ue(e)),directives:oe(e,!1),selectionSet:W(e),loc:Ee(e,t)};return{kind:D.FRAGMENT_DEFINITION,name:Z(e),typeCondition:(Pe(e,"on"),ue(e)),directives:oe(e,!1),selectionSet:W(e),loc:Ee(e,t)}}(e)}else if(Ae(e,P.BRACE_L))return K(e);throw Te(e)}function K(e){var t=e.token;if(Ae(e,P.BRACE_L))return{kind:D.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:W(e),loc:Ee(e,t)};var n,r=H(e);return Ae(e,P.NAME)&&(n=z(e)),{kind:D.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:V(e),directives:oe(e,!1),selectionSet:W(e),loc:Ee(e,t)}}function H(e){var t=Ce(e,P.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw Te(e,t)}function V(e){return Ae(e,P.PAREN_L)?ke(e,P.PAREN_L,G,P.PAREN_R):[]}function G(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:D.VARIABLE_DEFINITION,variable:$(e),type:(Ce(e,P.COLON),ae(e)),defaultValue:Ie(e,P.EQUALS)?ee(e,!0):void 0,directives:oe(e,!0),loc:Ee(e,t)}:{kind:D.VARIABLE_DEFINITION,variable:$(e),type:(Ce(e,P.COLON),ae(e)),defaultValue:Ie(e,P.EQUALS)?ee(e,!0):void 0,loc:Ee(e,t)}}function $(e){var t=e.token;return Ce(e,P.DOLLAR),{kind:D.VARIABLE,name:z(e),loc:Ee(e,t)}}function W(e){var t=e.token;return{kind:D.SELECTION_SET,selections:ke(e,P.BRACE_L,Y,P.BRACE_R),loc:Ee(e,t)}}function Y(e){return Ae(e,P.SPREAD)?function(e){var t,n=e.token;if(Ce(e,P.SPREAD),Ae(e,P.NAME)&&"on"!==e.token.value)return{kind:D.FRAGMENT_SPREAD,name:Z(e),directives:oe(e,!1),loc:Ee(e,n)};"on"===e.token.value&&(e.advance(),t=ue(e));return{kind:D.INLINE_FRAGMENT,typeCondition:t,directives:oe(e,!1),selectionSet:W(e),loc:Ee(e,n)}}(e):function(e){var t,n,r=e.token,i=z(e);Ie(e,P.COLON)?(t=i,n=z(e)):n=i;return{kind:D.FIELD,alias:t,name:n,arguments:J(e,!1),directives:oe(e,!1),selectionSet:Ae(e,P.BRACE_L)?W(e):void 0,loc:Ee(e,r)}}(e)}function J(e,t){var n=t?Q:X;return Ae(e,P.PAREN_L)?ke(e,P.PAREN_L,n,P.PAREN_R):[]}function X(e){var t=e.token;return{kind:D.ARGUMENT,name:z(e),value:(Ce(e,P.COLON),ee(e,!1)),loc:Ee(e,t)}}function Q(e){var t=e.token;return{kind:D.ARGUMENT,name:z(e),value:(Ce(e,P.COLON),ne(e)),loc:Ee(e,t)}}function Z(e){if("on"===e.token.value)throw Te(e);return z(e)}function ee(e,t){var n=e.token;switch(n.kind){case P.BRACKET_L:return function(e,t){var n=e.token,r=t?ne:re;return{kind:D.LIST,values:xe(e,P.BRACKET_L,r,P.BRACKET_R),loc:Ee(e,n)}}(e,t);case P.BRACE_L:return function(e,t){var n=e.token;Ce(e,P.BRACE_L);var r=[];for(;!Ie(e,P.BRACE_R);)r.push(ie(e,t));return{kind:D.OBJECT,fields:r,loc:Ee(e,n)}}(e,t);case P.INT:return e.advance(),{kind:D.INT,value:n.value,loc:Ee(e,n)};case P.FLOAT:return e.advance(),{kind:D.FLOAT,value:n.value,loc:Ee(e,n)};case P.STRING:case P.BLOCK_STRING:return te(e);case P.NAME:return"true"===n.value||"false"===n.value?(e.advance(),{kind:D.BOOLEAN,value:"true"===n.value,loc:Ee(e,n)}):"null"===n.value?(e.advance(),{kind:D.NULL,loc:Ee(e,n)}):(e.advance(),{kind:D.ENUM,value:n.value,loc:Ee(e,n)});case P.DOLLAR:if(!t)return $(e)}throw Te(e)}function te(e){var t=e.token;return e.advance(),{kind:D.STRING,value:t.value,block:t.kind===P.BLOCK_STRING,loc:Ee(e,t)}}function ne(e){return ee(e,!0)}function re(e){return ee(e,!1)}function ie(e,t){var n=e.token;return{kind:D.OBJECT_FIELD,name:z(e),value:(Ce(e,P.COLON),ee(e,t)),loc:Ee(e,n)}}function oe(e,t){for(var n=[];Ae(e,P.AT);)n.push(se(e,t));return n}function se(e,t){var n=e.token;return Ce(e,P.AT),{kind:D.DIRECTIVE,name:z(e),arguments:J(e,t),loc:Ee(e,n)}}function ae(e){var t,n=e.token;return Ie(e,P.BRACKET_L)?(t=ae(e),Ce(e,P.BRACKET_R),t={kind:D.LIST_TYPE,type:t,loc:Ee(e,n)}):t=ue(e),Ie(e,P.BANG)?{kind:D.NON_NULL_TYPE,type:t,loc:Ee(e,n)}:t}function ue(e){var t=e.token;return{kind:D.NAMED_TYPE,name:z(e),loc:Ee(e,t)}}function ce(e){var t=le(e)?e.lookahead():e.token;if(t.kind===P.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Pe(e,"schema");var n=oe(e,!0),r=ke(e,P.BRACE_L,de,P.BRACE_R);return{kind:D.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:Ee(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=fe(e);Pe(e,"scalar");var r=z(e),i=oe(e,!0);return{kind:D.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:Ee(e,t)}}(e);case"type":return function(e){var t=e.token,n=fe(e);Pe(e,"type");var r=z(e),i=he(e),o=oe(e,!0),s=pe(e);return{kind:D.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:Ee(e,t)}}(e);case"interface":return function(e){var t=e.token,n=fe(e);Pe(e,"interface");var r=z(e),i=oe(e,!0),o=pe(e);return{kind:D.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:Ee(e,t)}}(e);case"union":return function(e){var t=e.token,n=fe(e);Pe(e,"union");var r=z(e),i=oe(e,!0),o=me(e);return{kind:D.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:Ee(e,t)}}(e);case"enum":return function(e){var t=e.token,n=fe(e);Pe(e,"enum");var r=z(e),i=oe(e,!0),o=_e(e);return{kind:D.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:Ee(e,t)}}(e);case"input":return function(e){var t=e.token,n=fe(e);Pe(e,"input");var r=z(e),i=oe(e,!0),o=we(e);return{kind:D.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:Ee(e,t)}}(e);case"directive":return function(e){var t=e.token,n=fe(e);Pe(e,"directive"),Ce(e,P.AT);var r=z(e),i=ve(e);Pe(e,"on");var o=function(e){Ie(e,P.PIPE);var t=[];do{t.push(Se(e))}while(Ie(e,P.PIPE));return t}(e);return{kind:D.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:Ee(e,t)}}(e)}throw Te(e,t)}function le(e){return Ae(e,P.STRING)||Ae(e,P.BLOCK_STRING)}function fe(e){if(le(e))return te(e)}function de(e){var t=e.token,n=H(e);Ce(e,P.COLON);var r=ue(e);return{kind:D.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:Ee(e,t)}}function he(e){var t=[];if("implements"===e.token.value){e.advance(),Ie(e,P.AMP);do{t.push(ue(e))}while(Ie(e,P.AMP)||e.options.allowLegacySDLImplementsInterfaces&&Ae(e,P.NAME))}return t}function pe(e){return e.options.allowLegacySDLEmptyFields&&Ae(e,P.BRACE_L)&&e.lookahead().kind===P.BRACE_R?(e.advance(),e.advance(),[]):Ae(e,P.BRACE_L)?ke(e,P.BRACE_L,ge,P.BRACE_R):[]}function ge(e){var t=e.token,n=fe(e),r=z(e),i=ve(e);Ce(e,P.COLON);var o=ae(e),s=oe(e,!0);return{kind:D.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:Ee(e,t)}}function ve(e){return Ae(e,P.PAREN_L)?ke(e,P.PAREN_L,ye,P.PAREN_R):[]}function ye(e){var t=e.token,n=fe(e),r=z(e);Ce(e,P.COLON);var i,o=ae(e);Ie(e,P.EQUALS)&&(i=ne(e));var s=oe(e,!0);return{kind:D.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:Ee(e,t)}}function me(e){var t=[];if(Ie(e,P.EQUALS)){Ie(e,P.PIPE);do{t.push(ue(e))}while(Ie(e,P.PIPE))}return t}function _e(e){return Ae(e,P.BRACE_L)?ke(e,P.BRACE_L,be,P.BRACE_R):[]}function be(e){var t=e.token,n=fe(e),r=z(e),i=oe(e,!0);return{kind:D.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:Ee(e,t)}}function we(e){return Ae(e,P.BRACE_L)?ke(e,P.BRACE_L,ye,P.BRACE_R):[]}function Se(e){var t=e.token,n=z(e);if(L.hasOwnProperty(n.value))return n;throw Te(e,t)}function Ee(e,t){if(!e.options.noLocation)return new Oe(t,e.lastToken,e.source)}function Oe(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function Ae(e,t){return e.token.kind===t}function Ie(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function Ce(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw w(e.source,n.start,"Expected ".concat(t,", found ").concat(T(n)))}function Pe(e,t){var n=e.token;if(n.kind===P.NAME&&n.value===t)return e.advance(),n;throw w(e.source,n.start,'Expected "'.concat(t,'", found ').concat(T(n)))}function Te(e,t){var n=t||e.token;return w(e.source,n.start,"Unexpected ".concat(T(n)))}function xe(e,t,n,r){Ce(e,t);for(var i=[];!Ie(e,r);)i.push(n(e));return i}function ke(e,t,n,r){Ce(e,t);for(var i=[n(e)];!Ie(e,r);)i.push(n(e));return i}Oe.prototype.toJSON=Oe.prototype.inspect=function(){return{start:this.start,end:this.end}};var je=n(32),Ne=n(4),Re=n(54),Me=n(71),Ue=n(38),De=n(40),Le=n(28),Be=n(129),ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Fe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},qe=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ke=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},He=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ve=new je.a("GraphQLAPI"),Ge=function(e,t){return void 0===t&&(t={}),{query:e,variables:t}},$e=function(){function e(e){this._api=null,this._options=e,Ne.b.register(this),Ve.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=Ke(t,["API"]),o=ze(ze({},i),r);return Ve.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(Ve.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return Ve.debug("create Rest instance"),this._options?(this._api=new Be.a(this._options),!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e){return Fe(this,void 0,void 0,(function(){var t,n,r,i,o,s;return qe(this,(function(a){switch(a.label){case 0:switch(t=this._options,n=t.aws_appsync_authenticationType,r=t.aws_appsync_apiKey,i={},e||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,6]}return[3,8];case 1:if(!r)throw new Error("No api-key configured");return i={Authorization:null,"X-Api-Key":r},[3,9];case 2:return[4,this._ensureCredentials()];case 3:if(!a.sent())throw new Error("No credentials");return[3,9];case 4:return[4,Le.a.getItem("federatedInfo")];case 5:if(!(o=a.sent())||!o.token)throw new Error("No federated jwt");return i={Authorization:o.token},[3,9];case 6:return[4,De.a.currentSession()];case 7:return s=a.sent(),i={Authorization:s.getAccessToken().getJwtToken()},[3,9];case 8:return i={Authorization:null},[3,9];case 9:return[2,i]}}))}))},e.prototype.getGraphqlOperationType=function(e){var t=B(e);return He(t.definitions,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=B("string"==typeof n?n:u(n)),a=He(s.definitions.filter((function(e){return"OperationDefinition"===e.kind})),1)[0],c=(void 0===a?{}:a).operation;switch(c){case"query":case"mutation":return this._graphql({query:s,variables:i,authMode:o},t);case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o})}throw new Error("invalid operation type: "+c)},e.prototype._graphql=function(e,t){var n=e.query,i=e.variables,o=e.authMode;return void 0===t&&(t={}),Fe(this,void 0,void 0,(function(){var e,s,a,c,l,f,d,h,p,g,v,y,m,_,b,w,S,E,O,A,I;return qe(this,(function(C){switch(C.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:C.sent(),C.label=2;case 2:return e=this._options,s=e.aws_appsync_region,a=e.aws_appsync_graphqlEndpoint,c=e.graphql_headers,l=void 0===c?function(){return{}}:c,f=e.graphql_endpoint,d=e.graphql_endpoint_iam_region,p=[{}],(g=!f)?[4,this._headerBasedAuth(o)]:[3,4];case 3:g=C.sent(),C.label=4;case 4:return v=[ze.apply(void 0,p.concat([g]))],(y=f)?d?[4,this._headerBasedAuth(o)]:[3,6]:[3,8];case 5:return m=C.sent(),[3,7];case 6:m={Authorization:null},C.label=7;case 7:y=m,C.label=8;case 8:return _=[ze.apply(void 0,v.concat([y]))],[4,l({query:n,variables:i})];case 9:if(h=ze.apply(void 0,[ze.apply(void 0,[ze.apply(void 0,_.concat([C.sent()])),t]),!f&&(I={},I["x-amz-user-agent"]=Ne.a.userAgent,I)]),b={query:u(n),variables:i},w={headers:h,body:b,signerServiceInfo:{service:f?"execute-api":"appsync",region:f?d:s}},!(S=f||a))throw{data:{},errors:[new r.a("No graphql endpoint provided.")]};C.label=10;case 10:return C.trys.push([10,12,,13]),[4,this._api.post(S,w)];case 11:return E=C.sent(),[3,13];case 12:return O=C.sent(),E={data:{},errors:[new r.a(O.message)]},[3,13];case 13:if((A=E.errors)&&A.length)throw E;return[2,E]}}))}))},e.prototype._graphqlSubscribe=function(e){var t=e.query,n=e.variables,r=e.authMode,i=this._options,o=i.aws_appsync_region,s=i.aws_appsync_graphqlEndpoint,a=i.aws_appsync_authenticationType,c=i.aws_appsync_apiKey,l=i.graphql_headers,f=void 0===l?function(){return{}}:l,d=r||a||"AWS_IAM";if(Ue.b&&"function"==typeof Ue.b.subscribe)return Ue.b.subscribe("",{provider:Re.b,appSyncGraphqlEndpoint:s,authenticationType:d,apiKey:c,query:u(t),region:o,variables:n,graphql_headers:f});throw Ve.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){return Me.a.get().then((function(e){if(!e)return!1;var t=Me.a.shear(e);return Ve.debug("set credentials for api",t),!0})).catch((function(e){return Ve.warn("ensure credentials error",e),!1}))},e}();new $e(null)},function(e,t,n){"use strict";n.d(t,"a",(function(){return _e}));var r=n(32),i=n(17),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=new r.a("AbstractInteractionsProvider"),a=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=o(o({},this._config),e),s.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(e.prototype,"options",{get:function(){return o({},this._config)},enumerable:!0,configurable:!0}),e}(),u=n(0),c=n(16),l=n(22),f=n(23),d=n(24),h=n(25),p=n(26),g=n(7),v=n(13),y=n(27),m=n(80),_=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),b=new Set(["cn-north-1","cn-northwest-1"]),w=new Set(["us-iso-east-1"]),S=new Set(["us-isob-east-1"]),E=new Set(["us-gov-west-1","us-gov-east-1"]),O={apiVersion:"2016-11-28",disableHostPrefix:!1,signingName:"lex",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",signingService:"lex"};break;default:_.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),signingService:"lex"}),b.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e)}),w.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e)}),S.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e)}),E.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),signingService:"lex"})}return Promise.resolve(n)}},A=Object(u.__assign)(Object(u.__assign)({},O),{requestHandler:new f.FetchHttpHandler,sha256:l.Sha256,urlParser:d.parseUrl,bodyLengthChecker:h.calculateBodyLength,streamCollector:p.streamCollector,base64Decoder:v.fromBase64,base64Encoder:v.toBase64,utf8Decoder:g.fromUtf8,utf8Encoder:g.toUtf8,defaultUserAgent:Object(y.defaultUserAgent)(m.a,m.b),runtime:"browser",credentialDefaultProvider:Object(c.invalidFunction)("Credential is missing"),regionDefaultProvider:Object(c.invalidFunction)("Region is missing")}),I=n(9),C=n(21),P=n(10),T=n(11),x=n(15),k=n(12),j=n(2),N=function(e){function t(t){var n=this,r=Object(u.__assign)(Object(u.__assign)({},A),t),i=Object(I.resolveRegionConfig)(r),o=Object(I.resolveEndpointsConfig)(i),s=Object(x.resolveAwsAuthConfig)(o),a=Object(T.resolveRetryConfig)(s),c=Object(k.resolveUserAgentConfig)(a),l=Object(P.resolveHostHeaderConfig)(c);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(x.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(T.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(k.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(C.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(P.getHostHeaderPlugin)(n.config)),n}return Object(u.__extends)(t,e),t.prototype.destroy=function(){},t}(j.Client),R=n(3);function M(e,t){return Object(u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,l,f,d,h,p,g,v,y,m,_,b;return Object(u.__generator)(this,(function(w){switch(w.label){case 0:return r=[Object(u.__assign)({},e)],i={},[4,re(e.body,t)];case 1:switch(n=u.__assign.apply(void 0,r.concat([(i.body=w.sent(),i)])),s="UnknownError",s=ie(e,n.body),s){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotAcceptableException":case"com.amazonaws.commonapi.exceptions#NotAcceptableException":return[3,10];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,12];case"RequestTimeoutException":case"com.amazonaws.commonapi.exceptions#RequestTimeoutException":return[3,14];case"UnsupportedMediaTypeException":case"com.amazonaws.commonapi.exceptions#UnsupportedMediaTypeException":return[3,16];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,18];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,20];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,22]}return[3,24];case 2:return a=[{}],[4,L(n,t)];case 3:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,a.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 4:return c=[{}],[4,B(n,t)];case 5:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,c.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 6:return l=[{}],[4,z(n,t)];case 7:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,l.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 8:return f=[{}],[4,F(n,t)];case 9:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,f.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 10:return d=[{}],[4,q(n,t)];case 11:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,d.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 12:return h=[{}],[4,K(n,t)];case 13:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,h.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 14:return p=[{}],[4,H(n,t)];case 15:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,p.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 16:return g=[{}],[4,V(n,t)];case 17:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,g.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 18:return v=[{}],[4,G(n,t)];case 19:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,v.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 20:return y=[{}],[4,$(n,t)];case 21:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,y.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 22:return m=[{}],[4,W(n,t)];case 23:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,m.concat([w.sent()])),{name:s,$metadata:te(e)}]),[3,25];case 24:_=n.body,s=_.code||_.Code||s,o=Object(u.__assign)(Object(u.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:te(e)}),w.label=25;case 25:return b=o.message||o.Message||s,o.message=b,delete o.Message,[2,Promise.reject(Object.assign(new Error(b),o))]}}))}))}function U(e,t){return Object(u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,l,f,d,h,p,g,v,y;return Object(u.__generator)(this,(function(m){switch(m.label){case 0:return r=[Object(u.__assign)({},e)],i={},[4,re(e.body,t)];case 1:switch(n=u.__assign.apply(void 0,r.concat([(i.body=m.sent(),i)])),s="UnknownError",s=ie(e,n.body),s){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,10];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,12];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,14];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,16]}return[3,18];case 2:return a=[{}],[4,L(n,t)];case 3:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,a.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 4:return c=[{}],[4,B(n,t)];case 5:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,c.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 6:return l=[{}],[4,z(n,t)];case 7:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,l.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 8:return f=[{}],[4,F(n,t)];case 9:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,f.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 10:return d=[{}],[4,K(n,t)];case 11:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,d.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 12:return h=[{}],[4,G(n,t)];case 13:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,h.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 14:return p=[{}],[4,$(n,t)];case 15:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,p.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 16:return g=[{}],[4,W(n,t)];case 17:return o=u.__assign.apply(void 0,[u.__assign.apply(void 0,g.concat([m.sent()])),{name:s,$metadata:te(e)}]),[3,19];case 18:v=n.body,s=v.code||v.Code||s,o=Object(u.__assign)(Object(u.__assign)({},v),{name:""+s,message:v.message||v.Message||s,$fault:"client",$metadata:te(e)}),m.label=19;case 19:return y=o.message||o.Message||s,o.message=y,delete o.Message,[2,Promise.reject(Object.assign(new Error(y),o))]}}))}))}var D,L=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"BadRequestException",$fault:"client",$metadata:te(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},B=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"ConflictException",$fault:"client",$metadata:te(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},z=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"InternalFailureException",$fault:"server",$metadata:te(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},F=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"LimitExceededException",$fault:"client",$metadata:te(e),message:void 0,retryAfterSeconds:void 0},void 0!==e.headers["retry-after"]&&(t.retryAfterSeconds=e.headers["retry-after"]),void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},q=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"NotAcceptableException",$fault:"client",$metadata:te(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},K=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"NotFoundException",$fault:"client",$metadata:te(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},H=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"RequestTimeoutException",$fault:"client",$metadata:te(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},V=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:te(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},G=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"BadGatewayException",$fault:"server",$metadata:te(e),Message:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},$=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"DependencyFailedException",$fault:"client",$metadata:te(e),Message:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},W=function(e,t){return Object(u.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(u.__generator)(this,(function(r){return t={name:"LoopDetectedException",$fault:"server",$metadata:te(e),Message:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},Y=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),n},J=function(e,t){var n={__type:"SentimentResponse",sentimentLabel:void 0,sentimentScore:void 0};return void 0!==e.sentimentLabel&&null!==e.sentimentLabel&&(n.sentimentLabel=e.sentimentLabel),void 0!==e.sentimentScore&&null!==e.sentimentScore&&(n.sentimentScore=e.sentimentScore),n},X=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),n},Q=function(e,t){var n={__type:"ResponseCard",contentType:void 0,genericAttachments:void 0,version:void 0};return void 0!==e.contentType&&null!==e.contentType&&(n.contentType=e.contentType),void 0!==e.genericAttachments&&null!==e.genericAttachments&&(n.genericAttachments=Z(e.genericAttachments,t)),void 0!==e.version&&null!==e.version&&(n.version=e.version),n},Z=function(e,t){return(e||[]).map((function(e){return function(e,t){var n={__type:"GenericAttachment",attachmentLinkUrl:void 0,buttons:void 0,imageUrl:void 0,subTitle:void 0,title:void 0};return void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl&&(n.attachmentLinkUrl=e.attachmentLinkUrl),void 0!==e.buttons&&null!==e.buttons&&(n.buttons=ee(e.buttons,t)),void 0!==e.imageUrl&&null!==e.imageUrl&&(n.imageUrl=e.imageUrl),void 0!==e.subTitle&&null!==e.subTitle&&(n.subTitle=e.subTitle),void 0!==e.title&&null!==e.title&&(n.title=e.title),n}(e,t)}))},ee=function(e,t){return(e||[]).map((function(e){return function(e,t){var n={__type:"Button",text:void 0,value:void 0};return void 0!==e.text&&null!==e.text&&(n.text=e.text),void 0!==e.value&&null!==e.value&&(n.value=e.value),n}(e)}))},te=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},ne=function(e,t){return function(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))},re=function(e,t){return ne(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},ie=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},oe=n(5),se=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(u.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(oe.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(u.__generator)(this,(function(a){if((n={})["Content-Type"]="application/json",r="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===e.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=e.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(r=r.replace("{botAlias}",Object(j.extendedEncodeURIComponent)(i)),void 0===e.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=e.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(r=r.replace("{botName}",Object(j.extendedEncodeURIComponent)(i)),void 0===e.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=e.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return r=r.replace("{userId}",Object(j.extendedEncodeURIComponent)(i)),s={},void 0!==e.inputText&&(s.inputText=e.inputText),void 0!==e.requestAttributes&&(s.requestAttributes=Y(e.requestAttributes,t)),void 0!==e.sessionAttributes&&(s.sessionAttributes=Y(e.sessionAttributes,t)),o=JSON.stringify(s),[2,new R.HttpRequest(Object(u.__assign)(Object(u.__assign)({},t.endpoint),{protocol:"https",method:"POST",headers:n,path:r,body:o}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(u.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(u.__generator)(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,U(e,t)]:(n={$metadata:te(e),__type:"PostTextResponse",dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,re(e.body,t)]);case 1:return void 0!==(r=i.sent()).dialogState&&null!==r.dialogState&&(n.dialogState=r.dialogState),void 0!==r.intentName&&null!==r.intentName&&(n.intentName=r.intentName),void 0!==r.message&&null!==r.message&&(n.message=r.message),void 0!==r.messageFormat&&null!==r.messageFormat&&(n.messageFormat=r.messageFormat),void 0!==r.responseCard&&null!==r.responseCard&&(n.responseCard=Q(r.responseCard,t)),void 0!==r.sentimentResponse&&null!==r.sentimentResponse&&(n.sentimentResponse=J(r.sentimentResponse,t)),void 0!==r.sessionAttributes&&null!==r.sessionAttributes&&(n.sessionAttributes=X(r.sessionAttributes,t)),void 0!==r.sessionId&&null!==r.sessionId&&(n.sessionId=r.sessionId),void 0!==r.slotToElicit&&null!==r.slotToElicit&&(n.slotToElicit=r.slotToElicit),void 0!==r.slots&&null!==r.slots&&(n.slots=X(r.slots,t)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(j.Command),ae=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(u.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(oe.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(u.__generator)(this,(function(s){if((n={})["Content-Type"]="application/octet-stream",n["x-amz-content-sha256"]="UNSIGNED_PAYLOAD",void 0!==e.accept&&(n.Accept=e.accept),void 0!==e.contentType&&(n["Content-Type"]=e.contentType),void 0!==e.requestAttributes&&(n["x-amz-lex-request-attributes"]=j.LazyJsonString.fromObject(e.requestAttributes)),void 0!==e.sessionAttributes&&(n["x-amz-lex-session-attributes"]=j.LazyJsonString.fromObject(e.sessionAttributes)),r="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===e.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=e.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(r=r.replace("{botAlias}",Object(j.extendedEncodeURIComponent)(i)),void 0===e.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=e.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(r=r.replace("{botName}",Object(j.extendedEncodeURIComponent)(i)),void 0===e.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=e.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return r=r.replace("{userId}",Object(j.extendedEncodeURIComponent)(i)),void 0!==e.inputStream&&(o=e.inputStream),[2,new R.HttpRequest(Object(u.__assign)(Object(u.__assign)({},t.endpoint),{protocol:"https",method:"POST",headers:n,path:r,body:o}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(u.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(u.__generator)(this,(function(i){return 200!==e.statusCode&&e.statusCode>=400?[2,M(e,t)]:(n={$metadata:te(e),__type:"PostContentResponse",audioStream:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==e.headers["content-type"]&&(n.contentType=e.headers["content-type"]),void 0!==e.headers["x-amz-lex-dialog-state"]&&(n.dialogState=e.headers["x-amz-lex-dialog-state"]),void 0!==e.headers["x-amz-lex-input-transcript"]&&(n.inputTranscript=e.headers["x-amz-lex-input-transcript"]),void 0!==e.headers["x-amz-lex-intent-name"]&&(n.intentName=e.headers["x-amz-lex-intent-name"]),void 0!==e.headers["x-amz-lex-message"]&&(n.message=e.headers["x-amz-lex-message"]),void 0!==e.headers["x-amz-lex-message-format"]&&(n.messageFormat=e.headers["x-amz-lex-message-format"]),void 0!==e.headers["x-amz-lex-sentiment"]&&(n.sentimentResponse=e.headers["x-amz-lex-sentiment"]),void 0!==e.headers["x-amz-lex-session-attributes"]&&(n.sessionAttributes=new j.LazyJsonString(e.headers["x-amz-lex-session-attributes"])),void 0!==e.headers["x-amz-lex-session-id"]&&(n.sessionId=e.headers["x-amz-lex-session-id"]),void 0!==e.headers["x-amz-lex-slot-to-elicit"]&&(n.slotToElicit=e.headers["x-amz-lex-slot-to-elicit"]),void 0!==e.headers["x-amz-lex-slots"]&&(n.slots=new j.LazyJsonString(e.headers["x-amz-lex-slots"])),r=e.body,n.audioStream=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(j.Command),ue=n(71),ce=n(35),le=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},de=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},he=new r.a("AWSLexProvider"),pe=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._botsCompleteCallback={},n}return le(t,e),t.prototype.getProviderName=function(){return"AWSLexProvider"},t.prototype.reportBotStatus=function(e,t){var n=this;he.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t](null,{slots:e.slots})}),0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete(null,{slots:e.slots})}),0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t]("Bot conversation failed")}),0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete("Bot conversation failed")}),0))},t.prototype.sendMessage=function(e,t){return fe(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return de(this,(function(c){switch(c.label){case 0:return this._config[e]?[4,ue.a.get()]:[2,Promise.reject("Bot "+e+" does not exist")];case 1:if(!(n=c.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new N({region:this._config[e].region,credentials:n,customUserAgent:Object(ce.b)()}),"string"!=typeof t)return[3,6];r={botAlias:this._config[e].alias,botName:e,inputText:t,userId:n.identityId},he.debug("postText to lex",t),c.label=2;case 2:return c.trys.push([2,4,,5]),i=new se(r),[4,this.lexRuntimeServiceClient.send(i)];case 3:return a=c.sent(),this.reportBotStatus(a,e),[2,a];case 4:return o=c.sent(),[2,Promise.reject(o)];case 5:return[3,10];case 6:r="voice"===t.options.messageType?{botAlias:this._config[e].alias,botName:e,contentType:"audio/x-l16; sample-rate=16000",inputStream:t.content,userId:n.identityId,accept:"audio/mpeg"}:{botAlias:this._config[e].alias,botName:e,contentType:"text/plain; charset=utf-8",inputStream:t.content,userId:n.identityId,accept:"audio/mpeg"},he.debug("postContent to lex",t),c.label=7;case 7:return c.trys.push([7,9,,10]),s=new ae(r),[4,this.lexRuntimeServiceClient.send(s)];case 8:return a=c.sent(),this.reportBotStatus(a,e),[2,a];case 9:return u=c.sent(),[2,Promise.reject(u)];case 10:return[2]}}))}))},t.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},t}(a),ge=function(){return(ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ve=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ye=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},me=new r.a("Interactions"),_e=new(function(){function e(e){this._options=e,me.debug("Interactions Options",this._options),this._pluggables={},i.a.register(this)}return e.prototype.getModuleName=function(){return"Interactions"},e.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};me.debug("configure Interactions",{opt:n}),this._options=ge(ge({bots:{}},n),n.Interactions);var r=this._options.aws_bots_config,i=this._options.bots;return!Object.keys(i).length&&r&&Array.isArray(r)&&r.forEach((function(e){t._options.bots[e.name]=e})),!this._pluggables.AWSLexProvider&&i&&Object.keys(i).map((function(e){return i[e]})).find((function(e){return!e.providerName||"AWSLexProvider"===e.providerName}))&&(this._pluggables.AWSLexProvider=new pe),Object.keys(this._pluggables).map((function(e){t._pluggables[e].configure(t._options.bots)})),this._options},e.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");return e.configure(this._options.bots),void(this._pluggables[e.getProviderName()]=e)}},e.prototype.send=function(e,t){return ve(this,void 0,void 0,(function(){var n;return ye(this,(function(r){switch(r.label){case 0:if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");if(n=this._options.bots[e].providerName||"AWSLexProvider",!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[n].sendMessage(e,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},e}())(null)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var r=n(32),i=n(63),o=n(17),s=n(86),a=n(72),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},c=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e},l=[],f=function(){function e(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}return e.add=function(e,t,n){d(e,t).set(n)},e.remove=function(e,t){d(e,t).remove()},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t._originalMethod.apply(t,c(n)))}},e.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},e}();function d(e,t){var n=l.filter((function(n){return n.context===e&&n.methodName===t}))[0];return n||(n=new f(e,t),l.push(n)),n}var h=n(31),p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},v=new r.a("PageViewTracker"),y="aws-amplify-analytics-prevUrl",m={enable:!1,provider:"AWSPinpoint",getUrl:function(){return h.a.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},_=function(){function e(e,t){v.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},m,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return e.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},e.prototype._isSameUrl=function(){return sessionStorage.getItem(y)===this._config.getUrl()&&(v.debug("the url is same"),!0)},e.prototype._pageViewTrackDefault=function(){return p(this,void 0,void 0,(function(){var e,t,n,r;return g(this,(function(i){switch(i.label){case 0:return h.a.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(v.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){v.debug("Failed to record the page view event",e)})),sessionStorage.setItem(y,e)),[2]}}))}))},e.prototype._trackFunc=function(){return p(this,void 0,void 0,(function(){var e,t,n,r;return g(this,(function(i){switch(i.label){case 0:return h.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(v.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){v.debug("Failed to record the page view event",e)})),sessionStorage.setItem(y,e)),[2]}}))}))},e.prototype._pageViewTrackSPA=function(){h.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(f.add(history,"pushState",this._trackFunc),f.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(f.remove(history,"pushState"),f.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):v.debug("not in the supported web enviroment")},e}(),b=h.a.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,w=b?b.matches||b.matchesSelector||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector:null;function S(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||E(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||E(e,r))return!0}return!1}function E(e,t){if("string"!=typeof t)return!1;if(w)return w.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,i=void 0;i=n[r];r++)if(i===e)return!0;return!1}function O(e,t,n,r,i){void 0===i&&(i={});var o=function(e){var t;if(i.composed&&"function"==typeof e.composedPath)for(var o=e.composedPath(),s=0,a=void 0;a=o[s];s++)1===a.nodeType&&S(a,n)&&(t=a);else t=function(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(S(r,t))return r}(e.target,n,!0);t&&r.call(t,e,t)};return e.addEventListener(t,o,i.useCapture),{destroy:function(){e.removeEventListener(t,o,i.useCapture)}}}var A=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},I=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},C=new r.a("EventTracker"),P={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},T=function(){function e(e,t){h.a.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},P,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),C.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):C.debug("not in the supported web environment")}return e.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach((function(e){t._delegates[e]=O(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})}))}}else Object.keys(this._delegates).forEach((function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()})),this._delegates={};return this._config},e.prototype._trackFunc=function(e,t){return A(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return I(this,(function(c){switch(c.label){case 0:return n={},r=t.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),i=t.getAttribute(this._config.selectorPrefix+"name"),(o=t.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach((function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]})),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return a=c.sent(),[3,3];case 2:a=this._config.attributes,c.label=3;case 3:return s=a,u=Object.assign({type:e.type,target:e.target.localName+" with id "+e.target.id},s,n),C.debug("events needed to be recorded",r),C.debug("attributes needed to be attached",n),r.indexOf(e.type)<0?(C.debug("event "+e.type+" is not selected to be recorded"),[2]):(this._tracker({name:i||"event",attributes:u},this._config.provider).catch((function(t){C.debug("Failed to record the "+e.type+" event', "+t)})),[2])}}))}))},e}(),x=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},k=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},j=new r.a("SessionTracker"),N={enable:!1,provider:"AWSPinpoint"},R=!1,M=function(){function e(e,t){this._config=Object.assign({},N,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return e.prototype._envCheck=function(){if(!h.a.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return j.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return j.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},e.prototype._trackFunc=function(){return x(this,void 0,void 0,(function(){var e,t,n;return k(this,(function(r){switch(r.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch((function(e){j.debug("record session stop event failed.",e)})):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){j.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then((function(e){var n=Object.assign({},e);t._tracker({name:"_session.stop",attributes:n,immediate:!0},t._config.provider).catch((function(e){j.debug("record session stop event failed.",e)}))}))},e.prototype._sendInitialEvent=function(){return x(this,void 0,void 0,(function(){var e,t,n;return k(this,(function(r){switch(r.label){case 0:return R?(j.debug("the start session has been sent when the page is loaded"),[2]):(R=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){j.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype.configure=function(e){return this._envCheck()?(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},e}(),U=function(){return(U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},B=new r.a("AnalyticsClass"),z="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",F={pageView:_,event:T,session:M},q=null,K=function(){function e(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},q=this,this.record=this.record.bind(this),i.a.listen("auth",$),i.a.listen("storage",$),i.a.listen("analytics",$),o.a.register(this)}return e.prototype.getModuleName=function(){return"Analytics"},e.prototype.configure=function(e){var t=this;if(!e)return this._config;B.debug("configure Analytics",e);var n,r,o,u=s.a.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,u.Analytics,e),this._config.disabled&&(this._disabled=!0),this._pluggables.forEach((function(e){var n="AWSPinpoint"!==e.getProviderName()||t._config.AWSPinpoint?t._config[e.getProviderName()]:t._config;e.configure(U({disabled:t._config.disabled},n))})),0===this._pluggables.length&&this.addPluggable(new a.a),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),n="configured",r=null,o="The Analytics category has been configured successfully",i.a.dispatch("analytics",{event:n,data:r,message:o},"Analytics",z),B.debug("current configuration",this._config),this._config},e.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=U({disabled:this._config.disabled},t);return e.configure(n),n}},e.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return B.debug("No plugin found with providerName",e),null},e.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void B.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},e.prototype.disable=function(){this._disabled=!0},e.prototype.enable=function(){this._disabled=!1},e.prototype.startSession=function(e){return D(this,void 0,void 0,(function(){var t;return L(this,(function(n){return t={event:{name:"_session.start"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.stopSession=function(e){return D(this,void 0,void 0,(function(){var t;return L(this,(function(n){return t={event:{name:"_session.stop"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.record=function(e,t,n){return D(this,void 0,void 0,(function(){var r,i;return L(this,(function(o){return this.isAnalyticsConfigured()?(i=null,i="string"==typeof e?{event:{name:e,attributes:t,metrics:n},provider:"AWSPinpoint"}:{event:e,provider:t},[2,this._sendEvent(i)]):(r="Analytics has not been configured",B.debug(r),[2,Promise.reject(new Error(r))])}))}))},e.prototype.updateEndpoint=function(e,t){return D(this,void 0,void 0,(function(){var n;return L(this,(function(r){return n=U(U({},e),{name:"_update_endpoint"}),[2,this.record(n,t)]}))}))},e.prototype._sendEvent=function(e){var t=this;if(!this.isAnalyticsConfigured()){var n="Analytics has not been configured";return B.debug(n),Promise.reject(new Error(n))}if(this._disabled)return B.debug("Analytics has been disabled"),Promise.resolve();var r=e.provider?e.provider:"AWSPinpoint";return new Promise((function(n,i){t._pluggables.forEach((function(t){t.getProviderName()===r&&t.record(e,{resolve:n,reject:i})}))}))},e.prototype.autoTrack=function(e,t){if(F[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new F[e](this.record,t)}else B.debug("invalid tracker type")},e.prototype.isAnalyticsConfigured=function(){return this._config&&Object.entries(this._config).length>0},e}(),H=!1,V=!1,G=!1,$=function(e){var t=e.channel,n=e.payload;switch(B.debug("on hub capsule "+t,n),t){case"auth":Y(n);break;case"storage":W(n);break;case"analytics":J(n)}},W=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&G&&q.record({name:"Storage",attributes:n,metrics:r}).catch((function(e){B.debug("Failed to send the storage event automatically",e)}))},Y=function(e){var t=e.event;if(t){var n=function(e){return D(void 0,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:if(!V||!G)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q.record({name:"_userauth."+e})];case 2:return[2,n.sent()];case 3:return t=n.sent(),B.debug("Failed to send the "+e+" event automatically",t),[3,4];case 4:return[2]}}))}))};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":(V=!0)&&G&&X()}}},J=function(e){var t=e.event;if(t)switch(t){case"pinpointProvider_configured":G=!0,V&&G&&X()}},X=function(){var e=q.configure();!H&&e.autoSessionRecord&&(q.updateEndpoint({immediate:!0}).catch((function(e){B.debug("Failed to update the endpoint",e)})),H=!0),q.autoTrack("session",{enable:e.autoSessionRecord})},Q=new K},function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));var r=n(32),i=n(31),o=n(35),s=n(71),a=n(0),u=n(3),c=n(2);function l(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l;return Object(a.__generator)(this,(function(f){switch(f.label){case 0:return r=[Object(a.__assign)({},e)],i={},[4,_(e.body,t)];case 1:switch(n=a.__assign.apply(void 0,r.concat([(i.body=f.sent(),i)])),s="UnknownError",s=b(e,n.body),s){case"InvalidInputException":case"com.amazonaws.services.personalize.events.exceptions#InvalidInputException":return[3,2]}return[3,4];case 2:return u=[{}],[4,p(n,t)];case 3:return o=a.__assign.apply(void 0,[a.__assign.apply(void 0,u.concat([f.sent()])),{name:s,$metadata:y(e)}]),[3,5];case 4:c=n.body,s=c.code||c.Code||s,o=Object(a.__assign)(Object(a.__assign)({},c),{name:""+s,message:c.message||c.Message||s,$fault:"client",$metadata:y(e)}),f.label=5;case 5:return l=o.message||o.Message||s,o.message=l,delete o.Message,[2,Promise.reject(Object.assign(new Error(l),o))]}}))}))}var f,d,h,p=function(e,t){return Object(a.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){return t={name:"InvalidInputException",$fault:"client",$metadata:y(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},g=function(e,t){var n={};return void 0!==e.eventId&&(n.eventId=e.eventId),void 0!==e.eventType&&(n.eventType=e.eventType),void 0!==e.properties&&(n.properties=c.LazyJsonString.fromObject(e.properties)),void 0!==e.sentAt&&(n.sentAt=Math.round(e.sentAt.getTime()/1e3)),n},v=function(e,t){var n,r,i=[];try{for(var o=Object(a.__values)(e),s=o.next();!s.done;s=o.next()){var u=s.value;i.push(g(u))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},y=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},m=function(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},_=function(e,t){return function(e,t){return m(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},b=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},w=n(5),S=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(a.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(w.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){return(n={})["Content-Type"]="application/json","/events",i={},void 0!==e.eventList&&(i.eventList=v(e.eventList,t)),void 0!==e.sessionId&&(i.sessionId=e.sessionId),void 0!==e.trackingId&&(i.trackingId=e.trackingId),void 0!==e.userId&&(i.userId=e.userId),r=JSON.stringify(i),[2,new u.HttpRequest(Object(a.__assign)(Object(a.__assign)({},t.endpoint),{protocol:"https",method:"POST",headers:n,path:"/events",body:r}))]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,l(e,t)]:(n={$metadata:y(e)},[4,m(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(c.Command),E=n(16),O=n(22),A=n(23),I=n(24),C=n(25),P=n(26),T=n(7),x=n(13),k=n(27),j=n(77),N="personalize-events.{region}.amazonaws.com",R=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),M=new Set(["cn-north-1","cn-northwest-1"]),U=new Set(["us-iso-east-1"]),D=new Set(["us-isob-east-1"]),L=new Set(["us-gov-west-1","us-gov-east-1"]),B={apiVersion:"2018-03-22",disableHostPrefix:!1,signingName:"personalize",regionInfoProvider:function(e,t){var n=void 0;return R.has(e)&&(n={hostname:N.replace("{region}",e)}),M.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com.cn".replace("{region}",e)}),U.has(e)&&(n={hostname:"personalize-events.{region}.c2s.ic.gov".replace("{region}",e)}),D.has(e)&&(n={hostname:"personalize-events.{region}.sc2s.sgov.gov".replace("{region}",e)}),L.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:N.replace("{region}",e)}),Promise.resolve(n)}},z=Object(a.__assign)(Object(a.__assign)({},B),{requestHandler:new A.FetchHttpHandler,sha256:O.Sha256,urlParser:I.parseUrl,bodyLengthChecker:C.calculateBodyLength,streamCollector:P.streamCollector,base64Decoder:x.fromBase64,base64Encoder:x.toBase64,utf8Decoder:T.fromUtf8,utf8Encoder:T.toUtf8,defaultUserAgent:Object(k.defaultUserAgent)(j.a,j.b),runtime:"browser",credentialDefaultProvider:Object(E.invalidFunction)("Credential is missing"),regionDefaultProvider:Object(E.invalidFunction)("Region is missing")}),F=n(9),q=n(21),K=n(10),H=n(11),V=n(15),G=n(12),$=function(e){function t(t){var n=this,r=Object(a.__assign)(Object(a.__assign)({},z),t),i=Object(F.resolveRegionConfig)(r),o=Object(F.resolveEndpointsConfig)(i),s=Object(V.resolveAwsAuthConfig)(o),u=Object(H.resolveRetryConfig)(s),c=Object(G.resolveUserAgentConfig)(u),l=Object(K.resolveHostHeaderConfig)(c);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(V.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(H.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(G.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(q.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(K.getHostHeaderPlugin)(n.config)),n}return Object(a.__extends)(t,e),t.prototype.destroy=function(){},t}(c.Client),W=n(18),Y=n(19),J=n(28),X=(new r.a("AmazonPersonalizeProvider"),function(){function e(e){void 0===e&&(e=""),this._isBrowser=i.a.browserOrNode().isBrowser,this._timerKey=Object(Y.v1)().substr(0,15),this._refreshTimer()}return e.prototype._refreshTimer=function(){this._timer&&clearInterval(this._timer);var e=this;this._timer=setInterval((function(){e._timerKey=Object(Y.v1)().substr(0,15)}),3e4)},e.prototype.storeValue=function(e,t){var n=new Date,r=new Date;r.setTime(n.getTime()+6048e5),J.a.setItem(this._getCachePrefix(e),t,{expires:r.getTime()})},e.prototype.retrieveValue=function(e){return J.a.getItem(this._getCachePrefix(e))},e.prototype._getCachePrefix=function(e){return this._isBrowser?e+"."+window.location.host:"peronslize"},e.prototype.getTimerKey=function(){return this._timerKey},e.prototype.updateSessionInfo=function(e,t){var n=t.userId,r=t.sessionId;if(this._isRequireNewSession(e,n,r)){var i=Object(Y.v1)();this.storeValue("_awsct_uid",e),this.storeValue("_awsct_sid",i),t.sessionId=i}else this._isRequireUpdateSessionInfo(e,n,r)&&this.storeValue("_awsct_uid",e);t.userId=e},e.prototype._isRequireUpdateSessionInfo=function(e,t,n){return!Object(W.isEmpty)(n)&&Object(W.isEmpty)(t)&&!Object(W.isEmpty)(e)},e.prototype.retrieveSessionInfo=function(e){var t={};return t.trackingId=e,t.sessionId=this.retrieveValue("_awsct_sid"),t.userId=this.retrieveValue("_awsct_uid"),Object(W.isEmpty)(t.sessionId)&&(t.sessionId=Object(Y.v1)(),this.storeValue("_awsct_sid",t.sessionId)),this.storeValue("_awsct",e),t},e.prototype._isRequireNewSession=function(e,t,n){var r=Object(W.isEmpty)(n),i=Object(W.isEmpty)(e)&&!Object(W.isEmpty)(t),o=!Object(W.isEmpty)(e)&&!Object(W.isEmpty)(t)&&!Object(W.isEqual)(e,t);return r||i||o},e}());!function(e){e.PLAY="play",e.PAUSE="pause",e.ENDED="Ended"}(f||(f={})),function(e){e.IFRAME="IFRAME",e.VIDEO="VIDEO",e.AUDIO="AUDIO"}(d||(d={})),function(e){e.PLAY="Play",e.ENDED="Ended",e.PAUSE="Pause",e.TIME_WATCHED="TimeWatched"}(h||(h={}));var Q=function(){function e(e,t){var n;this.eventActionMapping=((n={})[h.ENDED]=this.endedEventAction.bind(this),n[h.PLAY]=this.playEventAction.bind(this),n[h.PAUSE]=this.pauseEventAction.bind(this),n);var r=e.eventData;this._params=e,this._mediaElement=document.getElementById(r.properties.domElementId),this._started=!1,this._provider=t,{IFRAME:this._iframeMediaTracker,VIDEO:this._html5MediaTracker,AUDIO:this._html5MediaTracker}[this._mediaElement.tagName].bind(this)(),this._initYoutubeFrame()}return e.prototype._initYoutubeFrame=function(){this._youTubeIframeLoader={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(e){var t=this;if(this.listeners.push(e),this.loaded)setTimeout((function(){t.done()}));else if(!this.loading){this.loading=!0,window.onYouTubeIframeAPIReady=function(){t.loaded=!0,t.done()};var n=document.createElement("script");n.type="text/javascript",n.src=this.src,document.body.appendChild(n)}},done:function(){for(delete window.onYouTubeIframeAPIReady;this.listeners.length;)this.listeners.pop()(window.YT)}}},e.prototype._iframeMediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(d.IFRAME,h.TIME_WATCHED)}),3e3),this._youTubeIframeLoader.load((function(t){e._iframePlayer=new t.Player(e._mediaElement.id,{events:{onStateChange:e._onPlayerStateChange.bind(e)}})}))},e.prototype._onPlayerStateChange=function(e){var t={0:h.ENDED,1:h.PLAY,2:h.PAUSE}[e.data];t&&this.eventActionMapping[t](d.IFRAME)},e.prototype._html5MediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(d.VIDEO,h.TIME_WATCHED)}),3e3),this._mediaElement.addEventListener(f.PLAY,(function(){e.eventActionMapping[h.PLAY](d.VIDEO)}),!1),this._mediaElement.addEventListener(f.PAUSE,(function(){e.eventActionMapping[h.PAUSE](d.VIDEO)}),!1),this._mediaElement.addEventListener(f.ENDED,(function(){e.eventActionMapping[h.ENDED](d.VIDEO)}),!1)},e.prototype.playEventAction=function(e){this._started=!0,this.recordEvent(e,h.PLAY)},e.prototype.pauseEventAction=function(e){this._started=!1,this.recordEvent(e,h.PAUSE)},e.prototype.endedEventAction=function(e){this._started=!1,this.recordEvent(e,h.ENDED)},e.prototype.recordEvent=function(e,t){var n=Object.assign({},this._params),r=n.eventData;r.eventType=t,e===d.VIDEO?(r.properties.timestamp=this._mediaElement.currentTime,r.properties.duration=this._mediaElement.duration):(r.properties.timestamp=this._financial(this._iframePlayer.getCurrentTime()),r.properties.duration=this._financial(this._iframePlayer.getDuration()));var i=parseFloat(r.properties.timestamp)/parseFloat(r.properties.duration);r.properties.eventValue=Number(i.toFixed(4)),delete r.properties.domElementId,this._provider.putToBuffer(n)},e.prototype._financial=function(e){return Number.parseFloat(e).toFixed(4)},e}(),Z=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ee=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},te=new r.a("AmazonPersonalizeProvider"),ne=function(){function e(e){this._buffer=[],this._config=e||{},this._config.flushSize=this._config.flushSize>0&&this._config.flushSize<=10?this._config.flushSize:5,this._config.flushInterval=this._config.flushInterval||5e3,this._sessionManager=new X,Object(W.isEmpty)(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._isBrowser=i.a.browserOrNode().isBrowser,this._setupTimer()}return e.prototype._setupTimer=function(){this._timer&&clearInterval(this._timer);var e=this._config.flushInterval,t=this;this._timer=setInterval((function(){t._sendFromBuffer()}),e)},e.prototype.record=function(e){return Z(this,void 0,void 0,(function(){var t,n,r,i,o;return ee(this,(function(s){switch(s.label){case 0:return[4,this._getCredentials()];case 1:return(t=s.sent())?(Object.assign(e,{config:this._config,credentials:t,sentAt:new Date}),n=e.event,r=n.eventType,i=n.properties,"Identify"===r?(this._sessionManager.updateSessionInfo(i&&i.userId?i.userId:"",this._sessionInfo),[2]):(Object(W.isEmpty)(e.event.userId)||this._sessionManager.updateSessionInfo(e.event.userId,this._sessionInfo),o=this.generateRequestParams(e,this._sessionInfo),"MediaAutoTrack"!==r?[3,7]:this._isBrowser?Object(W.isEmpty)(Object(W.get)(o,"eventData.properties.domElementId",null))?[3,3]:[4,this.isElementFullyLoaded(this.loadElement,o.eventData.properties.domElementId,500,5)]:[3,5])):[2,Promise.resolve(!1)];case 2:return s.sent()?new Q(o,this):te.debug("Cannot find the media element."),[3,4];case 3:te.debug("Missing domElementId field in 'properties' for MediaAutoTrack event type."),s.label=4;case 4:return[3,6];case 5:te.debug("MediaAutoTrack only for browser"),s.label=6;case 6:return[2];case 7:return[2,this.putToBuffer(o)]}}))}))},e.prototype.loadElement=function(e){return new Promise((function(t,n){return document.getElementById(e)&&document.getElementById(e).clientHeight?t(!0):n(!0)}))},e.prototype.isElementFullyLoaded=function(e,t,n,r){var i=this;return new Promise((function(o,s){return e(t).then(o).catch((function(a){return r-1>0?(u=n,new Promise((function(e){return setTimeout(e,u)}))).then(i.isElementFullyLoaded.bind(null,e,t,n,r-1)).then(o).catch(s):s(a);var u}))}))},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AmazonPersonalize"},e.prototype.configure=function(e){te.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),Object(W.isEmpty)(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._setupTimer(),this._config},e.prototype.generateRequestParams=function(e,t){var n={},r=e.event,i=r.eventType,o=r.properties;return n.eventData={eventType:i,properties:o},n.sessionInfo=t,n.sentAt=e.sentAt,n.credentials=e.credentials,n.config=e.config,n},e.prototype._sendEvents=function(e){var t=e.length;if(0!==t){var n=e[0],r=n.config,i=n.credentials,o=n.sessionInfo;if(!this._init(r,i))return!1;if(t>0){for(var s=[],a=0;a<t;a+=1){var u=e.shift(),c=this._generateSingleRecordPayload(u,o);s.push(c)}var l={};l.trackingId=o.trackingId,l.sessionId=o.sessionId,l.userId=o.userId,l.eventList=[],s.forEach((function(e){l.eventList.push(e)}));var f=new S(l);this._personalize.send(f,(function(e){e?te.debug("Failed to call putEvents in Personalize",e):te.debug("Put events")}))}}else te.debug("events array is empty, directly return")},e.prototype.putToBuffer=function(e){return this._buffer.length<this._config.flushSize?this._buffer.push(e):(this._buffer.push(e),this._sendFromBuffer()),Promise.resolve(!0)},e.prototype._sendFromBuffer=function(){var e=this,t=this._buffer.length;if(!(t<=0)){for(var n=[],r=null,i=[],o=0;o<t;o+=1){var s=this._buffer.shift(),a=s.credentials,u=s.sessionInfo;0===o?(i.push(s),r=a):Object(W.isEqual)(u,this._sessionInfo)&&a.sessionToken===r.sessionToken&&a.identityId===r.identityId?(te.debug("no change for cred, put event in the same group"),i.push(s)):(n.push(i),(i=[]).push(s),r=a,this._sessionInfo=u)}n.push(i),n.map((function(t){e._sendEvents(t)}))}},e.prototype._generateSingleRecordPayload=function(e,t){var n=e.eventData,r=e.sentAt,i={};return i.sentAt=r,i.properties=n.properties&&JSON.stringify(n.properties),i.eventId=this._sessionManager.getTimerKey()+t.sessionId,i.eventType=n.eventType,i},e.prototype._init=function(e,t){if(te.debug("init clients"),this._personalize&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return te.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return te.debug("initialize personalize with credentials",t),this._personalize=new $({region:n,credentials:t,customUserAgent:Object(o.b)()}),!0},e.prototype._getCredentials=function(){var e=this;return s.a.get().then((function(t){return t?(te.debug("set credentials for analytics",e._config.credentials),s.a.shear(t)):null})).catch((function(e){return te.debug("ensure credentials error",e),null}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));var r=n(32),i=n(230),o=n(0),s=n(3);function a(e,t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,s,a,u,h,p,g,v,y,m;return Object(o.__generator)(this,(function(_){switch(_.label){case 0:return r=[Object(o.__assign)({},e)],i={},[4,A(e.body,t)];case 1:switch(n=o.__assign.apply(void 0,r.concat([(i.body=_.sent(),i)])),a="UnknownError",u=n.body.__type.split("#"),a=void 0===u[1]?u[0]:u[1],a){case"InvalidArgumentException":case"com.amazonaws.firehose.v20150804#InvalidArgumentException":return[3,2];case"InvalidKMSResourceException":case"com.amazonaws.firehose.v20150804#InvalidKMSResourceException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.firehose.v20150804#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.firehose.v20150804#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return h=[{}],[4,c(n,t)];case 3:return s=o.__assign.apply(void 0,[o.__assign.apply(void 0,h.concat([_.sent()])),{name:a,$metadata:S(e)}]),[3,11];case 4:return p=[{}],[4,l(n,t)];case 5:return s=o.__assign.apply(void 0,[o.__assign.apply(void 0,p.concat([_.sent()])),{name:a,$metadata:S(e)}]),[3,11];case 6:return g=[{}],[4,f(n,t)];case 7:return s=o.__assign.apply(void 0,[o.__assign.apply(void 0,g.concat([_.sent()])),{name:a,$metadata:S(e)}]),[3,11];case 8:return v=[{}],[4,d(n,t)];case 9:return s=o.__assign.apply(void 0,[o.__assign.apply(void 0,v.concat([_.sent()])),{name:a,$metadata:S(e)}]),[3,11];case 10:y=n.body,a=y.code||y.Code||a,s=Object(o.__assign)(Object(o.__assign)({},y),{name:""+a,message:y.message||y.Message||a,$fault:"client",$metadata:S(e)}),_.label=11;case 11:return m=s.message||s.Message||a,s.message=m,delete s.Message,[2,Promise.reject(Object.assign(new Error(m),s))]}}))}))}var u,c=function(e,t){return Object(o.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(o.__generator)(this,(function(i){return n=e.body,r=v(n,t),[2,Object(o.__assign)({name:"InvalidArgumentException",$fault:"client",$metadata:S(e)},r)]}))}))},l=function(e,t){return Object(o.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(o.__generator)(this,(function(i){return n=e.body,r=y(n,t),[2,Object(o.__assign)({name:"InvalidKMSResourceException",$fault:"client",$metadata:S(e)},r)]}))}))},f=function(e,t){return Object(o.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(o.__generator)(this,(function(i){return n=e.body,r=b(n,t),[2,Object(o.__assign)({name:"ResourceNotFoundException",$fault:"client",$metadata:S(e)},r)]}))}))},d=function(e,t){return Object(o.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(o.__generator)(this,(function(i){return n=e.body,r=w(n,t),[2,Object(o.__assign)({name:"ServiceUnavailableException",$fault:"server",$metadata:S(e)},r)]}))}))},h=function(e,t){var n={};return void 0!==e.DeliveryStreamName&&(n.DeliveryStreamName=e.DeliveryStreamName),void 0!==e.Records&&(n.Records=p(e.Records,t)),n},p=function(e,t){var n,r,i=[];try{for(var s=Object(o.__values)(e),a=s.next();!a.done;a=s.next()){var u=a.value;i.push(g(u,t))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},g=function(e,t){var n={};return void 0!==e.Data&&(n.Data=t.base64Encoder(e.Data)),n},v=function(e,t){var n={__type:"InvalidArgumentException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},y=function(e,t){var n={__type:"InvalidKMSResourceException",code:void 0,message:void 0};return void 0!==e.code&&null!==e.code&&(n.code=e.code),void 0!==e.message&&null!==e.message&&(n.message=e.message),n},m=function(e,t){var n={__type:"PutRecordBatchOutput",Encrypted:void 0,FailedPutCount:void 0,RequestResponses:void 0};return void 0!==e.Encrypted&&null!==e.Encrypted&&(n.Encrypted=e.Encrypted),void 0!==e.FailedPutCount&&null!==e.FailedPutCount&&(n.FailedPutCount=e.FailedPutCount),void 0!==e.RequestResponses&&null!==e.RequestResponses&&(n.RequestResponses=_(e.RequestResponses,t)),n},_=function(e,t){return(e||[]).map((function(e){return function(e,t){var n={__type:"PutRecordBatchResponseEntry",ErrorCode:void 0,ErrorMessage:void 0,RecordId:void 0};return void 0!==e.ErrorCode&&null!==e.ErrorCode&&(n.ErrorCode=e.ErrorCode),void 0!==e.ErrorMessage&&null!==e.ErrorMessage&&(n.ErrorMessage=e.ErrorMessage),void 0!==e.RecordId&&null!==e.RecordId&&(n.RecordId=e.RecordId),n}(e)}))},b=function(e,t){var n={__type:"ResourceNotFoundException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},w=function(e,t){var n={__type:"ServiceUnavailableException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},S=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},E=function(e,t){return function(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))},O=function(e,t,n,r,i){var a=Object(o.__assign)(Object(o.__assign)({},e.endpoint),{protocol:"https",method:"POST",path:n,headers:t});return void 0!==r&&(a.hostname=r),void 0!==i&&(a.body=i),new s.HttpRequest(a)},A=function(e,t){return E(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},I=n(5),C=n(2),P=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(o.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(I.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(o.__generator)(this,(function(i){return(n={})["Content-Type"]="application/x-amz-json-1.1",n["X-Amz-Target"]="Firehose_20150804.PutRecordBatch",r=JSON.stringify(h(e,t)),[2,O(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(o.__generator)(this,(function(s){switch(s.label){case 0:return e.statusCode>=400?[2,a(e,t)]:[4,A(e.body,t)];case 1:return n=s.sent(),{},r=m(n,t),i=Object(o.__assign)({$metadata:S(e),__type:"PutRecordBatchOutput"},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(C.Command),T=n(16),x=n(22),k=n(23),j=n(24),N=n(25),R=n(26),M=n(7),U=n(13),D=n(27),L=n(76),B=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),z=new Set(["cn-north-1","cn-northwest-1"]),F=new Set(["us-iso-east-1"]),q=new Set(["us-isob-east-1"]),K=new Set(["us-gov-west-1","us-gov-east-1"]),H={apiVersion:"2015-08-04",disableHostPrefix:!1,signingName:"firehose",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"firehose.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"firehose.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"firehose.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"firehose.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"firehose.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"firehose.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"firehose.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"firehose.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"firehose.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"firehose.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"firehose.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"firehose.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"firehose.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"firehose.eu-west-3.amazonaws.com"};break;case"me-south-1":n={hostname:"firehose.me-south-1.amazonaws.com"};break;case"sa-east-1":n={hostname:"firehose.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"firehose.us-east-1.amazonaws.com"};break;case"us-east-2":n={hostname:"firehose.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"firehose.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"firehose.us-gov-west-1.amazonaws.com"};break;case"us-west-1":n={hostname:"firehose.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"firehose.us-west-2.amazonaws.com"};break;default:B.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e)}),z.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com.cn".replace("{region}",e)}),F.has(e)&&(n={hostname:"firehose.{region}.c2s.ic.gov".replace("{region}",e)}),q.has(e)&&(n={hostname:"firehose.{region}.sc2s.sgov.gov".replace("{region}",e)}),K.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e)})}return Promise.resolve(n)}},V=Object(o.__assign)(Object(o.__assign)({},H),{requestHandler:new k.FetchHttpHandler,sha256:x.Sha256,urlParser:j.parseUrl,bodyLengthChecker:N.calculateBodyLength,streamCollector:R.streamCollector,base64Decoder:U.fromBase64,base64Encoder:U.toBase64,utf8Decoder:M.fromUtf8,utf8Encoder:M.toUtf8,defaultUserAgent:Object(D.defaultUserAgent)(L.a,L.b),runtime:"browser",credentialDefaultProvider:Object(T.invalidFunction)("Credential is missing"),regionDefaultProvider:Object(T.invalidFunction)("Region is missing")}),G=n(9),$=n(21),W=n(10),Y=n(11),J=n(15),X=n(12),Q=function(e){function t(t){var n=this,r=Object(o.__assign)(Object(o.__assign)({},V),t),i=Object(G.resolveRegionConfig)(r),s=Object(G.resolveEndpointsConfig)(i),a=Object(J.resolveAwsAuthConfig)(s),u=Object(Y.resolveRetryConfig)(a),c=Object(X.resolveUserAgentConfig)(u),l=Object(W.resolveHostHeaderConfig)(c);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(J.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(Y.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(X.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object($.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(W.getHostHeaderPlugin)(n.config)),n}return Object(o.__extends)(t,e),t.prototype.destroy=function(){},t}(C.Client),Z=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ee=new r.a("AWSKineisFirehoseProvider"),te=function(e){function t(t){return e.call(this,t)||this}return Z(t,e),t.prototype.getProviderName=function(){return"AWSKinesisFirehose"},t.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName;void 0===o[n]&&(o[n]=[]);var r=t.partitionKey||"partition-"+i.identityId;Object.assign(t.data,{PartitionKey:r});var s={Data:JSON.stringify(t.data)};o[n].push(s)})),Object.keys(o).map((function(e){ee.debug("putting records to kinesis",e,"with records",o[e]),t._kinesisFirehose.send(new P({Records:o[e],DeliveryStreamName:e})).then((function(t){return ee.debug("Upload records to stream",e)})).catch((function(e){return ee.debug("Failed to upload records to Kinesis",e)}))}))}},t.prototype._init=function(e,t){if(ee.debug("init clients"),this._kinesisFirehose&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return ee.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return this._initFirehose(n,t)},t.prototype._initFirehose=function(e,t){return ee.debug("initialize kinesis firehose with credentials",t),this._kinesisFirehose=new Q({apiVersion:"2015-08-04",region:e,credentials:t}),!0},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return pe}));var r=n(32),i=n(35),o=n(71),s=n(0),a=n(3);function u(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,u,m,_,b,w,S,E,O,A,I,C,P;return Object(s.__generator)(this,(function(T){switch(T.label){case 0:return r=[Object(s.__assign)({},e)],i={},[4,M(e.body,t)];case 1:switch(n=s.__assign.apply(void 0,r.concat([(i.body=T.sent(),i)])),a="UnknownError",u=n.body.__type.split("#"),a=void 0===u[1]?u[0]:u[1],a){case"InvalidArgumentException":case"com.amazonaws.kinesis.v20131202#InvalidArgumentException":return[3,2];case"KMSAccessDeniedException":case"com.amazonaws.kinesis.v20131202#KMSAccessDeniedException":return[3,4];case"KMSDisabledException":case"com.amazonaws.kinesis.v20131202#KMSDisabledException":return[3,6];case"KMSInvalidStateException":case"com.amazonaws.kinesis.v20131202#KMSInvalidStateException":return[3,8];case"KMSNotFoundException":case"com.amazonaws.kinesis.v20131202#KMSNotFoundException":return[3,10];case"KMSOptInRequired":case"com.amazonaws.kinesis.v20131202#KMSOptInRequired":return[3,12];case"KMSThrottlingException":case"com.amazonaws.kinesis.v20131202#KMSThrottlingException":return[3,14];case"ProvisionedThroughputExceededException":case"com.amazonaws.kinesis.v20131202#ProvisionedThroughputExceededException":return[3,16];case"ResourceNotFoundException":case"com.amazonaws.kinesis.v20131202#ResourceNotFoundException":return[3,18]}return[3,20];case 2:return m=[{}],[4,c(n,t)];case 3:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,m.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 4:return _=[{}],[4,l(n,t)];case 5:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,_.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 6:return b=[{}],[4,f(n,t)];case 7:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,b.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 8:return w=[{}],[4,d(n,t)];case 9:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,w.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 10:return S=[{}],[4,h(n,t)];case 11:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,S.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 12:return E=[{}],[4,p(n,t)];case 13:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,E.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 14:return O=[{}],[4,g(n,t)];case 15:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,O.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 16:return A=[{}],[4,v(n,t)];case 17:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,A.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 18:return I=[{}],[4,y(n,t)];case 19:return o=s.__assign.apply(void 0,[s.__assign.apply(void 0,I.concat([T.sent()])),{name:a,$metadata:j(e)}]),[3,21];case 20:C=n.body,a=C.code||C.Code||a,o=Object(s.__assign)(Object(s.__assign)({},C),{name:""+a,message:C.message||C.Message||a,$fault:"client",$metadata:j(e)}),T.label=21;case 21:return P=o.message||o.Message||a,o.message=P,delete o.Message,[2,Promise.reject(Object.assign(new Error(P),o))]}}))}))}var c=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=w(n,t),[2,Object(s.__assign)({name:"InvalidArgumentException",$fault:"client",$metadata:j(e)},r)]}))}))},l=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=S(n,t),[2,Object(s.__assign)({name:"KMSAccessDeniedException",$fault:"client",$metadata:j(e)},r)]}))}))},f=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=E(n,t),[2,Object(s.__assign)({name:"KMSDisabledException",$fault:"client",$metadata:j(e)},r)]}))}))},d=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=O(n,t),[2,Object(s.__assign)({name:"KMSInvalidStateException",$fault:"client",$metadata:j(e)},r)]}))}))},h=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=A(n,t),[2,Object(s.__assign)({name:"KMSNotFoundException",$fault:"client",$metadata:j(e)},r)]}))}))},p=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=I(n,t),[2,Object(s.__assign)({name:"KMSOptInRequired",$fault:"client",$metadata:j(e)},r)]}))}))},g=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=C(n,t),[2,Object(s.__assign)({name:"KMSThrottlingException",$fault:"client",$metadata:j(e)},r)]}))}))},v=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=P(n,t),[2,Object(s.__assign)({name:"ProvisionedThroughputExceededException",$fault:"client",$metadata:j(e)},r)]}))}))},y=function(e,t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return n=e.body,r=k(n,t),[2,Object(s.__assign)({name:"ResourceNotFoundException",$fault:"client",$metadata:j(e)},r)]}))}))},m=function(e,t){var n={};return void 0!==e.Records&&(n.Records=b(e.Records,t)),void 0!==e.StreamName&&(n.StreamName=e.StreamName),n},_=function(e,t){var n={};return void 0!==e.Data&&(n.Data=t.base64Encoder(e.Data)),void 0!==e.ExplicitHashKey&&(n.ExplicitHashKey=e.ExplicitHashKey),void 0!==e.PartitionKey&&(n.PartitionKey=e.PartitionKey),n},b=function(e,t){var n,r,i=[];try{for(var o=Object(s.__values)(e),a=o.next();!a.done;a=o.next()){var u=a.value;i.push(_(u,t))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},w=function(e,t){var n={__type:"InvalidArgumentException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},S=function(e,t){var n={__type:"KMSAccessDeniedException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},E=function(e,t){var n={__type:"KMSDisabledException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},O=function(e,t){var n={__type:"KMSInvalidStateException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},A=function(e,t){var n={__type:"KMSNotFoundException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},I=function(e,t){var n={__type:"KMSOptInRequired",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},C=function(e,t){var n={__type:"KMSThrottlingException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},P=function(e,t){var n={__type:"ProvisionedThroughputExceededException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},T=function(e,t){var n={__type:"PutRecordsOutput",EncryptionType:void 0,FailedRecordCount:void 0,Records:void 0};return void 0!==e.EncryptionType&&null!==e.EncryptionType&&(n.EncryptionType=e.EncryptionType),void 0!==e.FailedRecordCount&&null!==e.FailedRecordCount&&(n.FailedRecordCount=e.FailedRecordCount),void 0!==e.Records&&null!==e.Records&&(n.Records=x(e.Records,t)),n},x=function(e,t){return(e||[]).map((function(e){return function(e,t){var n={__type:"PutRecordsResultEntry",ErrorCode:void 0,ErrorMessage:void 0,SequenceNumber:void 0,ShardId:void 0};return void 0!==e.ErrorCode&&null!==e.ErrorCode&&(n.ErrorCode=e.ErrorCode),void 0!==e.ErrorMessage&&null!==e.ErrorMessage&&(n.ErrorMessage=e.ErrorMessage),void 0!==e.SequenceNumber&&null!==e.SequenceNumber&&(n.SequenceNumber=e.SequenceNumber),void 0!==e.ShardId&&null!==e.ShardId&&(n.ShardId=e.ShardId),n}(e)}))},k=function(e,t){var n={__type:"ResourceNotFoundException",message:void 0};return void 0!==e.message&&null!==e.message&&(n.message=e.message),n},j=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},N=function(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},R=function(e,t,n,r,i){var o=Object(s.__assign)(Object(s.__assign)({},e.endpoint),{protocol:"https",method:"POST",path:n,headers:t});return void 0!==r&&(o.hostname=r),void 0!==i&&(o.body=i),new a.HttpRequest(o)},M=function(e,t){return function(e,t){return N(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},U=n(5),D=n(2),L=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(s.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(U.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){return(n={})["Content-Type"]="application/x-amz-json-1.1",n["X-Amz-Target"]="Kinesis_20131202.PutRecords",r=JSON.stringify(m(e,t)),[2,R(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return e.statusCode>=400?[2,u(e,t)]:[4,M(e.body,t)];case 1:return n=o.sent(),{},r=T(n,t),i=Object(s.__assign)({$metadata:j(e),__type:"PutRecordsOutput"},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(D.Command),B=n(61),z=n(16),F=n(22),q=n(23),K=n(24),H=n(25),V=n(26),G=n(7),$=n(13),W=n(27),Y=n(75),J=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),X=new Set(["cn-north-1","cn-northwest-1"]),Q=new Set(["us-iso-east-1"]),Z=new Set(["us-isob-east-1"]),ee=new Set(["us-gov-west-1","us-gov-east-1"]),te={apiVersion:"2013-12-02",disableHostPrefix:!1,signingName:"kinesis",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"kinesis.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"kinesis.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"kinesis.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"kinesis.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"kinesis.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"kinesis.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"kinesis.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"kinesis.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"kinesis.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"kinesis.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"kinesis.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"kinesis.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"kinesis.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"kinesis.eu-west-3.amazonaws.com"};break;case"me-south-1":n={hostname:"kinesis.me-south-1.amazonaws.com"};break;case"sa-east-1":n={hostname:"kinesis.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"kinesis.us-east-1.amazonaws.com"};break;case"us-east-2":n={hostname:"kinesis.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"kinesis.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"kinesis.us-gov-west-1.amazonaws.com"};break;case"us-iso-east-1":n={hostname:"kinesis.us-iso-east-1.c2s.ic.gov"};break;case"us-isob-east-1":n={hostname:"kinesis.us-isob-east-1.sc2s.sgov.gov"};break;case"us-west-1":n={hostname:"kinesis.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"kinesis.us-west-2.amazonaws.com"};break;default:J.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e)}),X.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com.cn".replace("{region}",e)}),Q.has(e)&&(n={hostname:"kinesis.{region}.c2s.ic.gov".replace("{region}",e)}),Z.has(e)&&(n={hostname:"kinesis.{region}.sc2s.sgov.gov".replace("{region}",e)}),ee.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e)})}return Promise.resolve(n)}},ne=Object(s.__assign)(Object(s.__assign)({},te),{requestHandler:new q.FetchHttpHandler,sha256:F.Sha256,urlParser:K.parseUrl,bodyLengthChecker:H.calculateBodyLength,streamCollector:V.streamCollector,base64Decoder:$.fromBase64,base64Encoder:$.toBase64,utf8Decoder:G.fromUtf8,utf8Encoder:G.toUtf8,defaultUserAgent:Object(W.defaultUserAgent)(Y.a,Y.b),runtime:"browser",credentialDefaultProvider:Object(z.invalidFunction)("Credential is missing"),regionDefaultProvider:Object(z.invalidFunction)("Region is missing"),eventStreamSerdeProvider:B.a}),re=n(9),ie=n(59),oe=n(21),se=n(10),ae=n(11),ue=n(15),ce=n(12),le=function(e){function t(t){var n=this,r=Object(s.__assign)(Object(s.__assign)({},ne),t),i=Object(re.resolveRegionConfig)(r),o=Object(re.resolveEndpointsConfig)(i),a=Object(ue.resolveAwsAuthConfig)(o),u=Object(ae.resolveRetryConfig)(a),c=Object(ce.resolveUserAgentConfig)(u),l=Object(se.resolveHostHeaderConfig)(c),f=Object(ie.resolveEventStreamSerdeConfig)(l);return(n=e.call(this,f)||this).config=f,n.middlewareStack.use(Object(ue.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(ae.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(ce.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(oe.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(se.getHostHeaderPlugin)(n.config)),n}return Object(s.__extends)(t,e),t.prototype.destroy=function(){},t}(D.Client),fe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},de=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},he=new r.a("AWSKinesisProvider"),pe=function(){function e(e){this._buffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._setupTimer()}return e.prototype._setupTimer=function(){var e=this;this._timer&&clearInterval(this._timer);var t=this._config,n=t.flushSize,r=t.flushInterval;this._timer=setInterval((function(){for(var t=e._buffer.length<n?e._buffer.length:n,r=[],i=0;i<t;i+=1){var o=e._buffer.shift();r.push(o)}e._sendFromBuffer(r)}),r)},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AWSKinesis"},e.prototype.configure=function(e){he.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),this._setupTimer(),this._config},e.prototype.record=function(e){return fe(this,void 0,void 0,(function(){var t;return de(this,(function(n){switch(n.label){case 0:return[4,this._getCredentials()];case 1:return(t=n.sent())?(Object.assign(e,{config:this._config,credentials:t}),[2,this._putToBuffer(e)]):[2,Promise.resolve(!1)]}}))}))},e.prototype.updateEndpoint=function(){return he.debug("updateEndpoint is not implemented in Kinesis provider"),Promise.resolve(!0)},e.prototype._putToBuffer=function(e){return this._buffer.length<1e3?(this._buffer.push(e),Promise.resolve(!0)):(he.debug("exceed analytics events buffer size"),Promise.reject(!1))},e.prototype._sendFromBuffer=function(e){for(var t=this,n=[],r=null,i=[],o=0;o<e.length;o+=1){var s=e[o].credentials;0===o?(i.push(e[o]),r=s):s.sessionToken===r.sessionToken&&s.identityId===r.identityId?(he.debug("no change for cred, put event in the same group"),i.push(e[o])):(n.push(i),(i=[]).push(e[o]),r=s)}n.push(i),n.map((function(e){t._sendEvents(e)}))},e.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName;void 0===o[n]&&(o[n]=[]);var r={Data:JSON.stringify(t.data),PartitionKey:t.partitionKey||"partition-"+i.identityId};o[n].push(r)})),Object.keys(o).map((function(e){return fe(t,void 0,void 0,(function(){var t,n;return de(this,(function(r){switch(r.label){case 0:he.debug("putting records to kinesis with records",o[e]),r.label=1;case 1:return r.trys.push([1,3,,4]),t=new L({Records:o[e],StreamName:e}),[4,this._kinesis.send(t)];case 2:return r.sent(),he.debug("Upload records to stream",e),[3,4];case 3:return n=r.sent(),he.debug("Failed to upload records to Kinesis",n),[3,4];case 4:return[2]}}))}))}))}},e.prototype._init=function(e,t){if(he.debug("init clients"),this._kinesis&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return he.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return this._initKinesis(n,t)},e.prototype._initKinesis=function(e,t){return he.debug("initialize kinesis with credentials",t),this._kinesis=new le({region:e,credentials:t,customUserAgent:Object(i.b)()}),!0},e.prototype._getCredentials=function(){var e=this;return o.a.get().then((function(t){return t?(he.debug("set credentials for analytics",e._config.credentials),o.a.shear(t)):null})).catch((function(e){return he.debug("ensure credentials error",e),null}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r,i=n(32),o=n(17),s=n(4),a=n(71),u=n(57),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=new i.a("AbstractXRProvider"),f=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=c(c({},e),this._config),l.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"XR"},Object.defineProperty(e.prototype,"options",{get:function(){return c({},this._config)},enumerable:!0,configurable:!0}),e}(),d=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(Error),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(h),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(h),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(h),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(h),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(h),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(h),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},S=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},O=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},A=new i.a("SumerianProvider"),I=function(e){function t(t){return void 0===t&&(t={}),e.call(this,t)||this}return b(t,e),t.prototype.getProviderName=function(){return"SumerianProvider"},t.prototype.loadScript=function(e){return S(this,void 0,void 0,(function(){return E(this,(function(t){return[2,new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.addEventListener("load",(function(e){t()})),r.addEventListener("error",(function(t){n(new Error("Failed to load script: "+e))})),document.head.appendChild(r)}))]}))}))},t.prototype.loadScene=function(e,t,n){return S(this,void 0,void 0,(function(){var r,i,o,c,l,f,d,h,p,g,v,_,b,S,I,C,P,T,x,k,j,N,R,M,U,D,L;return E(this,(function(E){switch(E.label){case 0:if(!e)throw f="No scene name passed into loadScene",A.error(f),new m(f);if(!t)throw f="No dom element id passed into loadScene",A.error(f),new y(f);if(!(r=document.getElementById(t)))throw f="DOM element id, "+t+" not found",A.error(f),new y(f);if(!(i=this.getScene(e)).sceneConfig)throw f="No scene config configured for scene: "+e,A.error(f),new m(f);if(o=i.sceneConfig.url,c=i.sceneConfig.sceneId,i.sceneConfig.hasOwnProperty("region"))l=i.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw f="No region configured for scene: "+e,A.error(f),new m(f);l=this.options.region}d={region:l,customUserAgent:s.a.userAgent+"-SumerianScene"},h={headers:{"X-Amz-User-Agent":s.a.userAgent}},p=o,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,a.a.get()];case 2:return g=E.sent(),d.credentials=g,v={secret_key:g.secretAccessKey,access_key:g.accessKeyId,session_token:g.sessionToken},_={region:l,service:"sumerian"},b=u.a.sign({method:"GET",url:o},v,_),h.headers=w(w({},h.headers),b.headers),p=b.url,[3,4];case 3:return E.sent(),A.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(p,h)];case 5:return[4,(S=E.sent()).json()];case 6:if(I=E.sent(),403===S.status)throw I.message?(A.error("Failure to authenticate user: "+I.message),new m("Failure to authenticate user: "+I.message)):(A.error("Failure to authenticate user"),new m("Failure to authenticate user"));return C=I.bundleData[c],[4,fetch(C.url,{headers:C.headers})];case 7:return[4,E.sent().json()];case 8:P=E.sent(),E.label=9;case 9:return E.trys.push([9,11,,12]),[4,this.loadScript(P[c].bootstrapperUrl)];case 10:return E.sent(),[3,12];case 11:throw T=E.sent(),A.error(T),new m(T);case 12:return x=n.progressCallback?n.progressCallback:void 0,k=i.publishParamOverrides?i.publishParamOverrides:void 0,j={element:r,sceneId:c,sceneBundle:P,apiResponse:I,progressCallback:x,publishParamOverrides:k,awsSDKConfigOverride:d},[4,window.SumerianBootstrapper.loadScene(j)];case 13:N=E.sent(),i.sceneController=N,i.isLoaded=!0;try{for(R=O(N.sceneLoadWarnings),M=R.next();!M.done;M=R.next())U=M.value,A.warn("loadScene warning: "+U)}catch(e){D={error:e}}finally{try{M&&!M.done&&(L=R.return)&&L.call(R)}finally{if(D)throw D.error}}return[2]}}))}))},t.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},t.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw A.error(t),new p(t)}if(!e){t="No scene name was passed";throw A.error(t),new g(t)}if(!this.options.scenes[e]){t="Scene '"+e+"' is not configured";throw A.error(t),new g(t)}return this.options.scenes[e]},t.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw A.error(t),new p(t)}var n=this.options.scenes[e];if(!n){t="Scene '"+e+"' is not configured";throw A.error(t),new g(t)}var r=n.sceneController;if(!r){t="Scene controller for '"+e+"' has not been loaded";throw A.error(t),new v(t)}return r},t.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},t.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},t.prototype.start=function(e){this.getSceneController(e).start()},t.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},t.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},t.prototype.isMuted=function(e){return this.getSceneController(e).muted},t.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},t.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},t.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},t}(f),C=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},T=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},x=new i.a("XR"),k=new(function(){function e(e){this._options=e,x.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new I),o.a.register(this)}return e.prototype.configure=function(e){var t=this,n=e?e.XR||e:{};return x.debug("configure XR",{opt:n}),this._options=Object.assign({},this._options,n),Object.entries(this._pluggables).map((function(e){var r=T(e,2),i=r[0],o=r[1];i!==t._defaultProvider||n[t._defaultProvider]?o.configure(t._options[i]):o.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return C(this,void 0,void 0,(function(){return P(this,(function(t){return e&&"XR"===e.getCategory()?(this._pluggables[e.getProviderName()]=e,[2,e.configure(this._options)]):[2]}))}))},e.prototype.loadScene=function(e,t,n,r){return void 0===n&&(n={}),void 0===r&&(r=this._defaultProvider),C(this,void 0,void 0,(function(){return P(this,(function(i){switch(i.label){case 0:if(!this._pluggables[r])throw new _("Provider '"+r+"' not configured");return[4,this._pluggables[r].loadScene(e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},e.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},e.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},e.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},e.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},e.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},e.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},e.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},e.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new _("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},e.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new _("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},e.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},e}())(null)}])}));
//# sourceMappingURL=aws-amplify.min.js.map